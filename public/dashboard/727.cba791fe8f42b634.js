"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[727],{7747:(Zt,pt,P)=>{P.d(pt,{_:()=>bt});var e=P(3714),M=P(9223),H=P(2787),N=P(8024),A=P(1297),t=P(550),F=P(3223),I=P(3692);const q=["controlComponent"];function gt($,ot){if(1&$&&e._UZ(0,"control",1,2),2&$){const X=ot.$implicit,R=e.oxw();e.Q6J("hidden",X.hidden)("control",X)("direction",R.direction)("form",R.form)}}let bt=(()=>{var $;class ot{constructor(R){this.resourceLoader=R,this.direction="column",this.controls=[],this.controlComponents=new e.n_E,this.$resourceSubject=new N.t(1),this.$controlSubject=new N.t(1)}ngAfterViewInit(){this.$resourceSubject.subscribe(R=>{const G=[],L={};Object.keys(R).forEach(Q=>{R[Q].forEach(Z=>{const j=Z.substring(Z.lastIndexOf("/")+1),U=j.lastIndexOf("."),at=j.substring(0,U);G.push({name:at,src:Z}),L[at]=Q})}),console.log(R,L),this.resourceLoader.push(G),this.resourceLoader.load(...G.map(Q=>Q.name)).then(Q=>{console.log(Q),Q.forEach(Z=>{if(!Z.loaded||null==Z.type||"js"!=Z.type)return;const j=window[Z.resource];if(void 0!==j){let U,at={};if(console.log(L,Z.resource),L[Z.resource]){U=this.controlComponents.find(et=>et.id==L[Z.resource]);const V=this.controls.find(et=>et.id==L[Z.resource]);V&&V.depends&&V.depends.length>0&&V.depends.forEach(et=>{at[et]=this.controlComponents.find(ut=>ut.id==et)})}(0,A.H)(500).subscribe(()=>{try{const V=new j(U);V.init(at),U&&U.id&&(console.log(U.id),window[U.id+"Component"]=V)}catch(V){console.log(V)}})}})})})}ngOnInit(){this.$controlSubject.subscribe(R=>{null==this.form&&(this.form=new M.cw((0,H.T)(R)));const G={};R.forEach(L=>{Array.isArray(L.resources)&&L.resources.length>0&&(G[L.id]=L.resources),L.depends&&L.depends.length>0&&this.onDepend(L)}),Object.keys(G).length>0&&this.$resourceSubject.next(G)})}ngOnChanges(R){R.controls.currentValue!=R.controls.previousValue&&this.$controlSubject.next(R.controls.currentValue)}onDepend(R){const G=R.depends;if(!(null==G||G.length<1))for(let L of G){const Q=L.split(":");if(Q.length<2)continue;const Z=Q[0];"d"===Q[1]?(R.hidden=void 0!==Q[2]?this.form.controls[Z].value!==Q[2]:!this.form.controls[Z].value,this.form.controls[Z].valueChanges.subscribe(j=>{R.hidden=void 0!==Q[2]?j!==Q[2]:!j})):"e"===Q[1]&&this.form.controls[R.id].valueChanges.subscribe(j=>{const U={onlySelf:!1,emitEvent:!1,emitModelToViewChange:!0,emitViewToModelChange:!0};switch(typeof j){case"boolean":this.form.controls[Z].setValue(!1,U);break;case"number":case"bigint":this.form.controls[Z].setValue(0,U);break;case"string":this.form.controls[Z].setValue("",U);break;default:this.form.controls[Z].setValue(null,U)}})}}}return($=ot).\u0275fac=function(R){return new(R||$)(e.Y36(t.o))},$.\u0275cmp=e.Xpm({type:$,selectors:[["control-container"]],viewQuery:function(R,G){if(1&R&&e.Gf(q,5),2&R){let L;e.iGM(L=e.CRH())&&(G.controlComponents=L)}},inputs:{direction:"direction",controls:"controls",form:"form"},features:[e.TTD],decls:1,vars:1,consts:[[3,"hidden","control","direction","form",4,"ngFor","ngForOf"],[3,"hidden","control","direction","form"],["controlComponent",""]],template:function(R,G){1&R&&e.YNc(0,gt,2,4,"control",0),2&R&&e.Q6J("ngForOf",G.controls)},dependencies:[F.sg,I.F],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column}"]}),ot})()},3692:(Zt,pt,P)=>{P.d(pt,{F:()=>Pt});var e=P(3714),M=P(2787),H=P(9223),N=P(287),A=P(5990),t=P(1050),F=P(8777),I=P(4203),q=P(3250),gt=P(5813);function bt(b,k){if(1&b&&(e.TgZ(0,"label",19),e._uU(1),e.qZA()),2&b){const m=e.oxw();e.Tol("column"!==m.direction?"col-12 col-md-2":""),e.ekj("fs-4","group"==m.control.type),e.Q6J("for",m.control.id),e.xp6(1),e.hij(" ",m.control.label," ")}}function $(b,k){if(1&b&&e._UZ(0,"input",20),2&b){const m=e.oxw();e.Q6J("id",m.control.id)("placeholder",m.control.placeholder)("status",m.status)("type",m.control.inputType)("formControlName",m.control.id)}}function ot(b,k){if(1&b&&e._UZ(0,"textarea",21),2&b){const m=e.oxw();let w;e.Q6J("rows",m.control.settings&&null!==(w=m.control.settings.rows)&&void 0!==w?w:2)("id",m.control.id)("placeholder",m.control.placeholder)("status",m.status)("formControlName",m.control.id)}}function X(b,k){if(1&b&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&b){const m=k.$implicit;e.xp6(1),e.hij("",m,'"')}}function R(b,k){if(1&b&&(e.ynx(0),e.YNc(1,X,2,1,"span",26),e.BQk()),2&b){const m=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",m.attachments)}}function G(b,k){if(1&b&&e._UZ(0,"img",29),2&b){const m=k.$implicit,w=k.index,T=e.oxw(3);e.Udp("width",null!=T.control.settings&&T.control.settings.cropped?(null==T.control.settings?null:T.control.settings.cropped.width)+"px":"100%")("height",null!=T.control.settings&&T.control.settings.cropped?(null==T.control.settings?null:T.control.settings.cropped.height)+"px":null,"px"),e.s9C("alt",T.control.label+w),e.Q6J("src",m,e.LSH)}}function L(b,k){if(1&b&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,G,1,6,"img",28),e.qZA(),e.BQk()),2&b){const m=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",m.attachments)}}function Q(b,k){if(1&b){const m=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(m);const T=e.oxw(2);return e.KtG(T.removeMedia())}),e._uU(2),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){e.CHM(m);const T=e.oxw(2);return e.KtG(T.openMedia())}),e._uU(4),e.qZA(),e.BQk()}if(2&b){const m=e.oxw(2);e.xp6(2),e.Oqu(null==m.control.settings?null:m.control.settings.button_labels.remove),e.xp6(2),e.Oqu(null==m.control.settings?null:m.control.settings.button_labels.change)}}function Z(b,k){if(1&b){const m=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(m);const T=e.oxw(2);return e.KtG(T.openMedia())}),e._uU(1),e.qZA()}if(2&b){const m=e.oxw(2);e.xp6(1),e.hij(" ",null==m.control.settings?null:m.control.settings.button_labels.select," ")}}function j(b,k){if(1&b&&(e.TgZ(0,"div",2)(1,"div",22),e.YNc(2,R,2,1,"ng-container",23),e.YNc(3,L,3,1,"ng-container",23),e.qZA(),e.TgZ(4,"div",24),e.YNc(5,Q,5,2,"ng-container",23),e.YNc(6,Z,2,1,"button",25),e.qZA()()),2&b){const m=e.oxw();e.xp6(2),e.Q6J("ngIf","image"!=m.control.type),e.xp6(1),e.Q6J("ngIf","image"==m.control.type),e.xp6(2),e.Q6J("ngIf",m.attachments.length>0&&(null==m.control.settings?null:m.control.settings.is_upload)),e.xp6(1),e.Q6J("ngIf",m.attachments.length<1&&(null==m.control.settings?null:m.control.settings.is_upload))}}function U(b,k){if(1&b&&(e.TgZ(0,"nb-option",35),e._uU(1),e.qZA()),2&b){const m=k.$implicit;e.Q6J("value",m.value),e.xp6(1),e.Oqu(m.label)}}function at(b,k){if(1&b&&(e.TgZ(0,"nb-select",33),e.YNc(1,U,2,2,"nb-option",34),e.qZA()),2&b){const m=e.oxw();e.Q6J("id",m.control.id)("placeholder",m.control.placeholder)("multiple",m.control.multiple)("selected",m.control.value)("formControlName",m.control.id),e.xp6(1),e.Q6J("ngForOf",m.control.options)}}function V(b,k){if(1&b&&(e.TgZ(0,"nb-option",35),e._uU(1),e.qZA()),2&b){const m=k.$implicit;e.Q6J("value",m.value),e.xp6(1),e.Oqu(m.label)}}function et(b,k){if(1&b){const m=e.EpF();e.TgZ(0,"nb-select-with-autocomplete",36),e.NdJ("optionsAutocompleteInputChange",function(T){e.CHM(m);const W=e.oxw();return e.KtG(W.filterOptions(T))}),e.YNc(1,V,2,2,"nb-option",34),e.ALo(2,"async"),e.qZA()}if(2&b){const m=e.oxw();e.Q6J("withOptionsAutocomplete",!0)("placeholder",m.control.placeholder)("multiple",m.control.multiple)("selected",m.control.value)("formControlName",m.control.id),e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,6,m.filteredControlOptions$))}}function ut(b,k){if(1&b&&(e.TgZ(0,"nb-radio",35),e._uU(1),e.qZA()),2&b){const m=k.$implicit;e.Q6J("value",m.value),e.xp6(1),e.Oqu(m.label)}}function xt(b,k){if(1&b&&(e.TgZ(0,"nb-radio-group",37),e.YNc(1,ut,2,2,"nb-radio",34),e.qZA()),2&b){const m=e.oxw();e.Q6J("formControlName",m.control.id)("id",m.control.id),e.xp6(1),e.Q6J("ngForOf",m.control.options)}}function wt(b,k){if(1&b&&e._UZ(0,"nb-checkbox",38),2&b){const m=e.oxw();e.Q6J("id",m.control.id)("checked",!!m.control.value)("formControlName",m.control.id)}}function tt(b,k){if(1&b&&(e.TgZ(0,"div"),e._UZ(1,"input",39)(2,"nb-datepicker",40,41),e.qZA()),2&b){const m=e.MAs(3),w=e.oxw();e.xp6(1),e.s9C("id",w.control.id),e.Q6J("id",w.control.id)("placeholder",w.control.placeholder)("formControlName",w.control.id)("nbDatepicker",m),e.xp6(1),e.Q6J("format",w.control.format)}}function ct(b,k){if(1&b&&(e.TgZ(0,"div"),e._UZ(1,"input",39)(2,"nb-date-timepicker",42,43),e.qZA()),2&b){const m=e.MAs(3),w=e.oxw();e.xp6(1),e.s9C("id",w.control.id),e.Q6J("id",w.control.id)("placeholder",w.control.placeholder)("formControlName",w.control.id)("nbDatepicker",m),e.xp6(1),e.Q6J("format",w.control.format)}}function _t(b,k){if(1&b&&(e.TgZ(0,"div"),e._UZ(1,"input",39)(2,"nb-rangepicker",40,44),e.qZA()),2&b){const m=e.MAs(3),w=e.oxw();e.xp6(1),e.Q6J("id",w.control.id)("placeholder",w.control.placeholder)("formControlName",w.control.id)("nbDatepicker",m),e.xp6(1),e.Q6J("format",w.control.format)}}function rt(b,k){if(1&b&&(e.TgZ(0,"nb-option",35),e._uU(1),e.qZA()),2&b){const m=k.$implicit;e.Q6J("value",m.value),e.xp6(1),e.hij(" ",m.label," ")}}function st(b,k){if(1&b){const m=e.EpF();e.TgZ(0,"div")(1,"input",45,46),e.NdJ("input",function(){e.CHM(m);const T=e.MAs(2),W=e.oxw();return e.KtG(W.filterOptions(T.value))}),e.qZA(),e.TgZ(3,"nb-autocomplete",null,47),e.YNc(5,rt,2,2,"nb-option",34),e.ALo(6,"async"),e.qZA()()}if(2&b){const m=e.MAs(4),w=e.oxw();e.xp6(1),e.Q6J("id",w.control.id)("placeholder",w.control.placeholder)("formControlName",w.control.id)("nbAutocomplete",m),e.xp6(4),e.Q6J("ngForOf",e.lcZ(6,5,w.filteredControlOptions$))}}function lt(b,k){if(1&b&&(e.TgZ(0,"div",48),e._UZ(1,"input",49)(2,"ngx-colors",50),e.qZA()),2&b){const m=e.oxw();e.xp6(1),e.Q6J("value",m.getControl().value),e.xp6(1),e.Q6J("formControlName",m.control.id)}}function mt(b,k){if(1&b&&e._UZ(0,"div",51),2&b){const m=e.oxw();e.Q6J("innerHTML",m.dom.bypassSecurityTrustHtml(m.control.template),e.oJD)}}function Dt(b,k){if(1&b&&e._UZ(0,"nb-toggle",52),2&b){const m=e.oxw();e.Q6J("formControlName",m.control.id)("id",m.control.id)}}function vt(b,k){if(1&b&&e._UZ(0,"group-control",53),2&b){const m=e.oxw();e.Q6J("direction",m.direction)("element",m.control)("form",m.formGroup)}}function yt(b,k){if(1&b&&(e.TgZ(0,"p",54),e._uU(1),e.qZA()),2&b){const m=e.oxw();e.xp6(1),e.Oqu(m.error)}}function Ct(b,k){if(1&b&&e._UZ(0,"p",55),2&b){const m=e.oxw();e.Q6J("innerHTML",m.dom.bypassSecurityTrustHtml(m.control.description),e.oJD)}}function St(b,k){1&b&&e._UZ(0,"hr",56)}let Pt=(()=>{var b;class k{constructor(w,T,W,it){this.ckfinder=w,this.http=T,this.dom=W,this.locale=it,this.direction="column",this.invalid=!1,this.onChange=()=>{},this.onTouched=()=>{},this.id="",this.attachments=[],this.filteredControlOptions$=(0,N.of)([]),this.HTMLInputElement=HTMLInputElement}ngOnInit(){this.id=this.control.id,this.control.inputType||(this.control.inputType="text"),this.control.placeholder||(this.control.placeholder=""),this.control.format||(this.control.format="");const w=this.getControl();this.control.disabled&&w?.disable(),w?.statusChanges.subscribe(T=>{this.invalid="INVALID"==T&&w.dirty}),["file","image","video","audio"].includes(this.control.type)&&(this.ckfinder.onChoose().subscribe(T=>{const W=[];if(T.forEach(ht=>{this.control.id==ht.source&&W.push({url:ht.url,id:ht.id})}),W.length<1)return;let it=null;this.control.multiple?(it=[],W.forEach(ht=>{it.push(ht.id)})):it=W.pop().id,w.setValue(it)}),w.valueChanges.subscribe(T=>{T&&this.buildAttachment(T)}),w.value&&this.buildAttachment(w.value)),("autocomplete"===this.control.type||"select_search"===this.control.type)&&this.control.options&&(this.filteredControlOptions$=(0,N.of)(this.control.options))}filterOptions(w){let T=this.control.settings&&this.control.settings.endpoint||"";(0,N.of)(w).pipe((0,t.b)(400),(0,F.x)()).subscribe(W=>{this.filteredControlOptions$=T?this.http.get(T+"?text="+W).pipe((0,A.U)(it=>it.records)):(0,N.of)((this.control.options||[]).filter(it=>it.label.includes(W)))})}buildAttachment(w){if(Array.isArray(w))w.forEach(T=>{T<1||this.ckfinder.getAttachmentUrl(T).subscribe(W=>{this.attachments.push(W)})});else{let T=parseInt(w,10);T>0&&this.ckfinder.getAttachmentUrl(T).subscribe(W=>{this.attachments[0]=W})}}removeMedia(){this.attachments=[];let w=[];this.control.multiple||(w=void 0),this.getControl().setValue(w)}openMedia(){const w=this.control.type.charAt(0).toUpperCase()+this.control.type.slice(1)+"s";this.ckfinder.popup({resourceType:w,multi:this.control.multiple,source:this.control.id,cropped:this.control.settings&&this.control.settings.cropped?this.control.settings.cropped:void 0})}get status(){const w=this.getControl();return w?.dirty?w.invalid?"danger":"success":"primary"}get error(){const w=this.getControl()?.errors;return null==w||w.nbDatepickerParse?"":w.required?this.control.label+"\u4e0d\u80fd\u4e3a\u7a7a":w.min?this.control.label+"\u6700\u5c0f\u4e3a"+this.control.validators?.find(T=>"min"==T.key)?.value:w.max?this.control.label+"\u6700\u5927\u4e3a"+this.control.validators?.find(T=>"max"==T.key)?.value:w.pattern?this.control.label+"\u683c\u5f0f\u4e0d\u6b63\u786e":"\u672a\u77e5\u9519\u8bef"}getControl(){return this.control.required&&(this.control.placeholder||(this.control.placeholder="\u5fc5\u586b\u9879")),null==this.form&&(this.form=new H.cw((0,M.T)([this.control]))),this.form.controls[this.control.id]}get formGroup(){return this.getControl()}}return(b=k).\u0275fac=function(w){return new(w||b)(e.Y36(I.Q),e.Y36(q.eN),e.Y36(gt.H7),e.Y36(e.soG))},b.\u0275cmp=e.Xpm({type:b,selectors:[["control"]],inputs:{direction:"direction",control:"control",form:"form"},decls:22,vars:25,consts:[[1,"mb-3",3,"formGroup"],["class","label col-form-label",3,"fs-4","class","for",4,"ngIf"],[1,"d-flex","flex-column"],[3,"ngSwitch"],["status","primary","nbInput","","fullWidth","",3,"id","placeholder","status","type","formControlName",4,"ngSwitchCase"],["nbInput","","fullWidth","","status","primary",3,"rows","id","placeholder","status","formControlName",4,"ngSwitchCase"],["class","d-flex flex-column",4,"ngSwitchCase"],["status","primary","fullWidth","",3,"id","placeholder","multiple","selected","formControlName",4,"ngSwitchCase"],["status","primary","fullWidth","",3,"withOptionsAutocomplete","placeholder","multiple","selected","formControlName","optionsAutocompleteInputChange",4,"ngSwitchCase"],["class","d-flex","status","primary",3,"formControlName","id",4,"ngSwitchCase"],["status","primary",3,"id","checked","formControlName",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","d-flex justify-content-between align-items-center",4,"ngSwitchCase"],[3,"innerHTML",4,"ngSwitchCase"],["status","primary",3,"formControlName","id",4,"ngSwitchCase"],[3,"direction","element","form",4,"ngSwitchCase"],["class","caption col-form-label status-danger",4,"ngIf"],["class","label col-form-label",3,"innerHTML",4,"ngIf"],["style","color:var(--divider-color);opacity:1;",4,"ngIf"],[1,"label","col-form-label",3,"for"],["status","primary","nbInput","","fullWidth","",3,"id","placeholder","status","type","formControlName"],["nbInput","","fullWidth","","status","primary",3,"rows","id","placeholder","status","formControlName"],[1,"flex-column","d-flex","align-items-center"],[4,"ngIf"],[1,"d-flex","justify-content-between","mt-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"click",4,"ngIf"],["class","d-inline my-1 text-break",4,"ngFor","ngForOf"],[1,"d-inline","my-1","text-break"],[3,"alt","width","height","src",4,"ngFor","ngForOf"],[3,"alt","src"],["nbButton","","type","button","status","danger",3,"click"],["nbButton","","type","button","status","warning",3,"click"],["nbButton","","fullWidth","","type","button","status","primary",3,"click"],["status","primary","fullWidth","",3,"id","placeholder","multiple","selected","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["status","primary","fullWidth","",3,"withOptionsAutocomplete","placeholder","multiple","selected","formControlName","optionsAutocompleteInputChange"],["status","primary",1,"d-flex",3,"formControlName","id"],["status","primary",3,"id","checked","formControlName"],["nbInput","","fullWidth","","status","primary",3,"id","placeholder","formControlName","nbDatepicker"],[3,"format"],["datePicker",""],["withSeconds","",3,"format"],["dateTimePicker",""],["rangeDatePicker",""],["nbInput","","fullWidth","","status","primary",3,"id","placeholder","formControlName","nbAutocomplete","input"],["autoInput",""],["autocomplete",""],[1,"d-flex","justify-content-between","align-items-center"],["disabled","","nbInput","",3,"value"],["ngx-colors-trigger","",3,"formControlName"],[3,"innerHTML"],["status","primary",3,"formControlName","id"],[3,"direction","element","form"],[1,"caption","col-form-label","status-danger"],[1,"label","col-form-label",3,"innerHTML"],[2,"color","var(--divider-color)","opacity","1"]],template:function(w,T){1&w&&(e.TgZ(0,"div",0),e.YNc(1,bt,2,6,"label",1),e.TgZ(2,"div",2),e.ynx(3,3),e.YNc(4,$,1,5,"input",4),e.YNc(5,ot,1,5,"textarea",5),e.YNc(6,j,7,4,"div",6),e.YNc(7,at,2,6,"nb-select",7),e.YNc(8,et,3,8,"nb-select-with-autocomplete",8),e.YNc(9,xt,2,3,"nb-radio-group",9),e.YNc(10,wt,1,3,"nb-checkbox",10),e.YNc(11,tt,4,6,"div",11),e.YNc(12,ct,4,6,"div",11),e.YNc(13,_t,4,5,"div",11),e.YNc(14,st,7,7,"div",11),e.YNc(15,lt,3,2,"div",12),e.YNc(16,mt,1,1,"div",13),e.YNc(17,Dt,1,2,"nb-toggle",14),e.YNc(18,vt,1,3,"group-control",15),e.BQk(),e.YNc(19,yt,2,1,"p",16),e.YNc(20,Ct,1,1,"p",17),e.qZA(),e.YNc(21,St,1,0,"hr",18),e.qZA()),2&w&&(e.Tol("column"!==T.direction?"row":""),e.Q6J("formGroup",T.form),e.xp6(1),e.Q6J("ngIf",T.control.label),e.xp6(1),e.Tol("column"!==T.direction?"col-12 col-md-10":""),e.xp6(1),e.Q6J("ngSwitch",T.control.type),e.xp6(1),e.Q6J("ngSwitchCase","input"),e.xp6(1),e.Q6J("ngSwitchCase","textarea"),e.xp6(1),e.Q6J("ngSwitchCase","file"==T.control.type||"video"==T.control.type||"audio"==T.control.type||"image"==T.control.type?T.control.type:""),e.xp6(1),e.Q6J("ngSwitchCase","select"),e.xp6(1),e.Q6J("ngSwitchCase","select_search"),e.xp6(1),e.Q6J("ngSwitchCase","radio"),e.xp6(1),e.Q6J("ngSwitchCase","checkbox"),e.xp6(1),e.Q6J("ngSwitchCase","date"),e.xp6(1),e.Q6J("ngSwitchCase","datetime"),e.xp6(1),e.Q6J("ngSwitchCase","range_date"),e.xp6(1),e.Q6J("ngSwitchCase","autocomplete"),e.xp6(1),e.Q6J("ngSwitchCase","color"),e.xp6(1),e.Q6J("ngSwitchCase","custom"),e.xp6(1),e.Q6J("ngSwitchCase","switch"),e.xp6(1),e.Q6J("ngSwitchCase","group"),e.xp6(1),e.Q6J("ngIf",T.invalid),e.xp6(1),e.Q6J("ngIf",T.control.description&&T.control.description.length>0),e.xp6(1),e.Q6J("ngIf","group"==T.control.type))},styles:["[_nghost-%COMP%]{width:100%}"]}),k})()},2727:(Zt,pt,P)=>{P.d(pt,{s:()=>K});var e=P(3223),M=P(24),H=P(5216),N=P(2939),A=P(3692),t=P(3714),F=P(9223),I=P(6206);const q=["hueSlider"],gt=["alphaSlider"];function bt(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",8),t.NdJ("newValue",function(u){t.CHM(n);const h=t.oxw();return t.KtG(h.onSliderChange("saturation-lightness",u))}),t.TgZ(1,"div",9),t._UZ(2,"div"),t.qZA()()}if(2&g){const n=t.oxw();t.Udp("background-color",n.hueSliderColor),t.Q6J("rgX",1)("rgY",1),t.xp6(1),t.Udp("top",null==n.slider?null:n.slider.v,"px")("left",null==n.slider?null:n.slider.s,"px")}}function $(g,v){if(1&g&&(t.TgZ(0,"div",10),t._UZ(1,"div",11)(2,"div",12),t.qZA()),2&g){const n=t.oxw();t.xp6(2),t.Udp("background-color",n.selectedColor)}}function ot(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",13,14),t.NdJ("newValue",function(u){t.CHM(n);const h=t.oxw();return t.KtG(h.onSliderChange("hue",u))}),t.TgZ(2,"div",15)(3,"div"),t._UZ(4,"div"),t.qZA()()()}if(2&g){const n=t.oxw();t.Q6J("rgX",1),t.xp6(2),t.Udp("left",null==n.slider?null:n.slider.h,"px")}}function X(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",16,17),t.NdJ("newValue",function(u){t.CHM(n);const h=t.oxw();return t.KtG(h.onSliderChange("alpha",u))}),t._UZ(2,"div",18),t.TgZ(3,"div",15)(4,"div"),t._UZ(5,"div"),t.qZA()()()}if(2&g){const n=t.oxw();t.Q6J("rgX",1),t.xp6(2),t.Q6J("ngStyle",n.getBackgroundColor(n.alphaSliderColor)),t.xp6(1),t.Udp("left",null==n.slider?null:n.slider.a,"px")}}const R=["dialog"];function G(g,v){1&g&&t._UZ(0,"div",11)}function L(g,v){if(1&g){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"div",9),t.NdJ("click",function(){const h=t.CHM(n).$implicit,a=t.oxw(2);return t.KtG(a.onColorClick(h))}),t.YNc(3,G,1,0,"div",10),t.qZA()(),t.BQk()}if(2&g){const n=v.$implicit,c=v.index,u=t.oxw(2);t.xp6(2),t.ekj("colornull",!n),t.Q6J("ngStyle",u.getBackgroundColor(n)),t.xp6(1),t.Q6J("ngIf",c==u.indexSeleccionado)}}function Q(g,v){if(1&g&&t._UZ(0,"div",17),2&g){const n=t.oxw(3);t.Q6J("ngStyle",n.getBackgroundColor(n.color))}}function Z(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",12),t.NdJ("click",function(){t.CHM(n);const u=t.oxw(2);return t.KtG(u.addColor())}),t.YNc(1,Q,1,1,"div",13),t.O4$(),t.TgZ(2,"svg",14),t._UZ(3,"path",15)(4,"path",16),t.qZA()()}if(2&g){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.indexSeleccionado)}}function j(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"color-picker",18),t.NdJ("colorChange",function(u){t.CHM(n);const h=t.oxw(2);return t.KtG(h.onChangeColorPicker(u))})("onAlphaChange",function(u){t.CHM(n);const h=t.oxw(2);return t.KtG(h.onAlphaChange(u))}),t.qZA()}if(2&g){const n=t.oxw(2);t.Q6J("controls",n.colorPickerControls)("color",n.hsva)}}function U(g,v){if(1&g&&(t.ynx(0),t.TgZ(1,"div",4),t.YNc(2,L,4,4,"ng-container",5),t.YNc(3,Z,5,1,"div",6),t.YNc(4,j,1,2,"color-picker",7),t.qZA(),t.BQk()),2&g){const n=t.oxw();t.xp6(1),t.Q6J("@colorsAnimation",n.colorsAnimationEffect),t.xp6(1),t.Q6J("ngForOf",n.palette),t.xp6(1),t.Q6J("ngIf",!n.hideColorPicker&&"only-alpha"!=n.colorPickerControls),t.xp6(1),t.Q6J("ngIf",!n.hideColorPicker&&"only-alpha"==n.colorPickerControls)}}function at(g,v){1&g&&t._UZ(0,"div",11)}const V=function(g){return{background:g}};function et(g,v){if(1&g){const n=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"div",8)(2,"div",24),t.NdJ("click",function(){const h=t.CHM(n).$implicit,a=t.oxw(2);return t.KtG(a.changeColor(h))}),t.YNc(3,at,1,0,"div",10),t.qZA()(),t.BQk()}if(2&g){const n=v.$implicit,c=t.oxw(2);t.xp6(2),t.ekj("colornull",!n),t.Q6J("ngStyle",t.VKq(4,V,n)),t.xp6(1),t.Q6J("ngIf",c.isSelected(n))}}function ut(g,v){if(1&g){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",4)(2,"div",19)(3,"div",20),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.onClickBack())}),t.O4$(),t.TgZ(4,"svg",21),t._UZ(5,"path",22)(6,"path",23),t.qZA()()(),t.YNc(7,et,4,6,"ng-container",5),t.qZA(),t.BQk()}if(2&g){const n=t.oxw();t.xp6(1),t.Q6J("@colorsAnimation",n.colorsAnimationEffect),t.xp6(6),t.Q6J("ngForOf",n.variants)}}function xt(g,v){if(1&g){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",25)(2,"div",26),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.onClickBack())}),t.O4$(),t.TgZ(3,"svg",21),t._UZ(4,"path",22)(5,"path",23),t.qZA()(),t.kcU(),t.TgZ(6,"button",27),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.emitClose("cancel"))}),t._uU(7),t.qZA(),t.TgZ(8,"button",27),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.emitClose("accept"))}),t._uU(9),t.qZA()(),t.TgZ(10,"div",28)(11,"color-picker",29),t.NdJ("sliderChange",function(u){t.CHM(n);const h=t.oxw();return t.KtG(h.onChangeColorPicker(u))}),t.qZA()(),t.BQk()}if(2&g){const n=t.oxw();t.xp6(7),t.hij(" ",n.cancelLabel," "),t.xp6(2),t.hij(" ",n.acceptLabel," "),t.xp6(2),t.Q6J("controls",n.colorPickerControls)("color",n.hsva)}}function wt(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",30)(1,"p",31),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.nextFormat())}),t._uU(2),t.qZA(),t.TgZ(3,"div",32)(4,"input",33,34),t.NdJ("keyup",function(){t.CHM(n);const u=t.MAs(5),h=t.oxw();return t.KtG(h.changeColorManual(u.value))})("keydown.enter",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.emitClose("accept"))}),t.qZA()()()}if(2&g){const n=t.oxw();t.xp6(2),t.Oqu(n.colorFormats[n.format]),t.xp6(2),t.Udp("font-size",n.color&&n.color.length>23?9:10,"px")("letter-spacing",n.color&&n.color.length>16?0:1.5,"px"),t.Q6J("value",n.color)}}var tt=function(g){return g[g.HEX=0]="HEX",g[g.RGBA=1]="RGBA",g[g.HSLA=2]="HSLA",g[g.CMYK=3]="CMYK",g}(tt||{});const ct=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}],_t=["hex","rgba","hsla"];class rt{constructor(v,n,c,u){this.r=v,this.g=n,this.b=c,this.a=u}denormalize(){return this.r=Math.round(255*this.r),this.g=Math.round(255*this.g),this.b=Math.round(255*this.b),this}toString(){return this.denormalize(),"rgb"+(1!=this.a?"a(":"(")+this.r+", "+this.g+", "+this.b+(1!=this.a?", "+this.a.toPrecision(2)+")":")")}}class st{constructor(v,n,c,u){this.h=v,this.s=n,this.v=c,this.a=u,this.onChange=new t.vpe(!0)}onColorChange(v){this.s=v.s/v.rgX,this.v=v.v/v.rgY}onHueChange(v){this.h=v.v/v.rgX}onValueChange(v){this.v=v.v/v.rgX}onAlphaChange(v){this.a=v.v/v.rgX}}class lt{constructor(v,n,c,u){this.h=v,this.s=n,this.l=c,this.a=u}denormalize(){return this.h=Math.round(360*this.h),this.s=Math.round(100*this.s),this.l=Math.round(100*this.l),this}toString(){return"hsl"+(1!=this.a?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(1!=this.a?", "+this.a.toPrecision(2)+")":")")}}class mt{constructor(v,n,c,u,h=1){this.c=v,this.m=n,this.y=c,this.k=u,this.a=h}}class Dt{constructor(v){v&&(this.preview=v.preview,this.variants=v.variants)}}let vt=(()=>{class g{constructor(){}toFormat(n,c){var u="";if(n)switch(c){case tt.HEX:(a=this.hsvaToRgba(n)).denormalize(),u=this.rgbaToHex(a,!0);break;case tt.HSLA:var h=this.hsva2hsla(n);h.denormalize(),u=h.toString();break;case tt.RGBA:u=(a=this.hsvaToRgba(n)).toString();break;case tt.CMYK:var a=this.hsvaToRgba(n);this.rgbaToCmyk(a)}return u}stringToFormat(n,c){var u=this.stringToHsva(n,!0);return this.toFormat(u,c)}hsva2hsla(n){const c=n.h,u=n.s,h=n.v,a=n.a;if(0===h)return new lt(c,0,0,a);if(0===u&&1===h)return new lt(c,1,1,a);{const l=h*(2-u)/2;return new lt(c,h*u/(1-Math.abs(2*l-1)),l,a)}}hsla2hsva(n){const c=Math.min(n.h,1),u=Math.min(n.s,1),h=Math.min(n.l,1),a=Math.min(n.a,1);if(0===h)return new st(c,0,0,a);{const l=h+u*(1-Math.abs(2*h-1))/2;return new st(c,2*(l-h)/l,l,a)}}hsvaToRgba(n){let c,u,h;const a=n.h,l=n.s,f=n.v,x=n.a,y=Math.floor(6*a),S=6*a-y,E=f*(1-l),d=f*(1-S*l),i=f*(1-(1-S)*l);switch(y%6){case 0:c=f,u=i,h=E;break;case 1:c=d,u=f,h=E;break;case 2:c=E,u=f,h=i;break;case 3:c=E,u=d,h=f;break;case 4:c=i,u=E,h=f;break;case 5:c=f,u=E,h=d;break;default:c=0,u=0,h=0}return new rt(c,u,h,x)}cmykToRgb(n){return new rt((1-n.c)*(1-n.k),(1-n.m)*(1-n.k),(1-n.y)*(1-n.k),n.a)}rgbaToCmyk(n){const c=1-Math.max(n.r,n.g,n.b);return 1===c?new mt(0,0,0,1,n.a):new mt((1-n.r-c)/(1-c),(1-n.g-c)/(1-c),(1-n.b-c)/(1-c),c,n.a)}rgbaToHsva(n){let c,u;const h=Math.min(n.r,1),a=Math.min(n.g,1),l=Math.min(n.b,1),f=Math.min(n.a,1),x=Math.max(h,a,l),y=Math.min(h,a,l),S=x,E=x-y;if(u=0===x?0:E/x,x===y)c=0;else{switch(x){case h:c=(a-l)/E+(a<l?6:0);break;case a:c=(l-h)/E+2;break;case l:c=(h-a)/E+4;break;default:c=0}c/=6}return new st(c,u,S,f)}rgbaToHex(n,c){let u="#"+(16777216|n.r<<16|n.g<<8|n.b).toString(16).substr(1);return 1!=n.a&&(u+=(256|Math.round(255*n.a)).toString(16).substr(1)),u}normalizeCMYK(n){return new mt(n.c/100,n.m/100,n.y/100,n.k/100,n.a)}denormalizeCMYK(n){return new mt(Math.floor(100*n.c),Math.floor(100*n.m),Math.floor(100*n.y),Math.floor(100*n.k),n.a)}denormalizeRGBA(n){return new rt(Math.round(255*n.r),Math.round(255*n.g),Math.round(255*n.b),n.a)}stringToHsva(n="",c=!0){let u=null;n=(n||"").toLowerCase();const h=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new rt(parseInt(a[2],10)/255,parseInt(a[3],10)/255,parseInt(a[4],10)/255,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new lt(parseInt(a[2],10)/360,parseInt(a[3],10)/100,parseInt(a[4],10)/100,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}}];h.push(c?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(a){return new rt(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,parseInt(a[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(a){return new rt(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,1)}}),h.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(a){return new rt(parseInt(a[1]+a[1],16)/255,parseInt(a[2]+a[2],16)/255,parseInt(a[3]+a[3],16)/255,1)}});for(const a in h)if(h.hasOwnProperty(a)){const l=h[a],f=l.re.exec(n),x=f&&l.parse(f);if(x)return x instanceof rt?u=this.rgbaToHsva(x):x instanceof lt&&(u=this.hsla2hsva(x)),u}return u}outputFormat(n){return this.hsvaToRgba(n).toString()}getFormatByString(n){if(n){n=n.toLowerCase();let u=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,h=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/;if(/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/.test(n))return"hex";if(u.test(n))return"rgba";if(h.test(n))return"hsla"}return"hex"}}return g.\u0275fac=function(n){return new(n||g)},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac}),g})();class yt{constructor(v,n,c,u){this.h=v,this.s=n,this.v=c,this.a=u}}class Ct{constructor(v,n,c,u){this.h=v,this.s=n,this.v=c,this.a=u}}let St=(()=>{class g{mouseDown(n){this.start(n)}touchStart(n){this.start(n)}constructor(n){this.elRef=n,this.dragEnd=new t.vpe,this.dragStart=new t.vpe,this.newValue=new t.vpe,this.listenerMove=c=>this.move(c),this.listenerStop=()=>this.stop()}move(n){n.preventDefault(),this.setCursor(n)}start(n){this.setCursor(n),n.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(n){const c=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==n.pageX?n.pageX:n.touches[0].pageX)-c.left-window.pageXOffset}getY(n){const c=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==n.pageY?n.pageY:n.touches[0].pageY)-c.top-window.pageYOffset}setCursor(n){const c=this.elRef.nativeElement.offsetWidth,u=this.elRef.nativeElement.offsetHeight,h=Math.max(0,Math.min(this.getX(n),c)),a=Math.max(0,Math.min(this.getY(n),u));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:h/c,v:1-a/u,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:a/u,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:h/c,rgX:this.rgX})}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(t.SBq))},g.\u0275dir=t.lG2({type:g,selectors:[["","slider",""]],hostBindings:function(n,c){1&n&&t.NdJ("mousedown",function(h){return c.mouseDown(h)})("touchstart",function(h){return c.touchStart(h)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),g})(),Pt=(()=>{class g{constructor(n,c){this.service=n,this.cdr=c,this.color=new st(0,1,1,1),this.controls="default",this.sliderChange=new t.vpe(!1),this.onAlphaChange=new t.vpe(!1),this.hsva=new st(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new st(0,1,1,1)),this.slider=new yt(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(n){n.color&&this.color&&this.update()}ngAfterViewInit(){this.sliderDimMax=new Ct(this.hueSlider?.nativeElement.offsetWidth||140,220,130,this.alphaSlider?.nativeElement.offsetWidth||140),this.update()}onSliderChange(n,c){switch(n){case"saturation-lightness":this.hsva.onColorChange(c);break;case"hue":this.hsva.onHueChange(c);break;case"alpha":this.hsva.onAlphaChange(c),this.onAlphaChange.emit(c);break;case"value":this.hsva.onValueChange(c)}this.update(),this.setColor(this.outputColor)}setColor(n){this.color=n,this.sliderChange.emit(this.color)}getBackgroundColor(n){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+n+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let n=this.service.hsvaToRgba(this.hsva).denormalize(),c=this.service.hsvaToRgba(new st(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+c.r+","+c.g+","+c.b+")",this.alphaSliderColor="rgb("+n.r+","+n.g+","+n.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new yt(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(vt),t.Y36(t.sBO))},g.\u0275cmp=t.Xpm({type:g,selectors:[["color-picker"]],viewQuery:function(n,c){if(1&n&&(t.Gf(q,5),t.Gf(gt,5)),2&n){let u;t.iGM(u=t.CRH())&&(c.hueSlider=u.first),t.iGM(u=t.CRH())&&(c.alphaSlider=u.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},features:[t.TTD],decls:8,vars:4,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"slider","rgX","newValue"],["hueSlider",""],[1,"sliderCursor"],[1,"alpha",3,"slider","rgX","newValue"],["alphaSlider",""],[1,"alpha-gradient",3,"ngStyle"]],template:function(n,c){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("click",function(h){return h.stopPropagation()}),t.YNc(2,bt,3,8,"div",2),t.TgZ(3,"div",3),t.YNc(4,$,3,2,"div",4),t.TgZ(5,"div",5),t.YNc(6,ot,5,3,"div",6),t.YNc(7,X,6,4,"div",7),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("ngIf","only-alpha"!=c.controls),t.xp6(2),t.Q6J("ngIf","only-alpha"!=c.controls),t.xp6(2),t.Q6J("ngIf","only-alpha"!=c.controls),t.xp6(1),t.Q6J("ngIf","no-alpha"!=c.controls))},dependencies:[e.O5,e.PC,St],styles:[".color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}\n"],encapsulation:2}),g})(),b=(()=>{class g{click(n){this.isOutside(n)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(n,c){this.service=n,this.cdr=c,this.color="#000000",this.previewColor="#000000",this.hsva=new st(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=ct,this.variants=[],this.colorFormats=_t,this.format=tt.HEX,this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(n){let c;if(this.color)for(let u=0;u<n.length;u++){const h=n[u];"string"==typeof h?this.service.stringToFormat(this.color,tt.HEX)==this.service.stringToFormat(h,tt.HEX)&&(c=u):void 0===h?this.color=void 0:null!=this.findIndexSelectedColor(h.variants)&&(c=u)}return c}iniciate(n,c,u,h,a,l,f,x,y,S,E,d){if(this.colorPickerControls=E,this.triggerInstance=n,this.TriggerBBox=c,this.color=u,this.hideColorPicker=x,this.hideTextInput=f,this.acceptLabel=y,this.cancelLabel=S,l?_t.includes(l)?(this.format=_t.indexOf(l.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=l.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=tt.HEX):this.format=_t.indexOf(this.service.getFormatByString(this.color)),this.previewColor=this.color,this.palette=h??ct,this.colorsAnimationEffect=a,"top"==d){let i=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+i.height+"px ))"}}setPosition(){if(this.TriggerBBox){const c=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=c.top+c.height,this.left=c.left+250>window.innerWidth?c.right<250?window.innerWidth/2-125:c.right-250:c.left}}setPositionY(){const n=this.TriggerBBox.nativeElement.getBoundingClientRect(),c=this.panelRef.nativeElement.getBoundingClientRect();this.positionString=n.bottom+c.height>window.innerHeight?n.top<c.height?"transform: translateY(-"+n.bottom+"px );":"transform: translateY(calc( -100% - "+n.height+"px ));":"",this.cdr.detectChanges()}hasVariant(n){return!!this.previewColor&&"string"!=typeof n&&n.variants.some(c=>c.toUpperCase()==this.previewColor.toUpperCase())}isSelected(n){return!!this.previewColor&&"string"==typeof n&&n.toUpperCase()==this.previewColor.toUpperCase()}getBackgroundColor(n){return"string"==typeof n?{background:n}:{background:n?.preview}}onAlphaChange(n){this.palette=this.ChangeAlphaOnPalette(n,this.palette)}ChangeAlphaOnPalette(n,c){var u=[];for(let h=0;h<c.length;h++){const a=c[h];if("string"==typeof a){let l=this.service.stringToHsva(a);l.onAlphaChange(n),u.push(this.service.toFormat(l,this.format))}else{let l=new Dt,f=this.service.stringToHsva(a.preview);f.onAlphaChange(n),l.preview=this.service.toFormat(f,this.format),l.variants=this.ChangeAlphaOnPalette(n,a.variants),u.push(l)}}return u}changeColor(n){this.setColor(this.service.stringToHsva(n)),this.emitClose("accept")}onChangeColorPicker(n){this.temporalColor=n,this.color=this.service.toFormat(n,this.format),this.triggerInstance.sliderChange(this.service.toFormat(n,this.format))}changeColorManual(n){this.previewColor=n,this.color=n,this.hsva=this.service.stringToHsva(n),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color)}setColor(n){this.hsva=n,this.color=this.service.toFormat(n,this.format),this.setPreviewColor(n),this.triggerInstance.setColor(this.color)}setPreviewColor(n){this.previewColor=n?this.service.hsvaToRgba(n).toString():void 0}onChange(){}onColorClick(n){"string"==typeof n||void 0===n?this.changeColor(n):(this.variants=n.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){this.canChangeFormat&&(this.format=(this.format+1)%this.colorFormats.length,this.setColor(this.hsva))}emitClose(n){3==this.menu&&("cancel"==n||"accept"==n&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){3==this.menu&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(n){return n.target.classList.contains("ngx-colors-overlay")}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(vt),t.Y36(t.sBO))},g.\u0275cmp=t.Xpm({type:g,selectors:[["ngx-colors-panel"]],viewQuery:function(n,c){if(1&n&&t.Gf(R,5),2&n){let u;t.iGM(u=t.CRH())&&(c.panelRef=u.first)}},hostVars:4,hostBindings:function(n,c){1&n&&t.NdJ("mousedown",function(h){return c.click(h)},!1,t.evT)("scroll",function(){return c.onScroll()},!1,t.evT)("resize",function(){return c.onResize()},!1,t.Jf7),2&n&&t.Udp("top",c.top,"px")("left",c.left,"px")},decls:6,vars:6,consts:[[1,"opened"],["dialog",""],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"ngStyle","click"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style","\n            position: absolute;\n            height: 7px;\n            width: 7px;\n            border: 1px solid rgba(0, 0, 0, 0.03);\n            border-radius: 100%;\n            top: 0;\n            right: 0;\n          ",3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"controls","color","colorChange","onAlphaChange"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"ngStyle","click"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"controls","color","sliderChange"],[1,"manual-input-wrapper"],[3,"click"],[1,"g-input"],["placeholder","#FFFFFF","type","text",3,"value","keyup","keydown.enter"],["paintInput",""]],template:function(n,c){1&n&&(t.TgZ(0,"div",0,1),t.YNc(2,U,5,4,"ng-container",2),t.YNc(3,ut,8,2,"ng-container",2),t.YNc(4,xt,12,4,"ng-container",2),t.YNc(5,wt,6,6,"div",3),t.qZA()),2&n&&(t.Akn(c.positionString),t.xp6(2),t.Q6J("ngIf",1==c.menu),t.xp6(1),t.Q6J("ngIf",2==c.menu),t.xp6(1),t.Q6J("ngIf",3==c.menu),t.xp6(1),t.Q6J("ngIf",!c.hideTextInput))},dependencies:[e.sg,e.O5,e.PC,Pt],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[(0,I.X$)("colorsAnimation",[(0,I.eR)("void => slide-in",[(0,I.IO)(":enter",(0,I.oB)({opacity:0}),{optional:!0}),(0,I.IO)(":enter",(0,I.EY)("10ms",[(0,I.jt)(".3s ease-in",(0,I.F4)([(0,I.oB)({opacity:0,transform:"translatex(-50%)",offset:0}),(0,I.oB)({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),(0,I.oB)({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),(0,I.eR)("void => popup",[(0,I.IO)(":enter",(0,I.oB)({opacity:0,transform:"scale(0)"}),{optional:!0}),(0,I.IO)(":enter",(0,I.EY)("10ms",[(0,I.jt)("500ms ease-out",(0,I.F4)([(0,I.oB)({opacity:.5,transform:"scale(.5)",offset:.3}),(0,I.oB)({opacity:1,transform:"scale(1.1)",offset:.8}),(0,I.oB)({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),g})();const k={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0};let m=(()=>{class g{constructor(n,c,u){this.resolver=n,this.applicationRef=c,this.injector=u}createPanel(n,c){null!=this.componentRef&&this.removePanel();const u=this.resolver.resolveComponentFactory(b);this.componentRef=u.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);const h=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(c),Object.keys(k).forEach(a=>{this.overlay.style[a]=k[a]}),n?document.getElementById(n).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(h),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return g.\u0275fac=function(n){return new(n||g)(t.LFG(t._Vd),t.LFG(t.z2F),t.LFG(t.zs3))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac}),g})(),w=(()=>{class g{onClick(){this.openPanel()}constructor(n,c){this.triggerRef=n,this.panelFactory=c,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new t.vpe,this.input=new t.vpe,this.slider=new t.vpe,this.close=new t.vpe,this.open=new t.vpe,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}onChange(){this.onChangeCallback(this.color)}setDisabledState(n){this.isDisabled=n,this.triggerRef.nativeElement.style.opacity=n?.5:1}setColor(n){this.writeValue(n),this.input.emit(n)}sliderChange(n){this.slider.emit(n)}get value(){return this.color}set value(n){this.setColor(n),this.onChangeCallback(n)}writeValue(n){n!==this.color&&(this.color=n,this.onChange(),this.change.emit(n))}registerOnChange(n){this.onChangeCallback=n}registerOnTouched(n){this.onTouchedCallback=n}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(t.SBq),t.Y36(m))},g.\u0275dir=t.lG2({type:g,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(n,c){1&n&&t.NdJ("click",function(){return c.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},features:[t._Bn([{provide:F.JU,useExisting:(0,t.Gpc)(()=>g),multi:!0}])]}),g})(),T=(()=>{class g{constructor(n,c){this.cdRef=n,this.triggerDirective=c,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(n=>{this.color=n,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(t.sBO),t.Y36(w,1))},g.\u0275cmp=t.Xpm({type:g,selectors:[["ngx-colors"]],decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(n,c){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.qZA()()()),2&n&&(t.xp6(3),t.ekj("colornull",!c.color),t.Q6J("ngStyle",t.VKq(3,V,c.color)))},dependencies:[e.PC],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),g})(),W=(()=>{class g{}return g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({providers:[vt,m],imports:[e.ez]}),g})();var ht=P(2787),Ot=P(5052),Et=P(4203),Ft=P(7747);function Rt(g,v){1&g&&t._UZ(0,"div")}function At(g,v){if(1&g&&(t.ynx(0),t.YNc(1,Rt,1,0,"div",3),t.BQk()),2&g){const n=t.oxw(),c=t.MAs(4),u=t.MAs(2);t.xp6(1),t.Q6J("ngIf",n.element.multiple)("ngIfThen",c)("ngIfElse",u)}}function Bt(g,v){if(1&g&&t._UZ(0,"control-container",4),2&g){const n=t.oxw();t.Q6J("direction",n.direction)("form",n.groupForm)("controls",n.element.children)}}function Nt(g,v){if(1&g&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&g){const n=v.$implicit,c=t.oxw(2);t.Q6J("width",c.width),t.xp6(1),t.Oqu(n.name)}}function Lt(g,v){if(1&g&&(t.TgZ(0,"div"),t._UZ(1,"img",25),t.ALo(2,"async"),t.qZA()),2&g){const n=t.oxw().$implicit,c=t.oxw().$implicit,u=t.oxw(2);t.xp6(1),t.s9C("alt",n.key),t.Q6J("src",t.lcZ(2,2,u.getMedia(c[n.key])),t.LSH)}}function Ht(g,v){1&g&&(t.TgZ(0,"div")(1,"button",26),t._uU(2,"\u5b50\u96c6"),t.qZA()())}function Tt(g,v){if(1&g&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&g){const n=t.oxw().$implicit,c=t.oxw().$implicit;t.xp6(1),t.Oqu(c[n.key])}}function Jt(g,v){if(1&g&&(t.TgZ(0,"td"),t.ynx(1,22),t.YNc(2,Lt,3,4,"div",23),t.YNc(3,Ht,3,0,"div",23),t.YNc(4,Tt,2,1,"div",24),t.BQk(),t.qZA()),2&g){const n=v.$implicit;t.xp6(1),t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","image"),t.xp6(1),t.Q6J("ngSwitchCase","group")}}function Yt(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"tr",14)(1,"th",15),t._uU(2),t.qZA(),t.YNc(3,Jt,5,3,"td",16),t.TgZ(4,"td")(5,"div",17)(6,"a",18),t.NdJ("click",function(){const h=t.CHM(n).index,a=t.oxw(2);return t.KtG(a.open(h))}),t._UZ(7,"nb-icon",19),t.qZA(),t.TgZ(8,"a",20),t.NdJ("click",function(){const h=t.CHM(n).index,a=t.oxw(2);return t.KtG(a.delete(h))}),t._UZ(9,"nb-icon",21),t.qZA()()()()}if(2&g){const n=v.index,c=t.oxw(2);t.ekj("cursor-move",null==c.element.settings?null:c.element.settings.is_sort),t.Q6J("cdkDragDisabled",!(null!=c.element.settings&&c.element.settings.is_sort))("cdkDragData",n),t.xp6(2),t.Oqu(n+1),t.xp6(1),t.Q6J("ngForOf",c.head)}}function kt(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"table",5)(1,"thead")(2,"tr")(3,"th",6),t._uU(4,"#"),t.qZA(),t.YNc(5,Nt,2,2,"th",7),t.TgZ(6,"th",8),t._uU(7,"\u64cd\u4f5c"),t.qZA()()(),t.TgZ(8,"tbody",9),t.NdJ("cdkDropListDropped",function(u){t.CHM(n);const h=t.oxw();return t.KtG(h.drop(u))}),t.YNc(9,Yt,10,6,"tr",10),t.qZA(),t.TgZ(10,"tfoot")(11,"tr")(12,"td",11)(13,"button",12),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.open(u.arrayForm.length))}),t._uU(14,"\u6dfb\u52a0"),t.qZA()()()()()}if(2&g){const n=t.oxw();t.xp6(5),t.Q6J("ngForOf",n.head),t.xp6(1),t.Q6J("width",n.width),t.xp6(2),t.Q6J("cdkDropListDisabled",!(null!=n.element.settings&&n.element.settings.is_sort)),t.xp6(1),t.Q6J("ngForOf",n.values)}}const Mt=["containerComponent"];function Ut(g,v){if(1&g&&(t.TgZ(0,"nb-card-body"),t._UZ(1,"control-container",7,8),t.qZA()),2&g){const n=t.oxw();t.xp6(1),t.Q6J("form",n.group)("controls",n.controls)}}let It=(()=>{var g;class v{constructor(c,u){this.dialog=c,this.ckfinder=u,this.direction="column",this.elements=[],this.onChange=()=>{},this.onTouched=()=>{},this.values=[],this.head=[],this.width="100%"}ngOnInit(){if(this.element.children&&this.element.children.length>0){const c=[];this.element.children.forEach(u=>{c.push({name:u.label,key:u.id,type:u.type})}),this.head=c,this.width=100/(c.length+(this.element.multiple?1:0))+"%"}this.element.multiple&&(this.values=this.arrayForm.getRawValue())}get groupForm(){return this.form}get arrayForm(){return this.form}open(c){let u=!1;null==this.arrayForm.at(c)&&(this.arrayForm.push(new F.cw((0,ht.T)(this.element.children))),u=!0),this.dialogRef=this.dialog.open(Gt,{dialogClass:"container",closeOnEsc:!1,closeOnBackdropClick:!1,context:{controls:this.element.children,title:this.element.label,group:this.arrayForm.at(c)}}),this.dialogRef.onClose.subscribe(h=>{"cancel"===h?u&&this.arrayForm.removeAt(this.arrayForm.length-1):this.values=this.arrayForm.getRawValue()})}delete(c){this.arrayForm.removeAt(c),this.values=this.arrayForm.getRawValue()}drop(c){this.values.length>1&&((0,Ot.bA)(this.values,c.previousIndex,c.currentIndex),this.arrayForm.setValue(this.values))}getMedia(c){return this.ckfinder.getAttachmentUrl(c)}}return(g=v).\u0275fac=function(c){return new(c||g)(t.Y36(M.Gln),t.Y36(Et.Q))},g.\u0275cmp=t.Xpm({type:g,selectors:[["group-control"]],inputs:{direction:"direction",element:"element",form:"form"},decls:5,vars:1,consts:[[4,"ngIf"],["objectBlock",""],["arrayBlock",""],[4,"ngIf","ngIfThen","ngIfElse"],[3,"direction","form","controls"],[1,"table","overflow-auto","text-nowrap","m-0","scrollable"],["scope","col"],["scope","col",3,"width",4,"ngFor","ngForOf"],["scope","col",1,"text-end",3,"width"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListDropped"],["class","align-middle","cdkDrag","",3,"cursor-move","cdkDragDisabled","cdkDragData",4,"ngFor","ngForOf"],["colspan","16",1,"text-end"],["status","primary","type","button","size","small","nbButton","",3,"click"],["scope","col",3,"width"],["cdkDrag","",1,"align-middle",3,"cdkDragDisabled","cdkDragData"],["scope","row"],[4,"ngFor","ngForOf"],[1,"ng2-smart-actions","d-flex","justify-content-end","h-100"],["href","javascript:",1,"ng2-smart-action","ng2-smart-action-edit-edit",3,"click"],["icon","edit-outline"],["href","javascript:",1,"ng2-smart-action","ng2-smart-action-delete-delete",3,"click"],["icon","trash-2-outline"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["width","100",3,"alt","src"],["nbButton","","status","primary","type","button","size","small"]],template:function(c,u){1&c&&(t.YNc(0,At,2,3,"ng-container",0),t.YNc(1,Bt,1,3,"ng-template",null,1,t.W1O),t.YNc(3,kt,15,4,"ng-template",null,2,t.W1O)),2&c&&t.Q6J("ngIf",u.element.children)},dependencies:[e.sg,e.O5,e.RF,e.n9,e.ED,M.DPz,M.fMN,Ot.Wj,Ot.Zt,Ft._,e.Ov],styles:["\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .ng2-smart-action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;font-size:2rem!important;color:var(--text-basic-color)}[_nghost-%COMP%]   .ng2-smart-actions[_ngcontent-%COMP%]   a.ng2-smart-action[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid var(--smart-table-separator)}[_nghost-%COMP%]   .ng2-smart-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{margin-right:.25rem}[_nghost-%COMP%]   .cursor-move[_ngcontent-%COMP%]{cursor:move}  nb-dialog-container{width:100%}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{display:block;border:none;color:var(--text-hint-color)!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]{scrollbar-face-color:var(--sidebar-scrollbar-color);scrollbar-track-color:var(--sidebar-scrollbar-background-color)}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]::-webkit-scrollbar{width:var(--sidebar-scrollbar-width);height:var(--sidebar-scrollbar-width)}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--sidebar-scrollbar-color);cursor:pointer;border-radius:calc(var(--sidebar-scrollbar-width) * .5)}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--sidebar-scrollbar-background-color)}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-corner{background:var(--sidebar-scrollbar-background-color)}"]}),v})(),Gt=(()=>{var g;class v{constructor(c){this.dialogRef=c,this.controls=[],this.title=""}ngOnInit(){}cancel(){this.dialogRef.close("cancel")}save(){this.dialogRef.close("save")}}return(g=v).\u0275fac=function(c){return new(c||g)(t.Y36(M.X4l))},g.\u0275cmp=t.Xpm({type:g,selectors:[["group-control-dialog"]],viewQuery:function(c,u){if(1&c&&t.Gf(Mt,5),2&c){let h;t.iGM(h=t.CRH())&&(u.containerComponent=h.first)}},decls:11,vars:3,consts:[[1,"row","justify-content-center","scrollable"],[1,"col","col-md-6","col-xl-4"],[1,"scrollable"],[4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","","status","basic",3,"click"],["nbButton","","status","primary",3,"disabled","click"],[3,"form","controls"],["containerComponent",""]],template:function(c,u){1&c&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nb-card",2)(3,"nb-card-header"),t._uU(4),t.qZA(),t.YNc(5,Ut,3,2,"nb-card-body",3),t.TgZ(6,"nb-card-footer",4)(7,"button",5),t.NdJ("click",function(){return u.cancel()}),t._uU(8,"\u53d6\u6d88"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return u.save()}),t._uU(10,"\u4fdd\u5b58"),t.qZA()()()()()),2&c&&(t.xp6(4),t.Oqu(u.title),t.xp6(1),t.Q6J("ngIf",u.controls.length>0),t.xp6(4),t.Q6J("disabled",u.group.invalid))},dependencies:[e.O5,M.Asz,M.yKW,M.XWE,M.ndF,M.DPz,Ft._],styles:["nb-card[_ngcontent-%COMP%]{max-height:100vh}"]}),v})(),K=(()=>{var g;class v{}return(g=v).\u0275fac=function(c){return new(c||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[e.ez,N.O,H.d,M.COg,W,M.wB1,Ot._t]}),v})();t.B6R(A.F,[e.sg,e.O5,e.RF,e.n9,F.Fj,F.JJ,F.JL,F.sg,F.u,M.NTf,M.DPz,M.h8i,M.$kf,M.B4C,M.MGu,M.VW_,M.r3g,M.MFI,M.rs,M.q51,M.lyj,M.Xh,M.wNd,T,w,M.BLq,It],[e.Ov])},2787:(Zt,pt,P)=>{P.d(pt,{T:()=>M});var e=P(9223);const M=function(H,N){const A={};return H.forEach(t=>{let F=N&&N.hasOwnProperty(t.id)?N[t.id]:t.multiple?t.value||[]:t.value;const I=[];if(t.required&&I.push(e.kI.required),t.validators&&t.validators.length>0&&t.validators.forEach(q=>{switch(q.key){case"min":I.push(e.kI.min(+q.value));break;case"max":I.push(e.kI.max(+q.value));break;case"pattern":I.push(e.kI.pattern(q.value.toString()));break;case"email":I.push(e.kI.email)}}),"group"==t.type)if(t.multiple){let q=[];(t.value??[]).forEach(gt=>{q.push(new e.cw(M(t.children,gt)))}),A[t.id]=new e.Oe(q)}else A[t.id]=new e.cw(M(t.children,t.value||{}));else A[t.id]=new e.NI(F,I)}),A}},5052:(Zt,pt,P)=>{P.d(pt,{Wj:()=>y,Zt:()=>a,_t:()=>E,bA:()=>it});var e=P(3714),M=P(3223),H=P(2357),N=P(3916),A=P(8790),t=P(7943),F=P(5992),I=P(5350),q=P(7137),gt=P(3733),bt=P(1145),$=P(3506),ot=P(7701),X=P(5990),R=P(4359),G=P(1553),L=P(8527),Q=P(3318),Z=P(3192);function j(d,i,s){for(let o in i)if(i.hasOwnProperty(o)){const r=i[o];r?d.setProperty(o,r,s?.has(o)?"important":""):d.removeProperty(o)}return d}function U(d,i){const s=i?"":"none";j(d.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":s,"-ms-user-select":s,"-webkit-user-select":s,"-moz-user-select":s})}function at(d,i,s){j(d.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},s)}function V(d,i){return i&&"none"!=i?d+" "+i:d}function et(d){const i=d.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(d)*i}function xt(d,i){return d.getPropertyValue(i).split(",").map(o=>o.trim())}function wt(d){const i=d.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function tt(d,i,s){const{top:o,bottom:r,left:p,right:_}=d;return s>=o&&s<=r&&i>=p&&i<=_}function ct(d,i,s){d.top+=i,d.bottom=d.top+d.height,d.left+=s,d.right=d.left+d.width}function _t(d,i,s,o){const{top:r,right:p,bottom:_,left:C,width:D,height:O}=d,B=D*i,J=O*i;return o>r-J&&o<_+J&&s>C-B&&s<p+B}class rt{constructor(i){this._document=i,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(s=>{this.positions.set(s,{scrollPosition:{top:s.scrollTop,left:s.scrollLeft},clientRect:wt(s)})})}handleScroll(i){const s=(0,N.sA)(i),o=this.positions.get(s);if(!o)return null;const r=o.scrollPosition;let p,_;if(s===this._document){const O=this.getViewportScrollPosition();p=O.top,_=O.left}else p=s.scrollTop,_=s.scrollLeft;const C=r.top-p,D=r.left-_;return this.positions.forEach((O,B)=>{O.clientRect&&s!==B&&s.contains(B)&&ct(O.clientRect,C,D)}),r.top=p,r.left=_,{top:C,left:D}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function st(d){const i=d.cloneNode(!0),s=i.querySelectorAll("[id]"),o=d.nodeName.toLowerCase();i.removeAttribute("id");for(let r=0;r<s.length;r++)s[r].removeAttribute("id");return"canvas"===o?vt(d,i):("input"===o||"select"===o||"textarea"===o)&&Dt(d,i),lt("canvas",d,i,vt),lt("input, textarea, select",d,i,Dt),i}function lt(d,i,s,o){const r=i.querySelectorAll(d);if(r.length){const p=s.querySelectorAll(d);for(let _=0;_<r.length;_++)o(r[_],p[_])}}let mt=0;function Dt(d,i){"file"!==i.type&&(i.value=d.value),"radio"===i.type&&i.name&&(i.name=`mat-clone-${i.name}-${mt++}`)}function vt(d,i){const s=i.getContext("2d");if(s)try{s.drawImage(d,0,0)}catch{}}const yt=(0,N.i$)({passive:!0}),Ct=(0,N.i$)({passive:!1}),Pt=new Set(["position"]);class b{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(i){const s=(0,A.Ig)(i);s!==this._disabled&&(this._disabled=s,this._toggleNativeDragInteractions(),this._handles.forEach(o=>U(o,s)))}constructor(i,s,o,r,p,_){this._config=s,this._document=o,this._ngZone=r,this._viewportRuler=p,this._dragDropRegistry=_,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new F.x,this._pointerMoveSubscription=I.w0.EMPTY,this._pointerUpSubscription=I.w0.EMPTY,this._scrollSubscription=I.w0.EMPTY,this._resizeSubscription=I.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new F.x,this.started=new F.x,this.released=new F.x,this.ended=new F.x,this.entered=new F.x,this.exited=new F.x,this.dropped=new F.x,this.moved=this._moveEvents,this._pointerDown=C=>{if(this.beforeStarted.next(),this._handles.length){const D=this._getTargetHandle(C);D&&!this._disabledHandles.has(D)&&!this.disabled&&this._initializeDragSequence(D,C)}else this.disabled||this._initializeDragSequence(this._rootElement,C)},this._pointerMove=C=>{const D=this._getPointerPositionOnPage(C);if(!this._hasStartedDragging){if(Math.abs(D.x-this._pickupPositionOnPage.x)+Math.abs(D.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const ft=Date.now()>=this._dragStartTime+this._getDragStartDelay(C),Y=this._dropContainer;if(!ft)return void this._endDragSequence(C);(!Y||!Y.isDragging()&&!Y.isReceiving())&&(C.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(C)))}return}C.preventDefault();const O=this._getConstrainedPointerPosition(D);if(this._hasMoved=!0,this._lastKnownPointerPosition=D,this._updatePointerDirectionDelta(O),this._dropContainer)this._updateActiveDropContainer(O,D);else{const B=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,J=this._activeTransform;J.x=O.x-B.x+this._passiveTransform.x,J.y=O.y-B.y+this._passiveTransform.y,this._applyRootElementTransform(J.x,J.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:O,event:C,distance:this._getDragDistance(O),delta:this._pointerDirectionDelta})})},this._pointerUp=C=>{this._endDragSequence(C)},this._nativeDragStart=C=>{if(this._handles.length){const D=this._getTargetHandle(C);D&&!this._disabledHandles.has(D)&&!this.disabled&&C.preventDefault()}else this.disabled||C.preventDefault()},this.withRootElement(i).withParent(s.parentDragRef||null),this._parentPositions=new rt(o),_.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(o=>(0,A.fI)(o)),this._handles.forEach(o=>U(o,this.disabled)),this._toggleNativeDragInteractions();const s=new Set;return this._disabledHandles.forEach(o=>{this._handles.indexOf(o)>-1&&s.add(o)}),this._disabledHandles=s,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){const s=(0,A.fI)(i);return s!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{s.addEventListener("mousedown",this._pointerDown,Ct),s.addEventListener("touchstart",this._pointerDown,yt),s.addEventListener("dragstart",this._nativeDragStart,Ct)}),this._initialTransform=void 0,this._rootElement=s),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?(0,A.fI)(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),U(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),U(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){const i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){const i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const s=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(s),dropPoint:s,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){w(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const s=this._dropContainer;if(s){const o=this._rootElement,r=o.parentNode,p=this._placeholder=this._createPlaceholderElement(),_=this._anchor=this._anchor||this._document.createComment(""),C=this._getShadowRoot();r.insertBefore(_,o),this._initialTransform=o.style.transform||"",this._preview=this._createPreviewElement(),at(o,!1,Pt),this._document.body.appendChild(r.replaceChild(p,o)),this._getPreviewInsertionPoint(r,C).appendChild(this._preview),this.started.next({source:this,event:i}),s.start(),this._initialContainer=s,this._initialIndex=s.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(s?s.getScrollableParents():[])}_initializeDragSequence(i,s){this._parentDragRef&&s.stopPropagation();const o=this.isDragging(),r=w(s),p=!r&&0!==s.button,_=this._rootElement,C=(0,N.sA)(s),D=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),O=r?(0,t.yG)(s):(0,t.X6)(s);if(C&&C.draggable&&"mousedown"===s.type&&s.preventDefault(),o||p||D||O)return;if(this._handles.length){const nt=_.style;this._rootElementTapHighlight=nt.webkitTapHighlightColor||"",nt.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(nt=>this._updateOnScroll(nt)),this._boundaryElement&&(this._boundaryRect=wt(this._boundaryElement));const B=this._previewTemplate;this._pickupPositionInElement=B&&B.template&&!B.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,i,s);const J=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(s);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:J.x,y:J.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,s)}_cleanupDragArtifacts(i){at(this._rootElement,!0,Pt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const s=this._dropContainer,o=s.getItemIndex(this),r=this._getPointerPositionOnPage(i),p=this._getDragDistance(r),_=s._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:p,dropPoint:r,event:i}),this.dropped.next({item:this,currentIndex:o,previousIndex:this._initialIndex,container:s,previousContainer:this._initialContainer,isPointerOverContainer:_,distance:p,dropPoint:r,event:i}),s.drop(this,o,this._initialIndex,this._initialContainer,_,p,r,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:s},{x:o,y:r}){let p=this._initialContainer._getSiblingContainerFromPosition(this,i,s);!p&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,s)&&(p=this._initialContainer),p&&p!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=p,this._dropContainer.enter(this,i,s,p===this._initialContainer&&p.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:p,currentIndex:p.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(o,r),this._dropContainer._sortItem(this,i,s,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,s):this._applyPreviewTransform(i-this._pickupPositionInElement.x,s-this._pickupPositionInElement.y))}_createPreviewElement(){const i=this._previewTemplate,s=this.previewClass,o=i?i.template:null;let r;if(o&&i){const p=i.matchSize?this._initialClientRect:null,_=i.viewContainer.createEmbeddedView(o,i.context);_.detectChanges(),r=T(_,this._document),this._previewRef=_,i.matchSize?W(r,p):r.style.transform=k(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=st(this._rootElement),W(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return j(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Pt),U(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),s&&(Array.isArray(s)?s.forEach(p=>r.classList.add(p)):r.classList.add(s)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const i=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);const s=function ut(d){const i=getComputedStyle(d),s=xt(i,"transition-property"),o=s.find(C=>"transform"===C||"all"===C);if(!o)return 0;const r=s.indexOf(o),p=xt(i,"transition-duration"),_=xt(i,"transition-delay");return et(p[r])+et(_[r])}(this._preview);return 0===s?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(o=>{const r=_=>{(!_||(0,N.sA)(_)===this._preview&&"transform"===_.propertyName)&&(this._preview?.removeEventListener("transitionend",r),o(),clearTimeout(p))},p=setTimeout(r,1.5*s);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const i=this._placeholderTemplate,s=i?i.template:null;let o;return s?(this._placeholderRef=i.viewContainer.createEmbeddedView(s,i.context),this._placeholderRef.detectChanges(),o=T(this._placeholderRef,this._document)):o=st(this._rootElement),o.style.pointerEvents="none",o.classList.add("cdk-drag-placeholder"),o}_getPointerPositionInElement(i,s,o){const r=s===this._rootElement?null:s,p=r?r.getBoundingClientRect():i,_=w(o)?o.targetTouches[0]:o,C=this._getViewportScrollPosition();return{x:p.left-i.left+(_.pageX-p.left-C.left),y:p.top-i.top+(_.pageY-p.top-C.top)}}_getPointerPositionOnPage(i){const s=this._getViewportScrollPosition(),o=w(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,r=o.pageX-s.left,p=o.pageY-s.top;if(this._ownerSVGElement){const _=this._ownerSVGElement.getScreenCTM();if(_){const C=this._ownerSVGElement.createSVGPoint();return C.x=r,C.y=p,C.matrixTransform(_.inverse())}}return{x:r,y:p}}_getConstrainedPointerPosition(i){const s=this._dropContainer?this._dropContainer.lockAxis:null;let{x:o,y:r}=this.constrainPosition?this.constrainPosition(i,this,this._initialClientRect,this._pickupPositionInElement):i;if("x"===this.lockAxis||"x"===s?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===s)&&(o=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:p,y:_}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,C=this._boundaryRect,{width:D,height:O}=this._getPreviewRect(),B=C.top+_,J=C.bottom-(O-_);o=m(o,C.left+p,C.right-(D-p)),r=m(r,B,J)}return{x:o,y:r}}_updatePointerDirectionDelta(i){const{x:s,y:o}=i,r=this._pointerDirectionDelta,p=this._pointerPositionAtLastDirectionChange,_=Math.abs(s-p.x),C=Math.abs(o-p.y);return _>this._config.pointerDirectionChangeThreshold&&(r.x=s>p.x?1:-1,p.x=s),C>this._config.pointerDirectionChangeThreshold&&(r.y=o>p.y?1:-1,p.y=o),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,U(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,Ct),i.removeEventListener("touchstart",this._pointerDown,yt),i.removeEventListener("dragstart",this._nativeDragStart,Ct)}_applyRootElementTransform(i,s){const o=k(i,s),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=V(o,this._initialTransform)}_applyPreviewTransform(i,s){const o=this._previewTemplate?.template?void 0:this._initialTransform,r=k(i,s);this._preview.style.transform=V(r,o)}_getDragDistance(i){const s=this._pickupPositionOnPage;return s?{x:i.x-s.x,y:i.y-s.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:s}=this._passiveTransform;if(0===i&&0===s||this.isDragging()||!this._boundaryElement)return;const o=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===o.width&&0===o.height)return;const p=r.left-o.left,_=o.right-r.right,C=r.top-o.top,D=o.bottom-r.bottom;r.width>o.width?(p>0&&(i+=p),_>0&&(i-=_)):i=0,r.height>o.height?(C>0&&(s+=C),D>0&&(s-=D)):s=0,(i!==this._passiveTransform.x||s!==this._passiveTransform.y)&&this.setFreeDragPosition({y:s,x:i})}_getDragStartDelay(i){const s=this.dragStartDelay;return"number"==typeof s?s:w(i)?s.touch:s?s.mouse:0}_updateOnScroll(i){const s=this._parentPositions.handleScroll(i);if(s){const o=(0,N.sA)(i);this._boundaryRect&&o!==this._boundaryElement&&o.contains(this._boundaryElement)&&ct(this._boundaryRect,s.top,s.left),this._pickupPositionOnPage.x+=s.left,this._pickupPositionOnPage.y+=s.top,this._dropContainer||(this._activeTransform.x-=s.left,this._activeTransform.y-=s.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,N.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,s){const o=this._previewContainer||"global";if("parent"===o)return i;if("global"===o){const r=this._document;return s||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return(0,A.fI)(o)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(i){return this._handles.find(s=>i.target&&(i.target===s||s.contains(i.target)))}}function k(d,i){return`translate3d(${Math.round(d)}px, ${Math.round(i)}px, 0)`}function m(d,i,s){return Math.max(i,Math.min(s,d))}function w(d){return"t"===d.type[0]}function T(d,i){const s=d.rootNodes;if(1===s.length&&s[0].nodeType===i.ELEMENT_NODE)return s[0];const o=i.createElement("div");return s.forEach(r=>o.appendChild(r)),o}function W(d,i){d.style.width=`${i.width}px`,d.style.height=`${i.height}px`,d.style.transform=k(i.left,i.top)}function it(d,i,s){const o=Et(i,d.length-1),r=Et(s,d.length-1);if(o===r)return;const p=d[o],_=r<o?-1:1;for(let C=o;C!==r;C+=_)d[C]=d[C+_];d[r]=p}function Et(d,i){return Math.max(0,Math.min(i,d))}class Ft{constructor(i,s){this._element=i,this._dragDropRegistry=s,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(i){this.withItems(i)}sort(i,s,o,r){const p=this._itemPositions,_=this._getItemIndexFromPointerPosition(i,s,o,r);if(-1===_&&p.length>0)return null;const C="horizontal"===this.orientation,D=p.findIndex(z=>z.drag===i),O=p[_],J=O.clientRect,nt=D>_?1:-1,ft=this._getItemOffsetPx(p[D].clientRect,J,nt),Y=this._getSiblingOffsetPx(D,p,nt),dt=p.slice();return it(p,D,_),p.forEach((z,Qt)=>{if(dt[Qt]===z)return;const zt=z.drag===i,Wt=zt?ft:Y,Vt=zt?i.getPlaceholderElement():z.drag.getRootElement();z.offset+=Wt,C?(Vt.style.transform=V(`translate3d(${Math.round(z.offset)}px, 0, 0)`,z.initialTransform),ct(z.clientRect,0,Wt)):(Vt.style.transform=V(`translate3d(0, ${Math.round(z.offset)}px, 0)`,z.initialTransform),ct(z.clientRect,Wt,0))}),this._previousSwap.overlaps=tt(J,s,o),this._previousSwap.drag=O.drag,this._previousSwap.delta=C?r.x:r.y,{previousIndex:D,currentIndex:_}}enter(i,s,o,r){const p=null==r||r<0?this._getItemIndexFromPointerPosition(i,s,o):r,_=this._activeDraggables,C=_.indexOf(i),D=i.getPlaceholderElement();let O=_[p];if(O===i&&(O=_[p+1]),!O&&(null==p||-1===p||p<_.length-1)&&this._shouldEnterAsFirstChild(s,o)&&(O=_[0]),C>-1&&_.splice(C,1),O&&!this._dragDropRegistry.isDragging(O)){const B=O.getRootElement();B.parentElement.insertBefore(D,B),_.splice(p,0,i)}else(0,A.fI)(this._element).appendChild(D),_.push(i);D.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables.forEach(i=>{const s=i.getRootElement();if(s){const o=this._itemPositions.find(r=>r.drag===i)?.initialTransform;s.style.transform=o||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(o=>o.drag===i)}updateOnScroll(i,s){this._itemPositions.forEach(({clientRect:o})=>{ct(o,i,s)}),this._itemPositions.forEach(({drag:o})=>{this._dragDropRegistry.isDragging(o)&&o._sortFromLastPointerPosition()})}_cacheItemPositions(){const i="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(s=>{const o=s.getVisibleElement();return{drag:s,offset:0,initialTransform:o.style.transform||"",clientRect:wt(o)}}).sort((s,o)=>i?s.clientRect.left-o.clientRect.left:s.clientRect.top-o.clientRect.top)}_getItemOffsetPx(i,s,o){const r="horizontal"===this.orientation;let p=r?s.left-i.left:s.top-i.top;return-1===o&&(p+=r?s.width-i.width:s.height-i.height),p}_getSiblingOffsetPx(i,s,o){const r="horizontal"===this.orientation,p=s[i].clientRect,_=s[i+-1*o];let C=p[r?"width":"height"]*o;if(_){const D=r?"left":"top",O=r?"right":"bottom";-1===o?C-=_.clientRect[D]-p[O]:C+=p[D]-_.clientRect[O]}return C}_shouldEnterAsFirstChild(i,s){if(!this._activeDraggables.length)return!1;const o=this._itemPositions,r="horizontal"===this.orientation;if(o[0].drag!==this._activeDraggables[0]){const _=o[o.length-1].clientRect;return r?i>=_.right:s>=_.bottom}{const _=o[0].clientRect;return r?i<=_.left:s<=_.top}}_getItemIndexFromPointerPosition(i,s,o,r){const p="horizontal"===this.orientation,_=this._itemPositions.findIndex(({drag:C,clientRect:D})=>C!==i&&((!r||C!==this._previousSwap.drag||!this._previousSwap.overlaps||(p?r.x:r.y)!==this._previousSwap.delta)&&(p?s>=Math.floor(D.left)&&s<Math.floor(D.right):o>=Math.floor(D.top)&&o<Math.floor(D.bottom))));return-1!==_&&this._sortPredicate(_,i)?_:-1}}class Bt{constructor(i,s,o,r,p){this._dragDropRegistry=s,this._ngZone=r,this._viewportRuler=p,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new F.x,this.entered=new F.x,this.exited=new F.x,this.dropped=new F.x,this.sorted=new F.x,this.receivingStarted=new F.x,this.receivingStopped=new F.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=I.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new F.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,q.F)(0,gt.Z).pipe((0,ot.R)(this._stopScrollTimers)).subscribe(()=>{const _=this._scrollNode,C=this.autoScrollStep;1===this._verticalScrollDirection?_.scrollBy(0,-C):2===this._verticalScrollDirection&&_.scrollBy(0,C),1===this._horizontalScrollDirection?_.scrollBy(-C,0):2===this._horizontalScrollDirection&&_.scrollBy(C,0)})},this.element=(0,A.fI)(i),this._document=o,this.withScrollableParents([this.element]),s.registerDropContainer(this),this._parentPositions=new rt(o),this._sortStrategy=new Ft(this.element,s),this._sortStrategy.withSortPredicate((_,C)=>this.sortPredicate(_,C,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,s,o,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(i)),this._sortStrategy.enter(i,s,o,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,s,o,r,p,_,C,D={}){this._reset(),this.dropped.next({item:i,currentIndex:s,previousIndex:o,container:this,previousContainer:r,isPointerOverContainer:p,distance:_,dropPoint:C,event:D})}withItems(i){const s=this._draggables;return this._draggables=i,i.forEach(o=>o._withDropContainer(this)),this.isDragging()&&(s.filter(r=>r.isDragging()).every(r=>-1===i.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._sortStrategy.direction=i,this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){return this._sortStrategy.orientation=i,this}withScrollableParents(i){const s=(0,A.fI)(this.element);return this._scrollableElements=-1===i.indexOf(s)?[s,...i]:i.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,s,o,r){if(this.sortingDisabled||!this._clientRect||!_t(this._clientRect,.05,s,o))return;const p=this._sortStrategy.sort(i,s,o,r);p&&this.sorted.next({previousIndex:p.previousIndex,currentIndex:p.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,s){if(this.autoScrollDisabled)return;let o,r=0,p=0;if(this._parentPositions.positions.forEach((_,C)=>{C===this._document||!_.clientRect||o||_t(_.clientRect,.05,i,s)&&([r,p]=function Ht(d,i,s,o){const r=Nt(i,o),p=Lt(i,s);let _=0,C=0;if(r){const D=d.scrollTop;1===r?D>0&&(_=1):d.scrollHeight-D>d.clientHeight&&(_=2)}if(p){const D=d.scrollLeft;1===p?D>0&&(C=1):d.scrollWidth-D>d.clientWidth&&(C=2)}return[_,C]}(C,_.clientRect,i,s),(r||p)&&(o=C))}),!r&&!p){const{width:_,height:C}=this._viewportRuler.getViewportSize(),D={width:_,height:C,top:0,right:_,bottom:C,left:0};r=Nt(D,s),p=Lt(D,i),o=window}o&&(r!==this._verticalScrollDirection||p!==this._horizontalScrollDirection||o!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=p,this._scrollNode=o,(r||p)&&o?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const i=(0,A.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const i=(0,A.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(i).clientRect}_reset(){this._isDragging=!1;const i=(0,A.fI)(this.element).style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(s=>s._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(i,s){return null!=this._clientRect&&tt(this._clientRect,i,s)}_getSiblingContainerFromPosition(i,s,o){return this._siblings.find(r=>r._canReceive(i,s,o))}_canReceive(i,s,o){if(!this._clientRect||!tt(this._clientRect,s,o)||!this.enterPredicate(i,this))return!1;const r=this._getShadowRoot().elementFromPoint(s,o);if(!r)return!1;const p=(0,A.fI)(this.element);return r===p||p.contains(r)}_startReceiving(i,s){const o=this._activeSiblings;!o.has(i)&&s.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(o.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:s}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){const s=this._parentPositions.handleScroll(i);s&&this._sortStrategy.updateOnScroll(s.top,s.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const i=(0,N.kV)((0,A.fI)(this.element));this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const i=this._sortStrategy.getActiveItemsSnapshot().filter(s=>s.isDragging());this._siblings.forEach(s=>s._startReceiving(this,i))}}function Nt(d,i){const{top:s,bottom:o,height:r}=d,p=.05*r;return i>=s-p&&i<=s+p?1:i>=o-p&&i<=o+p?2:0}function Lt(d,i){const{left:s,right:o,width:r}=d,p=.05*r;return i>=s-p&&i<=s+p?1:i>=o-p&&i<=o+p?2:0}const Tt=(0,N.i$)({passive:!1,capture:!0});let Jt=(()=>{var d;class i{constructor(o,r){this._ngZone=o,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=p=>p.isDragging(),this.pointerMove=new F.x,this.pointerUp=new F.x,this.scroll=new F.x,this._preventDefaultWhileDragging=p=>{this._activeDragInstances.length>0&&p.preventDefault()},this._persistentTouchmoveListener=p=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&p.preventDefault(),this.pointerMove.next(p))},this._document=r}registerDropContainer(o){this._dropInstances.has(o)||this._dropInstances.add(o)}registerDragItem(o){this._dragInstances.add(o),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Tt)})}removeDropContainer(o){this._dropInstances.delete(o)}removeDragItem(o){this._dragInstances.delete(o),this.stopDragging(o),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Tt)}startDragging(o,r){if(!(this._activeDragInstances.indexOf(o)>-1)&&(this._activeDragInstances.push(o),1===this._activeDragInstances.length)){const p=r.type.startsWith("touch");this._globalListeners.set(p?"touchend":"mouseup",{handler:_=>this.pointerUp.next(_),options:!0}).set("scroll",{handler:_=>this.scroll.next(_),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Tt}),p||this._globalListeners.set("mousemove",{handler:_=>this.pointerMove.next(_),options:Tt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((_,C)=>{this._document.addEventListener(C,_.handler,_.options)})})}}stopDragging(o){const r=this._activeDragInstances.indexOf(o);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(o){return this._activeDragInstances.indexOf(o)>-1}scrolled(o){const r=[this.scroll];return o&&o!==this._document&&r.push(new bt.y(p=>this._ngZone.runOutsideAngular(()=>{const C=D=>{this._activeDragInstances.length&&p.next(D)};return o.addEventListener("scroll",C,!0),()=>{o.removeEventListener("scroll",C,!0)}}))),(0,$.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(o=>this.removeDragItem(o)),this._dropInstances.forEach(o=>this.removeDropContainer(o)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((o,r)=>{this._document.removeEventListener(r,o.handler,o.options)}),this._globalListeners.clear()}}return(d=i).\u0275fac=function(o){return new(o||d)(e.LFG(e.R0b),e.LFG(M.K0))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),i})();const Yt={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let kt=(()=>{var d;class i{constructor(o,r,p,_){this._document=o,this._ngZone=r,this._viewportRuler=p,this._dragDropRegistry=_}createDrag(o,r=Yt){return new b(o,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(o){return new Bt(o,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return(d=i).\u0275fac=function(o){return new(o||d)(e.LFG(M.K0),e.LFG(e.R0b),e.LFG(H.rL),e.LFG(Jt))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),i})();const Mt=new e.OlP("CDK_DRAG_PARENT"),It=new e.OlP("CdkDragHandle"),K=new e.OlP("CdkDragPlaceholder"),v=new e.OlP("CdkDragPreview"),c=new e.OlP("CDK_DRAG_CONFIG"),h=new e.OlP("CdkDropList");let a=(()=>{var d;class i{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(o){this._disabled=(0,A.Ig)(o),this._dragRef.disabled=this._disabled}constructor(o,r,p,_,C,D,O,B,J,nt,ft){this.element=o,this.dropContainer=r,this._ngZone=_,this._viewContainerRef=C,this._dir=O,this._changeDetectorRef=J,this._selfHandle=nt,this._parentDrag=ft,this._destroyed=new F.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new bt.y(Y=>{const dt=this._dragRef.moved.pipe((0,X.U)(z=>({source:this,pointerPosition:z.pointerPosition,event:z.event,delta:z.delta,distance:z.distance}))).subscribe(Y);return()=>{dt.unsubscribe()}}),this._dragRef=B.createDrag(o,{dragStartThreshold:D&&null!=D.dragStartThreshold?D.dragStartThreshold:5,pointerDirectionChangeThreshold:D&&null!=D.pointerDirectionChangeThreshold?D.pointerDirectionChangeThreshold:5,zIndex:D?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),D&&this._assignDefaults(D),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(o){this._dragRef.setFreeDragPosition(o)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,R.q)(1),(0,ot.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(o){const r=o.rootElementSelector,p=o.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),p&&!p.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const o=i._dragInstances.indexOf(this);o>-1&&i._dragInstances.splice(o,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const o=this.element.nativeElement;let r=o;this.rootElementSelector&&(r=void 0!==o.closest?o.closest(this.rootElementSelector):o.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||o)}_getBoundaryElement(){const o=this.boundaryElement;return o?"string"==typeof o?this.element.nativeElement.closest(o):(0,A.fI)(o):null}_syncInputs(o){o.beforeStarted.subscribe(()=>{if(!o.isDragging()){const r=this._dir,p=this.dragStartDelay,_=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,C=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;o.disabled=this.disabled,o.lockAxis=this.lockAxis,o.dragStartDelay="object"==typeof p&&p?p:(0,A.su)(p),o.constrainPosition=this.constrainPosition,o.previewClass=this.previewClass,o.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(_).withPreviewTemplate(C).withPreviewContainer(this.previewContainer||"global"),r&&o.withDirection(r.value)}}),o.beforeStarted.pipe((0,R.q)(1)).subscribe(()=>{if(this._parentDrag)return void o.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){o.withParent(i._dragInstances.find(p=>p.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(o){o.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),o.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),o.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),o.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),o.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),o.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(o){const{lockAxis:r,dragStartDelay:p,constrainPosition:_,previewClass:C,boundaryElement:D,draggingDisabled:O,rootElementSelector:B,previewContainer:J}=o;this.disabled=O??!1,this.dragStartDelay=p||0,r&&(this.lockAxis=r),_&&(this.constrainPosition=_),C&&(this.previewClass=C),D&&(this.boundaryElement=D),B&&(this.rootElementSelector=B),J&&(this.previewContainer=J)}_setupHandlesListener(){this._handles.changes.pipe((0,G.O)(this._handles),(0,L.b)(o=>{const r=o.filter(p=>p._parentDrag===this).map(p=>p.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),(0,Q.w)(o=>(0,$.T)(...o.map(r=>r._stateChanges.pipe((0,G.O)(r))))),(0,ot.R)(this._destroyed)).subscribe(o=>{const r=this._dragRef,p=o.element.nativeElement;o.disabled?r.disableHandle(p):r.enableHandle(p)})}}return(d=i)._dragInstances=[],d.\u0275fac=function(o){return new(o||d)(e.Y36(e.SBq),e.Y36(h,12),e.Y36(M.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(c,8),e.Y36(Z.Is,8),e.Y36(kt),e.Y36(e.sBO),e.Y36(It,10),e.Y36(Mt,12))},d.\u0275dir=e.lG2({type:d,selectors:[["","cdkDrag",""]],contentQueries:function(o,r,p){if(1&o&&(e.Suo(p,v,5),e.Suo(p,K,5),e.Suo(p,It,5)),2&o){let _;e.iGM(_=e.CRH())&&(r._previewTemplate=_.first),e.iGM(_=e.CRH())&&(r._placeholderTemplate=_.first),e.iGM(_=e.CRH())&&(r._handles=_)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(o,r){2&o&&e.ekj("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[e._Bn([{provide:Mt,useExisting:d}]),e.TTD]}),i})();const l=new e.OlP("CdkDropListGroup");let x=0,y=(()=>{var d;class i{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(o){this._dropListRef.disabled=this._disabled=(0,A.Ig)(o)}constructor(o,r,p,_,C,D,O){this.element=o,this._changeDetectorRef=p,this._scrollDispatcher=_,this._dir=C,this._group=D,this._destroyed=new F.x,this.connectedTo=[],this.id="cdk-drop-list-"+x++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=r.createDropList(o),this._dropListRef.data=this,O&&this._assignDefaults(O),this._dropListRef.enterPredicate=(B,J)=>this.enterPredicate(B.data,J.data),this._dropListRef.sortPredicate=(B,J,nt)=>this.sortPredicate(B,J.data,nt.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),i._dropLists.push(this),D&&D._items.add(this)}addItem(o){this._unsortedItems.add(o),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(o){this._unsortedItems.delete(o),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((o,r)=>o._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const o=i._dropLists.indexOf(this);o>-1&&i._dropLists.splice(o,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(o){this._dir&&this._dir.change.pipe((0,G.O)(this._dir.value),(0,ot.R)(this._destroyed)).subscribe(r=>o.withDirection(r)),o.beforeStarted.subscribe(()=>{const r=(0,A.Eq)(this.connectedTo).map(p=>"string"==typeof p?i._dropLists.find(C=>C.id===p):p);if(this._group&&this._group._items.forEach(p=>{-1===r.indexOf(p)&&r.push(p)}),!this._scrollableParentsResolved){const p=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(_=>_.getElementRef().nativeElement);this._dropListRef.withScrollableParents(p),this._scrollableParentsResolved=!0}o.disabled=this.disabled,o.lockAxis=this.lockAxis,o.sortingDisabled=(0,A.Ig)(this.sortingDisabled),o.autoScrollDisabled=(0,A.Ig)(this.autoScrollDisabled),o.autoScrollStep=(0,A.su)(this.autoScrollStep,2),o.connectedTo(r.filter(p=>p&&p!==this).map(p=>p._dropListRef)).withOrientation(this.orientation)})}_handleEvents(o){o.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),o.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),o.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),o.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),o.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),(0,$.T)(o.receivingStarted,o.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(o){const{lockAxis:r,draggingDisabled:p,sortingDisabled:_,listAutoScrollDisabled:C,listOrientation:D}=o;this.disabled=p??!1,this.sortingDisabled=_??!1,this.autoScrollDisabled=C??!1,this.orientation=D||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(o=>o._dragRef))}}return(d=i)._dropLists=[],d.\u0275fac=function(o){return new(o||d)(e.Y36(e.SBq),e.Y36(kt),e.Y36(e.sBO),e.Y36(H.mF),e.Y36(Z.Is,8),e.Y36(l,12),e.Y36(c,8))},d.\u0275dir=e.lG2({type:d,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(o,r){2&o&&(e.uIk("id",r.id),e.ekj("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[e._Bn([{provide:l,useValue:void 0},{provide:h,useExisting:d}])]}),i})(),E=(()=>{var d;class i{}return(d=i).\u0275fac=function(o){return new(o||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({providers:[kt],imports:[H.ZD]}),i})()},5216:(Zt,pt,P)=>{function e(h,a,l,f,x,y,S){try{var E=h[y](S),d=E.value}catch(i){return void l(i)}E.done?a(d):Promise.resolve(d).then(f,x)}function M(h){return function(){var a=this,l=arguments;return new Promise(function(f,x){var y=h.apply(a,l);function S(d){e(y,f,x,S,E,"next",d)}function E(d){e(y,f,x,S,E,"throw",d)}S(void 0)})}}P.d(pt,{u:()=>n,d:()=>u});var H=P(3714);function I(h,a=new Set){const l=[h],f=new Set;let x=0;for(;l.length>x;){const y=l[x++];if(!f.has(y)&&q(y)&&!a.has(y))if(f.add(y),Symbol.iterator in y)try{for(const S of y)l.push(S)}catch{}else for(const S in y)"defaultValue"!==S&&l.push(y[S])}return f}function q(h){const a=Object.prototype.toString.call(h),l=typeof h;return!("number"===l||"boolean"===l||"string"===l||"symbol"===l||"function"===l||"[object Date]"===a||"[object RegExp]"===a||"[object Module]"===a||null==h||h._watchdogExcluded||h instanceof EventTarget||h instanceof Event)}Symbol("MainQueueId");class ot{constructor(a){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof a.crashNumberLimit?a.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof a.minimumNonErrorTimePeriod?a.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=l=>{const f="error"in l?l.error:l.reason;f instanceof Error&&this._handleError(f,l)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(a,l){this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push(l)}off(a,l){this._listeners[a]=this._listeners[a].filter(f=>f!==l)}_fire(a,...l){const f=this._listeners[a]||[];for(const x of f)x.apply(this,[null,...l])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(a,l){if(this._shouldReactToError(a)){this.crashes.push({message:a.message,stack:a.stack,filename:l instanceof ErrorEvent?l.filename:void 0,lineno:l instanceof ErrorEvent?l.lineno:void 0,colno:l instanceof ErrorEvent?l.colno:void 0,date:this._now()});const f=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:a,causesRestart:f}),f?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(a){return a.is&&a.is("CKEditorError")&&null!=a.context&&"ready"===this.state&&this._isErrorComingFromThisItem(a)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}var X=P(1453),R=P(202);const L=function(){return R.Z.Date.now()};var Q=/\s/;var U=/^\s+/;const V=function at(h){return h&&h.slice(0,function Z(h){for(var a=h.length;a--&&Q.test(h.charAt(a)););return a}(h)+1).replace(U,"")};var et=P(7495),ut=P(8129);var _t=/^[-+]0x[0-9a-f]+$/i,rt=/^0b[01]+$/i,st=/^0o[0-7]+$/i,lt=parseInt;const Dt=function mt(h){if("number"==typeof h)return h;if(function wt(h){return"symbol"==typeof h||(0,ut.Z)(h)&&"[object Symbol]"==(0,et.Z)(h)}(h))return NaN;if((0,X.Z)(h)){var a="function"==typeof h.valueOf?h.valueOf():h;h=(0,X.Z)(a)?a+"":a}if("string"!=typeof h)return 0===h?h:+h;h=V(h);var l=rt.test(h);return l||st.test(h)?lt(h.slice(2),l?2:8):_t.test(h)?NaN:+h};var yt=Math.max,Ct=Math.min;const m=function k(h,a,l){var f=!0,x=!0;if("function"!=typeof h)throw new TypeError("Expected a function");return(0,X.Z)(l)&&(f="leading"in l?!!l.leading:f,x="trailing"in l?!!l.trailing:x),function St(h,a,l){var f,x,y,S,E,d,i=0,s=!1,o=!1,r=!0;if("function"!=typeof h)throw new TypeError("Expected a function");function p(Y){var dt=f,z=x;return f=x=void 0,i=Y,S=h.apply(z,dt)}function D(Y){var dt=Y-d;return void 0===d||dt>=a||dt<0||o&&Y-i>=y}function O(){var Y=L();if(D(Y))return B(Y);E=setTimeout(O,function C(Y){var Qt=a-(Y-d);return o?Ct(Qt,y-(Y-i)):Qt}(Y))}function B(Y){return E=void 0,r&&f?p(Y):(f=x=void 0,S)}function ft(){var Y=L(),dt=D(Y);if(f=arguments,x=this,d=Y,dt){if(void 0===E)return function _(Y){return i=Y,E=setTimeout(O,a),s?p(Y):S}(d);if(o)return clearTimeout(E),E=setTimeout(O,a),p(d)}return void 0===E&&(E=setTimeout(O,a)),S}return a=Dt(a)||0,(0,X.Z)(l)&&(s=!!l.leading,y=(o="maxWait"in l)?yt(Dt(l.maxWait)||0,a):y,r="trailing"in l?!!l.trailing:r),ft.cancel=function J(){void 0!==E&&clearTimeout(E),i=0,f=d=x=E=void 0},ft.flush=function nt(){return void 0===E?S:B(L())},ft}(h,a,{leading:f,maxWait:a,trailing:x})};var w=P(3057),ht=Function.prototype.toString,Ot=Object.prototype.hasOwnProperty,Et=ht.call(Object);const Bt=function At(h){return(0,ut.Z)(h)&&1===h.nodeType&&!function Ft(h){if(!(0,ut.Z)(h)||"[object Object]"!=(0,et.Z)(h))return!1;var a=(0,w.Z)(h);if(null===a)return!0;var l=Ot.call(a,"constructor")&&a.constructor;return"function"==typeof l&&l instanceof l&&ht.call(l)==Et}(h)};var Nt=P(2311);class Yt extends ot{constructor(a,l={}){super(l),this._editor=null,this._initUsingData=!0,this._editables={},this._throttledSave=m(this._save.bind(this),"number"==typeof l.saveInterval?l.saveInterval:5e3),a&&(this._creator=(f,x)=>a.create(f,x)),this._destructor=f=>f.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(a){this._creator=a}setDestructor(a){this._destructor=a}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(a=>{console.error("An error happened during the editor destroying.",a)}).then(()=>{const a={},l=[],f=this._config.rootsAttributes||{},x={};for(const[S,E]of Object.entries(this._data.roots))E.isLoaded?(a[S]="",x[S]=f[S]||{}):l.push(S);const y={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:l,rootsAttributes:x,_watchdogInitialData:this._data};return delete y.initialData,y.extraPlugins.push(kt),this._initUsingData?this.create(a,y,y.context):Bt(this._elementOrData)?this.create(this._elementOrData,y,y.context):this.create(this._editables,y,y.context)}).then(()=>{this._fire("restart")})}create(a=this._elementOrData,l=this._config,f){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=a,this._initUsingData="string"==typeof a||Object.keys(a).length>0&&"string"==typeof Object.values(a)[0],this._config=this._cloneEditorConfiguration(l)||{},this._config.context=f,this._creator(a,this._config))).then(x=>{this._editor=x,x.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=x.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const a=this._editor;return this._editor=null,a.model.document.off("change:data",this._throttledSave),this._destructor(a)})}_save(){const a=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=a}catch(l){console.error(l,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(a){this._excludedProps=a}_getData(){const a=this._editor,l=a.model.document.roots.filter(E=>E.isAttached()&&"$graveyard"!=E.rootName),{plugins:f}=a,x=f.has("CommentsRepository")&&f.get("CommentsRepository"),y=f.has("TrackChanges")&&f.get("TrackChanges"),S={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};l.forEach(E=>{S.roots[E.rootName]={content:JSON.stringify(Array.from(E.getChildren())),attributes:JSON.stringify(Array.from(E.getAttributes())),isLoaded:E._isLoaded}});for(const E of a.model.markers)E._affectsData&&(S.markers[E.name]={rangeJSON:E.getRange().toJSON(),usingOperation:E._managedUsingOperations,affectsData:E._affectsData});return x&&(S.commentThreads=JSON.stringify(x.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),y&&(S.suggestions=JSON.stringify(y.getSuggestions({toJSON:!0,skipNotAttached:!0}))),S}_getEditables(){const a={};for(const l of this.editor.model.document.getRootNames()){const f=this.editor.ui.getEditableElement(l);f&&(a[l]=f)}return a}_isErrorComingFromThisItem(a){return function gt(h,a,l=new Set){if(h===a&&function $(h){return"object"==typeof h&&null!==h}(h))return!0;const f=I(h,l),x=I(a,l);for(const y of f)if(x.has(y))return!0;return!1}(this._editor,a.context,this._excludedProps)}_cloneEditorConfiguration(a){return function Tt(h,a){return(0,Nt.Z)(h,5,a="function"==typeof a?a:void 0)}(a,(l,f)=>{if(Bt(l)||"context"===f)return l})}}class kt{constructor(a){this.editor=a,this._data=a.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",a=>{a.stop(),this.editor.model.enqueueChange({isUndoable:!1},l=>{this._restoreCollaborationData(),this._restoreEditorData(l)}),this.editor.data.fire("ready")},{priority:999})}_createNode(a,l){if("name"in l){const f=a.createElement(l.name,l.attributes);if(l.children)for(const x of l.children)f._appendChild(this._createNode(a,x));return f}return a.createText(l.data,l.attributes)}_restoreEditorData(a){const l=this.editor;Object.entries(this._data.roots).forEach(([f,{content:x,attributes:y}])=>{const S=JSON.parse(x),E=JSON.parse(y),d=l.model.document.getRoot(f);for(const[i,s]of E)a.setAttribute(i,s,d);for(const i of S){const s=this._createNode(a,i);a.insert(s,d,"end")}}),Object.entries(this._data.markers).forEach(([f,x])=>{const{document:y}=l.model,{rangeJSON:{start:S,end:E},...d}=x,i=y.getRoot(S.root),s=a.createPositionFromPath(i,S.path,S.stickiness),o=a.createPositionFromPath(i,E.path,E.stickiness),r=a.createRange(s,o);a.addMarker(f,{range:r,...d})})}_restoreCollaborationData(){const a=JSON.parse(this._data.commentThreads),l=JSON.parse(this._data.suggestions);a.forEach(f=>{const x=this.editor.config.get("collaboration.channelId"),y=this.editor.plugins.get("CommentsRepository");y.hasCommentThread(f.threadId)&&y.getCommentThread(f.threadId).remove(),y.addCommentThread({channelId:x,...f})}),l.forEach(f=>{const x=this.editor.plugins.get("TrackChangesEditing");x.hasSuggestion(f.id)?x.getSuggestion(f.id).attributes=f.attributes:x.addSuggestionData(f)})}}var Mt=P(2972),Ut=P(9223),It=P(3223);function Gt(h,a){}const K=new Array(256).fill(0).map((h,a)=>("0"+a.toString(16)).slice(-2)),v="Lock from Angular integration (@ckeditor/ckeditor5-angular)";let n=(()=>{class h{constructor(l,f){this.config={},this.data="",this.tagName="div",this.disableTwoWayDataBinding=!1,this.ready=new H.vpe,this.change=new H.vpe,this.blur=new H.vpe,this.focus=new H.vpe,this.error=new H.vpe,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function g(){const h=4294967296*Math.random()>>>0,a=4294967296*Math.random()>>>0,l=4294967296*Math.random()>>>0,f=4294967296*Math.random()>>>0;return"e"+K[h>>0&255]+K[h>>8&255]+K[h>>16&255]+K[h>>24&255]+K[a>>0&255]+K[a>>8&255]+K[a>>16&255]+K[a>>24&255]+K[l>>0&255]+K[l>>8&255]+K[l>>16&255]+K[l>>24&255]+K[f>>0&255]+K[f>>8&255]+K[f>>16&255]+K[f>>24&255]}(),this.ngZone=f,this.elementRef=l;const{CKEDITOR_VERSION:x}=window;if(x){const[y]=x.split(".").map(Number);y<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}set disabled(l){this.setDisabledState(l)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let l=this.editorWatchdog;return this.watchdog&&(l=this.watchdog._watchdogs.get(this.id)),l?l.editor:null}getId(){return this.id}ngOnChanges(l){Object.prototype.hasOwnProperty.call(l,"data")&&l.data&&!l.data.isFirstChange()&&this.writeValue(l.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){var l=this;return M(function*(){l.watchdog?yield l.watchdog.remove(l.id):l.editorWatchdog&&l.editorWatchdog.editor&&(yield l.editorWatchdog.destroy(),l.editorWatchdog=void 0)})()}writeValue(l){null===l&&(l=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(l),this.isEditorSettingData=!1):(this.data=l,this.ready.pipe((0,Mt.P)()).subscribe(f=>{f.data.set(this.data)}))}registerOnChange(l){this.cvaOnChange=l}registerOnTouched(l){this.cvaOnTouched=l}setDisabledState(l){this.editorInstance&&(l?this.editorInstance.enableReadOnlyMode(v):this.editorInstance.disableReadOnlyMode(v)),this.initiallyDisabled=l}attachToWatchdog(){var l=this;const f=(d,i)=>this.ngZone.runOutsideAngular(M(function*(){l.elementRef.nativeElement.appendChild(d);const s=yield l.editor.create(d,i);return l.initiallyDisabled&&s.enableReadOnlyMode(v),l.ngZone.run(()=>{l.ready.emit(s)}),l.setUpEditorEvents(s),s})),x=function(){var d=M(function*(i){yield i.destroy(),l.elementRef.nativeElement.removeChild(l.editorElement)});return function(s){return d.apply(this,arguments)}}(),y=d=>{(function c(h){return h.observed||h.observers.length>0})(this.error)&&this.ngZone.run(()=>this.error.emit(d))},S=document.createElement(this.tagName),E=this.getConfig();if(this.editorElement=S,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:f,destructor:x,sourceElementOrData:S,config:E}).catch(d=>{y(d)}),this.watchdog.on("itemError",(d,{itemId:i})=>{i===this.id&&y()});else{const d=new Yt(this.editor,this.editorWatchdogConfig);d.setCreator(f),d.setDestructor(x),d.on("error",y),this.editorWatchdog=d,this.ngZone.runOutsideAngular(()=>{d.create(S,E).catch(i=>{y(i)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const l={...this.config},f=this.config.initialData||this.data;return f&&(l.initialData=f),l}setUpEditorEvents(l){const x=l.editing.view.document;l.model.document.on("change:data",y=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){const S=l.data.get();this.cvaOnChange(S)}this.change.emit({event:y,editor:l})}})}),x.on("focus",y=>{this.ngZone.run(()=>{this.focus.emit({event:y,editor:l})})}),x.on("blur",y=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:y,editor:l})})})}}return h.\u0275fac=function(l){return new(l||h)(H.Y36(H.SBq),H.Y36(H.R0b))},h.\u0275cmp=H.Xpm({type:h,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[H._Bn([{provide:Ut.JU,useExisting:(0,H.Gpc)(()=>h),multi:!0}]),H.TTD],decls:1,vars:0,template:function(l,f){1&l&&H.YNc(0,Gt,0,0,"ng-template")},encapsulation:2}),h})(),u=(()=>{class h{}return h.\u0275fac=function(l){return new(l||h)},h.\u0275mod=H.oAB({type:h}),h.\u0275inj=H.cJS({imports:[[Ut.u5,It.ez]]}),h})()}}]);