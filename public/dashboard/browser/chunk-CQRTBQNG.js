import{a as nt,b as it,c as ot,d as rt,e as at,f as lt,g as mt,h as st,i as pt,j as ut,k as dt,l as ct,m as _t,n as ht,o as ft}from"./chunk-VRDVNYSB.js";import{a as ne,b as tt,c as ve}from"./chunk-WBGQSBW6.js";import"./chunk-5ZHBY33V.js";import{h as gt}from"./chunk-EAKQQOR6.js";import{a as P}from"./chunk-VHVIKD6E.js";import{B as ye,r as Ye,t as Ze,y as $e}from"./chunk-QJO7QQNE.js";import{$a as f,$e as et,Aa as Oe,Ae as ee,Bb as Ge,Be as Ce,Cb as Le,Db as pe,Ea as o,Fa as r,Ga as h,Ha as M,Ia as T,Ie as qe,Ja as D,Je as Ue,Ka as E,La as w,Le as Qe,Ma as g,Me as Je,N as re,Nb as z,Pd as Ke,Qe as be,R as Ne,Re as we,S as c,T as _,Ta as Ie,Tb as B,Ua as Ae,Va as De,Wa as S,Xa as s,Xe as te,Y as xe,Ya as V,Ye as Xe,Za as Q,ab as C,ae as he,bb as b,bc as Re,dc as G,ec as ue,fc as L,gb as le,gc as N,hb as We,hc as A,ia as m,ib as ze,ic as q,j as Te,jc as y,kb as W,kc as Y,ke as R,l as Ve,lc as O,mc as de,na as k,nd as Z,ne as fe,oc as ce,p as Ee,pa as x,pc as Pe,pd as ge,q as Be,qa as ae,qc as _e,qd as F,rc as je,rd as U,sc as He,sd as $,ua as v,vb as H,vd as I,wb as K,xb as me,xc as J,ya as p,yb as se}from"./chunk-J7X6RXHA.js";var ke=(n,d)=>({i:n,j:d});function Vt(n,d){if(n&1&&(o(0,"nb-option",24),s(1),r()),n&2){let e=d.$implicit;p("value",e.t),m(),V(e.n)}}function Bt(n,d){if(n&1&&D(0,25),n&2){g(2);let e=S(7);p("ngTemplateOutlet",e)}}function Nt(n,d){if(n&1&&D(0,25),n&2){g(2);let e=S(9);p("ngTemplateOutlet",e)}}function Ot(n,d){if(n&1&&D(0,25),n&2){g(2);let e=S(11);p("ngTemplateOutlet",e)}}function It(n,d){if(n&1&&D(0,25),n&2){g(2);let e=S(13);p("ngTemplateOutlet",e)}}function At(n,d){if(n&1&&D(0,25),n&2){g(2);let e=S(15);p("ngTemplateOutlet",e)}}function Dt(n,d){if(n&1&&D(0,25),n&2){g(2);let e=S(17);p("ngTemplateOutlet",e)}}function Wt(n,d){if(n&1){let e=E();o(0,"form",11),w("ngSubmit",function(){c(e);let t=g();return _(t.onSubmit())}),o(1,"div",12)(2,"label",13),s(3,"\u540D\u79F0"),r(),o(4,"div",14),h(5,"input",15),r()(),o(6,"div",12)(7,"label",16),s(8,"\u503C\u7C7B\u578B"),r(),o(9,"div",17)(10,"nb-select",18),v(11,Vt,2,2,"nb-option",19),r()()(),M(12,20),v(13,Bt,1,1,"ng-container",21)(14,Nt,1,1,"ng-container",21)(15,Ot,1,1,"ng-container",21)(16,It,1,1,"ng-container",21)(17,At,1,1,"ng-container",21)(18,Dt,1,1,"ng-container",21),T(),o(19,"div",22)(20,"button",23),s(21,"\u4FDD\u5B58"),r()()()}if(n&2){let e=g();p("formGroup",e.formGroup),m(11),p("ngForOf",e.dataType),m(),p("ngSwitch",e.formGroup.controls.type.value),m(),p("ngSwitchCase",1),m(),p("ngSwitchCase",2),m(),p("ngSwitchCase",3),m(),p("ngSwitchCase",4),m(),p("ngSwitchCase",5),m(),p("ngSwitchCase",6),m(2),p("disabled",e.formGroup.invalid)}}function zt(n,d){if(n&1&&(o(0,"div",26)(1,"label",27),s(2,"\u503C"),r(),o(3,"div",14),h(4,"nb-toggle",28),r()()),n&2){let e=g();p("formGroup",e.formGroup)}}function Gt(n,d){if(n&1&&(M(0),o(1,"div",12)(2,"label",27),s(3),r(),o(4,"div",32),h(5,"input",33),r(),o(6,"div",34),D(7,35),r()(),T()),n&2){let e=d.index;g(2);let i=S(19),t=S(21);m(3),V(e>0?"":"\u503C"),m(2),p("formControlName",e),m(2),p("ngTemplateOutlet",e==0?i:t)("ngTemplateOutletContext",le(4,ke,e,-1))}}function Lt(n,d){if(n&1&&(o(0,"div",29),M(1,30),v(2,Gt,8,7,"ng-container",31),T(),r()),n&2){let e=g();p("formGroup",e.formGroup),m(2),p("ngForOf",e.value2.controls)}}function Rt(n,d){if(n&1&&(M(0),o(1,"div",26)(2,"label",27),s(3),r(),o(4,"div",37),h(5,"input",38),r(),o(6,"div",37),h(7,"input",39),r(),o(8,"div",34),D(9,35),r()(),T()),n&2){let e=d.$implicit,i=d.index;g(2);let t=S(19),l=S(21);m(),p("formGroup",e),m(2),V(i>0?"":"\u503C"),m(6),p("ngTemplateOutlet",i==0?t:l)("ngTemplateOutletContext",le(4,ke,i,-1))}}function Pt(n,d){if(n&1&&(o(0,"div",29),M(1,36),v(2,Rt,10,7,"ng-container",31),T(),r()),n&2){let e=g();p("formGroup",e.formGroup),m(2),p("ngForOf",e.value3.controls)}}function jt(n,d){if(n&1&&(M(0),o(1,"div",26)(2,"label",27),s(3),r(),o(4,"div",37),h(5,"input",38),r(),o(6,"div",37),h(7,"input",39),r(),o(8,"div",34),D(9,35),r()(),T()),n&2){let e=d.$implicit,i=d.index,t=g().index;g(2);let l=S(19),u=S(21);m(),p("formGroup",e),m(2),V(i>0?"":"\u952E\u503C"),m(6),p("ngTemplateOutlet",i==0?l:u)("ngTemplateOutletContext",le(4,ke,t,i))}}function Ht(n,d){if(n&1&&(M(0),v(1,jt,10,7,"ng-container",31),T()),n&2){let e=d.$implicit;m(),p("ngForOf",e.controls)}}function Kt(n,d){if(n&1&&(o(0,"div",29),M(1,40),v(2,Ht,2,1,"ng-container",31),T(),r()),n&2){let e=g();p("formGroup",e.formGroup),m(2),p("ngForOf",e.value4.controls)}}function qt(n,d){if(n&1&&(o(0,"div",26)(1,"label",27),s(2,"\u503C"),r(),o(3,"div",14),h(4,"input",41),r()()),n&2){let e=g();p("formGroup",e.formGroup)}}function Ut(n,d){if(n&1&&(o(0,"div",26)(1,"label",42),s(2,"\u503C"),r(),o(3,"div",14),h(4,"textarea",43),r()()),n&2){let e=g();p("formGroup",e.formGroup)}}function Qt(n,d){if(n&1){let e=E();o(0,"button",48),w("click",function(){c(e);let t=g().i,l=g();return _(l.createRow(t,-1))}),h(1,"nb-icon",45),r()}}function Jt(n,d){if(n&1){let e=E();o(0,"button",49),w("click",function(){c(e);let t=g().i,l=g();return _(l.deleteRow(t,-1))}),h(1,"nb-icon",50),r()}}function Xt(n,d){if(n&1){let e=E();o(0,"button",44),w("click",function(){let t=c(e),l=t.i,u=t.j,a=g();return _(a.createRow(l,u))}),h(1,"nb-icon",45),r(),v(2,Qt,2,0,"button",46)(3,Jt,2,0,"button",47)}if(n&2){let e=d.i,i=d.j;m(2),p("ngIf",e==0&&i==0),m(),p("ngIf",e>0&&i==0)}}function Yt(n,d){if(n&1){let e=E();o(0,"button",51),w("click",function(){let t=c(e),l=t.i,u=t.j,a=g();return _(a.deleteRow(l,u))}),h(1,"nb-icon",50),r()}}var bt=(()=>{class n{constructor(e,i){this.http=e,this.windowService=i,this.settings={columns:{}},this.dataType=[{t:1,n:"\u5F00\u5173\u7C7B\u578B"},{t:2,n:"\u6570\u7EC4\u7C7B\u578B"},{t:3,n:"\u952E\u503C\u7C7B\u578B"},{t:4,n:"\u6570\u7EC4\u952E\u503C\u7C7B\u578B"},{t:5,n:"\u503C\u7C7B\u578B"},{t:6,n:"\u591A\u884C\u503C\u7C7B\u578B"}],this.editable=!1,this.formGroup=new A({name:new y("",[ue.required]),type:new y(0),value1:new y(!1),value2:new J([new y("")]),value3:new J([new A({key:new y(""),value:new y("")})]),value4:new J([new J([new A({key:new y(""),value:new y("")})])]),value5:new y("")})}createRow(e,i){switch(this.formGroup.controls.type.value){case 2:this.value2.push(new y(""));break;case 3:this.value3.push(new A({key:new y(""),value:new y("")}));break;case 4:i===-1?this.value4.push(new J([new A({key:new y(""),value:new y("")})])):this.value4.controls[e].controls.push(new A({key:new y(""),value:new y("")}));break}}deleteRow(e,i){switch(this.formGroup.controls.type.value){case 2:this.value2.removeAt(e);break;case 3:this.value3.removeAt(e);break;case 4:e>-1&&i<0&&this.value4.removeAt(e),e>-1&&i>-1&&this.value4.controls[e].removeAt(i);break}}ngOnInit(){this.settings=this.buildSettings(),this.source=new ve(this.http,{endPoint:nt,dataKey:"records",totalKey:"total",pagerPageKey:"page",pagerLimitKey:"limit",filterFieldKey:"#field#"})}onSubmit(){}create(e){this.formGroup.reset(),this.formGroup.controls.name.enable(),this.formGroup.controls.type.enable(),this.optionWindow(e)}edit(e,i){let t=e.data;this.bindFormControl(t),this.optionWindow(i)}get value2(){return this.formGroup.controls.value2}get value3(){return this.formGroup.controls.value3}get value4(){return this.formGroup.controls.value4}buildSettings(){return{selectMode:"single",actions:{position:"right",add:!1,edit:!1,delete:!1,columnTitle:"\u64CD\u4F5C"},pager:{perPage:30},mode:"external",rowClassFunction:()=>"text-break",columns:{name:{title:"\u540D\u79F0"},value:{title:"\u503C",type:"html",valuePrepareFunction:e=>this.isArray(e)||this.isObject(e)?"<pre>"+JSON.stringify(e,void 0,2)+"</pre>":e,isFilterable:!1}}}}isArray(e){return Array.isArray(e)}isObject(e){return e instanceof Object}bindFormControl(e){switch(this.formGroup.controls.name.disable(),this.formGroup.controls.type.disable(),this.formGroup.controls.name.setValue(e.name),this.formGroup.controls.type.setValue(e.type),e.type){case 1:this.formGroup.controls.value1.setValue(e.value=="on");break;case 2:this.isArray(e.value)&&e.value.forEach((i,t)=>{let l=this.value2.at(t);l?l.setValue(i):this.value2.push(new y(i))});break;case 3:this.isObject(e.value)&&Object.keys(e.value).forEach((t,l)=>{let u=this.value3.at(l);u?u.setValue({key:t,value:e.value[t]||""}):this.value3.push(new A({key:new y(t),value:new y(e.value[t]||"")}))});break;case 4:this.isArray(e.value)&&e.value.forEach((i,t)=>{if(!this.isObject(i))return;let l=this.value4.at(t);l||(l=new J([]),this.value4.push(l)),Object.keys(i).forEach((a,Tt)=>{let Me=l.at(Tt);Me?Me.setValue({key:a,value:i[a]||""}):l.push(new A({key:new y(a),value:new y(i[a]||"")}))})});break;case 5:case 6:this.formGroup.controls.value5.setValue(e.value);break}}optionWindow(e){this.windowService.open(e,{title:"",windowClass:"col-lg-6",context:{},initialState:Qe.FULL_SCREEN,hasBackdrop:!0})}static{this.\u0275fac=function(i){return new(i||n)(k(B),k(Je))}}static{this.\u0275cmp=x({type:n,selectors:[["app-option"]],standalone:!1,decls:22,vars:2,consts:[["createTpl",""],["templateRef1",""],["templateRef2",""],["templateRef3",""],["templateRef4",""],["templateRef5",""],["templateRef6",""],["createRowTpl",""],["closeRowTpl",""],[1,"border-0"],[3,"settings","source"],[3,"ngSubmit","formGroup"],[1,"mb-3","row"],["for","inputName",1,"label","col-lg-2","col-form-label"],[1,"col-lg-6"],["id","inputName","type","text","nbInput","","fullWidth","","formControlName","name"],["for","inputType",1,"label","col-lg-2","col-form-label"],[1,"col-lg-3"],["status","primary","name","dataType","placeholder","--\u8BF7\u9009\u62E9--","formControlName","type","id","inputType",1,"col-lg-1","px-0"],[3,"value",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[1,"mb-3"],["type","submit","status","primary","nbButton","",3,"disabled"],[3,"value"],[3,"ngTemplateOutlet"],[1,"mb-3","row",3,"formGroup"],["for","inputValue",1,"label","col-lg-2","col-form-label"],["id","inputValue","formControlName","value1","status","primary"],[3,"formGroup"],["formArrayName","value2"],[4,"ngFor","ngForOf"],[1,"col-lg-8"],["type","text","nbInput","","fullWidth","",3,"formControlName"],[1,"col-lg-2"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["formArrayName","value3"],[1,"col-lg-4"],["type","text","nbInput","","fullWidth","","formControlName","key"],["type","text","nbInput","","fullWidth","","formControlName","value"],["formArrayName","value4"],["type","text","id","inputValue","nbInput","","fullWidth","","formControlName","value5"],["for","inputTextValue",1,"label","col-lg-2","col-form-label"],["rows","5","nbInput","","fullWidth","","shape","round","id","inputTextValue","formControlName","value5"],["nbButton","","type","button","status","success","size","tiny",3,"click"],["icon","plus-outline"],["class","ml-1","type","button","nbButton","","status","success","size","small",3,"click",4,"ngIf"],["class","ml-1","type","button","nbButton","","status","danger","size","small",3,"click",4,"ngIf"],["type","button","nbButton","","status","success","size","small",1,"ml-1",3,"click"],["type","button","nbButton","","status","danger","size","small",1,"ml-1",3,"click"],["icon","close-outline"],["nbButton","","type","button","status","danger","size","tiny",3,"click"]],template:function(i,t){i&1&&(o(0,"nb-card"),h(1,"nb-card-header",9),o(2,"nb-card-body",9),h(3,"angular2-smart-table",10),r()(),v(4,Wt,22,10,"ng-template",null,0,W)(6,zt,5,1,"ng-template",null,1,W)(8,Lt,3,2,"ng-template",null,2,W)(10,Pt,3,2,"ng-template",null,3,W)(12,Kt,3,2,"ng-template",null,4,W)(14,qt,5,1,"ng-template",null,5,W)(16,Ut,5,1,"ng-template",null,6,W)(18,Xt,4,2,"ng-template",null,7,W)(20,Yt,2,0,"ng-template",null,8,W)),i&2&&(m(3),p("settings",t.settings)("source",t.source))},dependencies:[H,K,Ge,me,se,O,G,L,N,ce,_e,Pe,$,F,ge,I,R,Ce,ee,Z,ne,te],encapsulation:2})}}return n})();var Fe=function(n){return n[n.Normal=0]="Normal",n[n.Checkbox=1]="Checkbox",n[n.File=2]="File",n}(Fe||{});function Zt(n,d){if(n&1){let e=E();M(0),o(1,"app-tree-item",1),w("checkedChange",function(t){let l=c(e).$implicit,u=g();return _(u.onChildCheckedChange(l,t))}),r(),T()}if(n&2){let e=d.$implicit,i=g();m(),p("item",e)("options",i.options)}}function $t(n,d){if(n&1&&(o(0,"div")(1,"span"),s(2),r()()),n&2){let e=g(2);m(2),V(e.item[e.options.textField])}}function en(n,d){if(n&1){let e=E();o(0,"div")(1,"nb-checkbox",8),b("checkedChange",function(t){c(e);let l=g(2);return C(l.item.checked,t)||(l.item.checked=t),_(t)}),w("checkedChange",function(t){c(e);let l=g(2);return _(l.onCheckedChange(t))}),s(2),r()()}if(n&2){let e=g(2);m(),p("indeterminate",e.indeterminate),f("checked",e.item.checked),m(),V(e.item[e.options.textField])}}function tn(n,d){n&1&&h(0,"div")}function nn(n,d){if(n&1){let e=E();o(0,"app-tree-item",10),w("checkedChange",function(t){let l=c(e).$implicit,u=g(3);return _(u.onChildCheckedChange(l,t))}),r()}if(n&2){let e=d.$implicit,i=g(3);p("item",e)("options",i.options)}}function on(n,d){if(n&1&&(o(0,"div"),v(1,nn,1,2,"app-tree-item",9),r()),n&2){let e=g(2);m(),p("ngForOf",e.item[e.options.childrenField])}}function rn(n,d){if(n&1){let e=E();o(0,"div",1)(1,"div",2)(2,"nb-icon",3),w("click",function(){c(e);let t=g();return _(t.onCollapseExpand())}),r(),o(3,"div",4),M(4,5),v(5,$t,3,1,"div",6)(6,en,3,3,"div",6)(7,tn,1,0,"div",6),T(),r()(),v(8,on,2,1,"div",7),r()}if(n&2){let e=g();m(2),Oe("disabled",!e.item[e.options.childrenField]||e.item[e.options.childrenField].length<1),p("icon",e.item.collapsed?"arrow-right":"arrow-down"),m(2),p("ngSwitch",e.options.mode),m(),p("ngSwitchCase",0),m(),p("ngSwitchCase",1),m(),p("ngSwitchCase",2),m(),p("ngIf",!e.item.collapsed)}}var wt=(()=>{class n{constructor(){this.$options=new Ve,this.$items=new Te,this.items=[],this.filterItems=[],this.defaultOptions={textField:"name",childrenField:"children",valueField:"path",mode:Fe.Checkbox,collapsed:!0,checked:!1},this.options=this.defaultOptions,this.selectedChange=new xe}ngOnInit(){this.$options.subscribe(e=>{this.options=Object.assign(this.defaultOptions,e)}),this.$items.subscribe(e=>{e.forEach(i=>{this.rebuildItem(i,null)})})}ngOnChanges(e){this.filterItems=[];let i=e.items,t=e.options;t&&this.$options.next(t.currentValue),i&&this.$items.next(i.currentValue)}rebuildItem(e,i){let t=[],l={name:e[this.options.textField],value:e[this.options.valueField],children:t,collapsed:typeof e.collapsed=="boolean"?e.collapsed:this.options.collapsed,checked:typeof e.checked=="boolean"?e.checked:e.hasOwnProperty("checked")&&e.checked===void 0?void 0:this.options.checked},u=e[this.options.childrenField];u&&Array.isArray(u)&&u.length>0&&u.forEach(a=>{this.rebuildItem(a,t)}),i!==null?i.push(l):this.filterItems.push(l)}onChildCheckedChange(e,i){let t=this.getSelection();this.selectedChange.emit(t.checkedItems)}getSelection(){let e=[],i=[];if(this.filterItems.length>0){let t=this.concatSelection(this.filterItems,e,i);e=t.checked,i=t.unchecked}return{checkedItems:e,uncheckedItems:i}}concatSelection(e,i,t){for(let l of e)l.checked||l.checked===void 0?i.push(l.value):t.push(l.value),l.children.length>0&&this.concatSelection(l.children,i,t);return{checked:i,unchecked:t}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-tree"]],inputs:{items:"items",options:"options"},outputs:{selectedChange:"selectedChange"},standalone:!1,features:[Ne],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"checkedChange","item","options"]],template:function(i,t){i&1&&v(0,Zt,2,2,"ng-container",0),i&2&&p("ngForOf",t.filterItems)},dependencies:()=>[H,an],encapsulation:2})}}return n})(),an=(()=>{class n{constructor(){this.checkedChange=new xe}ngAfterViewInit(){}ngDoCheck(){}ngOnDestroy(){}onCollapseExpand(){let e=this.item[this.options.childrenField];Array.isArray(e)&&e.length>0&&(this.item.collapsed=!this.item.collapsed)}onCheckedChange(e){this.item.children.forEach(i=>{this.setCheckedRecursive(i,e)}),this.checkedChange.emit(e)}onChildCheckedChange(e,i){let t=null,l=this.item[this.options.childrenField];if(Array.isArray(l)&&l.length>0){for(let u of l)if(t===null)t=u.checked;else if(t!==u.checked){t=void 0;break}t===null&&(t=!1),this.item.checked!==t&&(this.item.checked=t)}this.checkedChange.emit(i)}get indeterminate(){return this.item.checked===void 0}setCheckedRecursive(e,i){e.checked=i,e.children.length>0&&e.children.forEach(t=>{this.setCheckedRecursive(t,i)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-tree-item"]],inputs:{item:"item",options:"options"},outputs:{checkedChange:"checkedChange"},standalone:!1,decls:1,vars:1,consts:[["class","tree-view-item",4,"ngIf"],[1,"tree-view-item"],[1,"form-inline","d-flex"],[3,"click","icon"],[1,""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf"],[3,"checkedChange","indeterminate","checked"],[3,"item","options","checkedChange",4,"ngFor","ngForOf"],[3,"checkedChange","item","options"]],template:function(i,t){i&1&&v(0,rn,9,8,"div",0),i&2&&p("ngIf",t.item)},dependencies:[H,K,me,se,he,Z,n],styles:[`[_nghost-%COMP%]   .form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 .5rem .5rem 0}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:pointer;color:var(--color-primary-default)}[_nghost-%COMP%]   nb-icon.disabled[_ngcontent-%COMP%]{cursor:no-drop;color:var(--color-primary-disabled)}[_nghost-%COMP%]   .tree-view-item[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]   .tree-view-item[_ngcontent-%COMP%]   .tree-view-item[_ngcontent-%COMP%]{margin-left:2rem}





`]})}}return n})();function mn(n,d){if(n&1){let e=E();o(0,"button",16),w("click",function(){c(e);let t=g();return _(t.reset())}),h(1,"nb-icon",17),r()}}var yt=(()=>{class n{constructor(e,i){this.http=e,this.sharedService=i,this.settings={columns:{}},this.menus=[],this.formGroup=new A({id:new y(0),name:new y("",ue.required),capabilities:new y([])}),this.spinner=!1}onSpinner(e){this.spinner=e}ngOnInit(){this.http.get(Ye).subscribe(e=>{this.menus=e.menus}),this.settings=this.buildSettings(),this.source=new ve(this.http,{endPoint:it,dataKey:"records",totalKey:"total",pagerPageKey:"page",pagerLimitKey:"limit",filterFieldKey:"#field#"})}capabilitySelected(e){this.formGroup.controls.capabilities.setValue(e)}edit(e){let i=e.data;this.selected(i)}delete(e){let i=e.data;confirm("\u786E\u5B9A\u5220\u9664\u89D2\u8272: "+i.name)&&this.http.delete(at,{body:i}).subscribe()}onSubmit(e){let i=this.formGroup.getRawValue(),t=i.id>0?rt:ot;this.http.post(t,i,{context:new z().set(P,this)}).subscribe()}reset(){this.formGroup.reset(),this.selected({id:0,name:"",capabilities:[]})}selected(e){this.menus=this.menus.map(i=>(this.selection(i,e.capabilities),i)),this.formGroup.setValue({id:e.id,name:e.name,capabilities:e.capabilities})}selection(e,i){if(e.checked=i.includes(e.path),Array.isArray(e.children)&&e.children.length>0){let t=null;for(let l of e.children)t===null?t=i.includes(l.path):t!==i.includes(l.path)&&(t=void 0);t===null&&(e.checked=!1),e.checked!==t&&(e.checked=t);for(let l of e.children)this.selection(l,i)}}buildSettings(){return{selectMode:"single",actions:{position:"right",add:!1,edit:!0,delete:!0,columnTitle:"\u64CD\u4F5C"},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},pager:{perPage:30},mode:"external",columns:{name:{title:"\u540D\u79F0",isFilterable:!0}}}}static{this.\u0275fac=function(i){return new(i||n)(k(B),k($e))}}static{this.\u0275cmp=x({type:n,selectors:[["app-role"]],standalone:!1,decls:27,vars:8,consts:[[1,"row"],[1,"col","col-md-4","col-sm-6"],[1,"d-flex","justify-content-between","align-items-center"],["status","primary","size","small","nbButton","",3,"click",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","inputName",1,"label","col-form-label"],["nbInput","","id","inputName","fullWidth","","status","primary","formControlName","name"],["for","inputPermission",1,"label","col-form-label"],[1,""],["formControlName","capabilities","id","inputPermission",3,"selectedChange","items"],[1,"my-3","d-flex","justify-content-between"],[1,"label","col-form-label"],["type","submit","status","primary","size","small","nbButton","",3,"disabled","nbSpinner"],[1,"col","col-md-8","col-sm-6"],[3,"edit","delete","settings","source"],["status","primary","size","small","nbButton","",3,"click"],["icon","plus-outline"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"nb-card")(3,"nb-card-header",2)(4,"span"),s(5),r(),v(6,mn,2,0,"button",3),r(),o(7,"nb-card-body")(8,"form",4),w("ngSubmit",function(u){return t.onSubmit(u)}),o(9,"div",5)(10,"label",6),s(11,"\u540D\u79F0"),r(),o(12,"div"),h(13,"input",7),r()(),o(14,"div",5)(15,"label",8),s(16,"\u6743\u9650"),r(),o(17,"div",9)(18,"app-tree",10),w("selectedChange",function(u){return t.capabilitySelected(u)}),r()()(),o(19,"div",11),h(20,"label",12),o(21,"button",13),s(22,"\u4FDD\u5B58"),r()()()()()(),o(23,"div",14)(24,"nb-card")(25,"nb-card-body")(26,"angular2-smart-table",15),w("edit",function(u){return t.edit(u)})("delete",function(u){return t.delete(u)}),r()()()()()),i&2&&(m(5),Q(" ",t.formGroup.controls.id.value>0?"\u7F16\u8F91\u89D2\u8272":"\u6DFB\u52A0\u65B0\u89D2\u8272"," "),m(),p("ngIf",t.formGroup.controls.id.value),m(2),p("formGroup",t.formGroup),m(10),p("items",t.menus),m(3),p("disabled",t.formGroup.invalid||t.spinner)("nbSpinner",t.spinner),m(5),p("settings",t.settings)("source",t.source))},dependencies:[K,O,G,L,N,ce,_e,$,F,ge,I,R,fe,Z,ne,wt],encapsulation:2})}}return n})();var sn=["autoInput"];function pn(n,d){if(n&1&&(o(0,"nb-radio",31),s(1),r()),n&2){let e=d.$implicit;p("value",e.alias),m(),Q(" ",e.name," ")}}function un(n,d){if(n&1&&(o(0,"nb-option",32),s(1),r()),n&2){let e=d.$implicit;p("value",e),m(),Q(" ",e," ")}}var vt=(()=>{class n{constructor(e){this.http=e,this.option={},this.timezone=[],this.submitted=!1,this.searchEngines=[{alias:"",name:"\u5185\u90E8"},{alias:"google",name:"\u8C37\u6B4C"},{alias:"bing",name:"\u5FC5\u5E94"},{alias:"baidu",name:"\u767E\u5EA6"}]}onSpinner(e){this.submitted=e}ngOnInit(){this.http.get(lt).subscribe(e=>{this.timezone=e.timezone,this.option=e.option,this.filteredOptions$=Ee(e.timezone)})}action(e){this.http.post(mt,this.option,{context:new z().set(P,this)}).subscribe()}filter(e){if(e===void 0)return[];let i=e.toLowerCase();return this.timezone.filter(t=>t.toLowerCase().includes(i))}getFilteredOptions(e){return Ee(e).pipe(Be(i=>this.filter(i)))}onChange(){this.filteredOptions$=this.getFilteredOptions(this.input?.nativeElement.value)}onSelectionChange(e){this.filteredOptions$=this.getFilteredOptions(e)}static{this.\u0275fac=function(i){return new(i||n)(k(B))}}static{this.\u0275cmp=x({type:n,selectors:[["app-site-general"]],viewQuery:function(i,t){if(i&1&&Ie(sn,5),i&2){let l;Ae(l=De())&&(t.input=l.first)}},standalone:!1,decls:70,vars:16,consts:[["ngForm","ngForm"],["name","ngModel"],["autoInput",""],["auto",""],[3,"ngSubmit"],[1,"mb-3","row"],["for","title",1,"label","col-form-label","col-2"],[1,"col-8"],["id","title","name","name","status","primary","nbInput","",3,"ngModelChange","ngModel","status"],[1,"label","col-form-label","d-block"],["for","append_title",1,"label","col-form-label","col-2"],["nbInput","","id","append_title","name","append_title","status","primary",3,"ngModelChange","ngModel"],["for","siteurl",1,"label","col-form-label","col-2"],[1,"col-10"],["nbInput","","id","siteurl","name","siteurl","status","primary",3,"ngModelChange","ngModel"],["for","site_static_url",1,"label","col-form-label","col-2"],["nbInput","","id","site_static_url","name","staic_url","status","primary",3,"ngModelChange","ngModel"],["for","site_keyword",1,"label","col-form-label","col-2"],["nbInput","","id","site_keyword","name","site_keyword","fullWidth","","status","primary",3,"ngModelChange","ngModel"],["for","site_description",1,"label","col-form-label","col-2"],["nbInput","","id","site_description","name","site_description","fullWidth","","status","primary",3,"ngModelChange","ngModel"],["for","search_engine",1,"label","col-form-label","col-2"],["id","search_engine","name","search_engine",3,"ngModelChange","ngModel"],["class","d-flex justify-content-between",3,"value",4,"ngFor","ngForOf"],["for","timezone",1,"label","col-form-label","col-2"],["id","timezone","nbInput","","name","timezone","type","text","placeholder","\u9009\u62E9\u65F6\u533A","status","primary",3,"ngModelChange","input","ngModel","nbAutocomplete"],[3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"label","col-form-label","col-2"],["status","primary","size","small","nbButton","",3,"disabled","nbSpinner"],[1,"d-flex","justify-content-between",3,"value"],[3,"value"]],template:function(i,t){if(i&1){let l=E();o(0,"form",4,0),w("ngSubmit",function(a){return c(l),_(t.action(a))}),o(2,"nb-card-body")(3,"div",5)(4,"label",6),s(5,"\u7AD9\u70B9\u6807\u9898"),r(),o(6,"div",7)(7,"input",8,1),b("ngModelChange",function(a){return c(l),C(t.option.site_title,a)||(t.option.site_title=a),_(a)}),r(),o(9,"label",9),s(10,"\u53D6\u4E2A\u540D\u5B50\u597D\u96BE\u5440\u3002"),r()()(),o(11,"div",5)(12,"label",10),s(13,"\u526F\u6807\u9898"),r(),o(14,"div",7)(15,"input",11),b("ngModelChange",function(a){return c(l),C(t.option.site_subtitle,a)||(t.option.site_subtitle=a),_(a)}),r(),o(16,"label",9),s(17,"\u53D6\u4E2A\u53E3\u53F7\u597D\u96BE\u5440\u3002"),r()()(),o(18,"div",5)(19,"label",12),s(20,"\u7AD9\u70B9\u5730\u5740"),r(),o(21,"div",13)(22,"input",14),b("ngModelChange",function(a){return c(l),C(t.option.site_url,a)||(t.option.site_url=a),_(a)}),r(),o(23,"label",9),s(24,"\u7F51\u7AD9\u57DF\u540D(http://example.com)\u3002"),r()()(),o(25,"div",5)(26,"label",15),s(27,"\u9759\u6001\u5730\u5740"),r(),o(28,"div",13)(29,"input",16),b("ngModelChange",function(a){return c(l),C(t.option.site_static_url,a)||(t.option.site_static_url=a),_(a)}),r(),o(30,"label",9),s(31,"\u9759\u6001\u8D44\u6E90\u6587\u4EF6\u5730\u5740(http://static.example.com)\u3002"),r()()(),o(32,"div",5)(33,"label",17),s(34,"Keyword"),r(),o(35,"div",7)(36,"input",18),b("ngModelChange",function(a){return c(l),C(t.option.site_keywords,a)||(t.option.site_keywords=a),_(a)}),r(),o(37,"label",9),s(38,'\u8BA9\u66F4\u591A\u7684\u4EBA\u641C\u7D22\u5230\u4F60\u7684\u7AD9\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528","\u5206\u9694\u591A\u4E2A\u5173\u952E\u5B57'),r()()(),o(39,"div",5)(40,"label",19),s(41,"Description"),r(),o(42,"div",7)(43,"input",20),b("ngModelChange",function(a){return c(l),C(t.option.site_description,a)||(t.option.site_description=a),_(a)}),r(),o(44,"label",9),s(45,"\u4ECB\u7ECD\u4E0B\u4F60\u7684\u7AD9\u3002"),r()()(),o(46,"div",5)(47,"label",21),s(48,"\u641C\u7D20\u8DF3\u8F6C"),r(),o(49,"div",7)(50,"nb-radio-group",22),b("ngModelChange",function(a){return c(l),C(t.option.search_engine,a)||(t.option.search_engine=a),_(a)}),v(51,pn,2,2,"nb-radio",23),r()()(),o(52,"div",5)(53,"label",24),s(54,"\u65F6\u533A"),r(),o(55,"div",7)(56,"input",25,2),b("ngModelChange",function(a){return c(l),C(t.option.timezone,a)||(t.option.timezone=a),_(a)}),w("input",function(){return c(l),_(t.onChange())}),r(),o(58,"nb-autocomplete",26,3),w("selectedChange",function(a){return c(l),_(t.onSelectionChange(a))}),v(60,un,2,2,"nb-option",27),We(61,"async"),r(),o(62,"label",9),s(63,"\u9009\u62E9\u4E0E\u60A8\u5728\u540C\u4E00\u65F6\u533A\u7684\u57CE\u5E02\u6216\u4E00\u4E2AUTC\u3002"),r()()()(),o(64,"nb-card-footer")(65,"div",28),h(66,"label",29),o(67,"div",13)(68,"button",30),s(69,"\u4FDD\u5B58"),r()()()()()}if(i&2){let l=S(1),u=S(8),a=S(59);m(7),f("ngModel",t.option.site_title),p("status",u.dirty?u.invalid?"danger":"success":"primary"),m(8),f("ngModel",t.option.site_subtitle),m(7),f("ngModel",t.option.site_url),m(7),f("ngModel",t.option.site_static_url),m(7),f("ngModel",t.option.site_keywords),m(7),f("ngModel",t.option.site_description),m(7),f("ngModel",t.option.search_engine),m(),p("ngForOf",t.searchEngines),m(5),f("ngModel",t.option.timezone),p("nbAutocomplete",a),m(4),p("ngForOf",ze(61,14,t.filteredOptions$)),m(8),p("disabled",t.submitted||!l.valid)("nbSpinner",t.submitted)}},dependencies:[H,O,G,L,N,Y,q,F,U,I,R,fe,be,we,ee,qe,Ue,Le],encapsulation:2})}}return n})();var St=(()=>{class n{constructor(e){this.http=e,this.option={},this.submitted=!1}ngOnInit(){this.http.get(st).subscribe(e=>{this.option=e.option})}action(e){this.http.post(pt,this.option,{context:new z().set(P,this)}).subscribe()}onSpinner(e){this.submitted=e}thumbnailCrop(e){this.option.thumbnail_crop=e?1:0}static{this.\u0275fac=function(i){return new(i||n)(k(B))}}static{this.\u0275cmp=x({type:n,selectors:[["app-site-media"]],standalone:!1,decls:57,vars:8,consts:[["ngForm","ngForm"],[3,"ngSubmit"],[1,"header"],[1,"my-3"],[1,"my-4","row","align-items-center"],[1,"label","col-form-label","col-2"],[1,"col-10"],[1,"d-flex","flex-column"],[1,"mb-3"],["for","thumbnail_size_w",1,"label","col-form-label"],["nbInput","","id","thumbnail_size_w","type","number","name","thumbnail_w",1,"ms-0","ms-sm-4",3,"ngModelChange","ngModel"],["for","thumbnail_size_h",1,"label","col-form-label"],["nbInput","","id","thumbnail_size_h","type","number","name","thumbnail_h",1,"ms-0","ms-sm-4",3,"ngModelChange","ngModel"],[3,"checkedChange","checked"],[1,"mb-4","row","align-items-center"],["for","medium_size_w",1,"label","col-form-label"],["nbInput","","id","medium_size_w","type","number","name","medium_w",1,"ms-0","ms-sm-4",3,"ngModelChange","ngModel"],["for","medium_size_h",1,"label","col-form-label"],["nbInput","","id","medium_size_h","type","number","name","medium_h",1,"ms-0","ms-sm-4",3,"ngModelChange","ngModel"],["for","large_size_w",1,"label","col-form-label"],["nbInput","","id","large_size_w","name","large_w","type","number",1,"ms-0","ms-sm-4",3,"ngModelChange","ngModel"],["for","large_size_h",1,"label","col-form-label"],["nbInput","","id","large_size_h","name","large_h","type","number",1,"ms-0","ms-sm-4",3,"ngModelChange","ngModel"],[1,"row"],["status","primary","size","small","nbButton","",3,"disabled"]],template:function(i,t){if(i&1){let l=E();o(0,"form",1,0),w("ngSubmit",function(a){return c(l),_(t.action(a))}),o(2,"nb-card-body")(3,"div",2)(4,"div")(5,"h6"),s(6,"\u56FE\u7247\u5927\u5C0F"),r(),o(7,"div",3),s(8,"\u4E0B\u9762\u5217\u51FA\u6765\u7684\u5C3A\u5BF8\u51B3\u5B9A\u63D2\u5165\u5A92\u4F53\u5E93\u5185\u7684\u56FE\u7247\u4E4B\u6700\u5927\u5C3A\u5BF8\u3002\u4EE5\u50CF\u7D20\u4E3A\u5355\u4F4D\u3002"),r()()(),o(9,"div",4)(10,"label",5),s(11,"\u7F29\u7565\u56FE\u5927\u5C0F"),r(),o(12,"div",6)(13,"div",7)(14,"div",8)(15,"label",9),s(16,"\u5BBD\u5EA6"),r(),o(17,"input",10),b("ngModelChange",function(a){return c(l),C(t.option.thumbnail_size_w,a)||(t.option.thumbnail_size_w=a),_(a)}),r()(),o(18,"div",8)(19,"label",11),s(20,"\u9AD8\u5EA6"),r(),o(21,"input",12),b("ngModelChange",function(a){return c(l),C(t.option.thumbnail_size_h,a)||(t.option.thumbnail_size_h=a),_(a)}),r()(),o(22,"div")(23,"nb-checkbox",13),w("checkedChange",function(a){return c(l),_(t.thumbnailCrop(a))}),s(24," \u603B\u662F\u88C1\u526A\u7F29\u7565\u56FE\u5230\u8FD9\u4E2A\u5C3A\u5BF8\uFF08\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u7F29\u7565\u56FE\u5E94\u4FDD\u6301\u539F\u59CB\u6BD4\u4F8B\uFF09 "),r()()()()(),o(25,"div",14)(26,"label",5),s(27,"\u4E2D\u7B49\u5927\u5C0F"),r(),o(28,"div",6)(29,"div",7)(30,"div",8)(31,"label",15),s(32,"\u6700\u5927\u5BBD\u5EA6"),r(),o(33,"input",16),b("ngModelChange",function(a){return c(l),C(t.option.medium_size_w,a)||(t.option.medium_size_w=a),_(a)}),r()(),o(34,"div")(35,"label",17),s(36,"\u6700\u5927\u9AD8\u5EA6"),r(),o(37,"input",18),b("ngModelChange",function(a){return c(l),C(t.option.medium_size_h,a)||(t.option.medium_size_h=a),_(a)}),r()()()()(),o(38,"div",14)(39,"label",5),s(40,"\u5927\u5C3A\u5BF8"),r(),o(41,"div",6)(42,"div",7)(43,"div",8)(44,"label",19),s(45,"\u6700\u5927\u5BBD\u5EA6"),r(),o(46,"input",20),b("ngModelChange",function(a){return c(l),C(t.option.large_size_w,a)||(t.option.large_size_w=a),_(a)}),r()(),o(47,"div")(48,"label",21),s(49,"\u6700\u5927\u9AD8\u5EA6"),r(),o(50,"input",22),b("ngModelChange",function(a){return c(l),C(t.option.large_size_h,a)||(t.option.large_size_h=a),_(a)}),r()()()()()(),o(51,"nb-card-footer")(52,"div",23),h(53,"label",5),o(54,"div",6)(55,"button",24),s(56,"\u4FDD\u5B58"),r()()()()()}if(i&2){let l=S(1);m(17),f("ngModel",t.option.thumbnail_size_w),m(4),f("ngModel",t.option.thumbnail_size_h),m(2),p("checked",t.option.thumbnail_crop==1),m(10),f("ngModel",t.option.medium_size_w),m(4),f("ngModel",t.option.medium_size_h),m(9),f("ngModel",t.option.large_size_w),m(4),f("ngModel",t.option.large_size_h),m(5),p("disabled",t.submitted||!l.valid)}},dependencies:[O,G,de,L,N,Y,q,F,U,he,I,R],encapsulation:2})}}return n})();var Et=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ae({type:n})}static{this.\u0275inj=re({imports:[pe,ye]})}}return n})();function dn(n,d){if(n&1&&(o(0,"nb-option",26),s(1),r()),n&2){let e=d.$implicit;p("value",e.id),m(),V(e.name)}}function cn(n,d){if(n&1&&(o(0,"nb-option",26),s(1),r()),n&2){let e=d.$implicit;p("value",e.alias),m(),V(e.name)}}function _n(n,d){if(n&1&&(o(0,"nb-radio",31),s(1),o(2,"span",32),s(3),r()()),n&2){let e=d.$implicit,i=g();p("value",e.alias),m(),Q(" ",e.name," "),m(2),V(i.option.site_url+e.example)}}function gn(n,d){if(n&1){let e=E();o(0,"div",3)(1,"label",33),s(2,"\u9759\u6001\u6A21\u5F0F"),r(),o(3,"div",34)(4,"nb-toggle",35),b("checkedChange",function(t){c(e);let l=g();return C(l.option.static_mode,t)||(l.option.static_mode=t),_(t)}),r(),o(5,"label",36),s(6,'\u9759\u6001\u6A21\u5F0F\u5C06\u4F1A\u5728URL\u540E\u9762\u6DFB\u52A0\u540E\u7F00: ".html"'),r()()()}if(n&2){let e=g();m(4),f("checked",e.option.static_mode)}}var xt=(()=>{class n{constructor(e){this.http=e,this.option={},this.categories=[],this.submitted=!1,this.formats=[{alias:"",name:"\u6807\u51C6"},{alias:"aside",name:"\u65E5\u5FD7"},{alias:"chat",name:"\u804A\u5929"},{alias:"gallery",name:"\u76F8\u518C"},{alias:"link",name:"\u94FE\u63A5"},{alias:"image",name:"\u56FE\u7247"},{alias:"quote",name:"\u5F15\u8BED"},{alias:"status",name:"\u72B6\u6001"},{alias:"video",name:"\u89C6\u9891"},{alias:"audio",name:"\u97F3\u9891"}],this.permalinks=[{alias:"post_permalink_normal",name:"\u6734\u7D20",example:"?p=123"},{alias:"post_permalink_number",name:"\u6570\u5B57\u578B",example:"/p/123"},{alias:"post_permalink_name",name:"\u6587\u7AE0\u540D",example:"/sample-post"},{alias:"post_permalink_type",name:"\u7C7B\u578B\u548C\u540D\u79F0",example:"/question/sample-post"},{alias:"post_permalink_date",name:"\u5E74\u6708\u4EFD\u548C\u540D\u79F0\u578B",example:"/2022/09/sample-post"}]}ngOnInit(){this.http.get(et).subscribe(e=>{this.categories=e.records}),this.http.get(ut).subscribe(e=>{this.option=e.option})}action(e){this.http.post(dt,this.option,{context:new z().set(P,this)}).subscribe()}onSpinner(e){this.submitted=e}switchFeature(e,i){this.option[i]=e?"on":"off"}static{this.\u0275fac=function(i){return new(i||n)(k(B))}}static{this.\u0275cmp=x({type:n,selectors:[["app-site-content"]],standalone:!1,decls:72,vars:16,consts:[["ngForm","ngForm"],[3,"ngSubmit"],[1,"header"],[1,"mb-3","row"],["for","default_category",1,"label","col-form-label","col-12","col-md-2"],[1,"col-12","col-md-10"],["id","default_category","name","default_category",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","default_post_format",1,"label","col-form-label","col-12","col-md-2"],["id","default_post_format","name","default_post_format",3,"ngModelChange","ngModel"],["for","posts_per_page",1,"label","col-form-label","col-12","col-md-2"],["id","posts_per_page","name","posts_per_page","min","1","max","200","status","primary","type","number","nbInput","",3,"ngModelChange","ngModel"],["for","permalink",1,"label","col-form-label","col-12","col-md-2"],["id","permalink","name","permalink",3,"ngModelChange","ngModel"],["class","d-flex justify-content-between",3,"value",4,"ngFor","ngForOf"],["class","mb-3 row",4,"ngIf"],["for","default_comment_status",1,"label","col-form-label","col-12","col-md-2"],["id","default_comment_status","name","default_comment_status","status","primary",3,"checkedChange","checked"],["for","comment_moderation",1,"label","col-form-label","col-12","col-md-2"],["id","comment_moderation","name","comment_moderation","status","primary",3,"checkedChange","checked"],["for","page_comments",1,"label","col-form-label","col-12","col-md-2"],["id","page_comments","name","page_comments","status","primary",3,"checkedChange","checked"],["for","comments_per_page",1,"label","col-form-label","col-12","col-md-2"],["id","comments_per_page","name","comments_per_page","min","1","max","200","type","number","status","primary","nbInput","",3,"ngModelChange","ngModel"],["for","comment_order",1,"label","col-form-label","col-12","col-md-2"],["id","comment_order","name","comment_order",3,"ngModelChange","ngModel"],[3,"value"],[1,"row"],[1,"label","col-form-label","col-2"],[1,"col-10"],["status","primary","size","small","type","submit","nbButton","",3,"disabled"],[1,"d-flex","justify-content-between",3,"value"],[1,"ml-5"],["for","staticMode",1,"label","col-form-label","col-12","col-md-2"],[1,"col-12","col-md-10","d-flex","flex-column"],["id","staticMode","name","staticMode","status","primary",3,"checkedChange","checked"],[1,"label"]],template:function(i,t){if(i&1){let l=E();o(0,"form",1,0),w("ngSubmit",function(a){return c(l),_(t.action(a))}),o(2,"nb-card-body")(3,"div",2)(4,"div")(5,"h6"),s(6,"\u6587\u7AE0"),r()()(),o(7,"div",3)(8,"label",4),s(9,"\u9ED8\u8BA4\u6587\u7AE0\u5206\u7C7B"),r(),o(10,"div",5)(11,"nb-select",6),b("ngModelChange",function(a){return c(l),C(t.option.default_category,a)||(t.option.default_category=a),_(a)}),v(12,dn,2,2,"nb-option",7),r()()(),o(13,"div",3)(14,"label",8),s(15,"\u9ED8\u8BA4\u6587\u7AE0\u5F62\u5F0F"),r(),o(16,"div",5)(17,"nb-select",9),b("ngModelChange",function(a){return c(l),C(t.option.default_post_format,a)||(t.option.default_post_format=a),_(a)}),v(18,cn,2,2,"nb-option",7),r()()(),o(19,"div",3)(20,"label",10),s(21,"\u9ED8\u8BA4\u6587\u7AE0\u6BCF\u9875\u663E\u793A"),r(),o(22,"div",5)(23,"input",11),b("ngModelChange",function(a){return c(l),C(t.option.posts_per_page,a)||(t.option.posts_per_page=a),_(a)}),r(),s(24," \u6761 "),r()(),o(25,"div",3)(26,"label",12),s(27,"\u9ED8\u8BA4\u6587\u7AE0\u94FE\u63A5"),r(),o(28,"div",5)(29,"nb-radio-group",13),b("ngModelChange",function(a){return c(l),C(t.option.permalink_structure,a)||(t.option.permalink_structure=a),_(a)}),v(30,_n,4,3,"nb-radio",14),r()()(),v(31,gn,7,1,"div",15),o(32,"div",2)(33,"div")(34,"h6"),s(35,"\u8BC4\u8BBA"),r()()(),o(36,"div",3)(37,"label",16),s(38,"\u5F00\u542F\u8BC4\u8BBA"),r(),o(39,"div",5)(40,"nb-toggle",17),b("checkedChange",function(a){return c(l),C(t.option.default_comment_status,a)||(t.option.default_comment_status=a),_(a)}),r()()(),o(41,"div",3)(42,"label",18),s(43,"\u8BC4\u8BBA\u5BA1\u6838"),r(),o(44,"div",5)(45,"nb-toggle",19),b("checkedChange",function(a){return c(l),C(t.option.comment_moderation,a)||(t.option.comment_moderation=a),_(a)}),r()()(),o(46,"div",3)(47,"label",20),s(48,"\u5206\u9875\u663E\u793A"),r(),o(49,"div",5)(50,"nb-toggle",21),b("checkedChange",function(a){return c(l),C(t.option.page_comments,a)||(t.option.page_comments=a),_(a)}),r()()(),o(51,"div",3)(52,"label",22),s(53,"\u6BCF\u9875\u663E\u793A"),r(),o(54,"div",5)(55,"input",23),b("ngModelChange",function(a){return c(l),C(t.option.comments_per_page,a)||(t.option.comments_per_page=a),_(a)}),r(),s(56,"\u6761 "),r()(),o(57,"div",3)(58,"label",24),s(59,"\u663E\u793A\u987A\u5E8F"),r(),o(60,"div",5)(61,"nb-select",25),b("ngModelChange",function(a){return c(l),C(t.option.comment_order,a)||(t.option.comment_order=a),_(a)}),o(62,"nb-option",26),s(63,"\u65E7\u7684"),r(),o(64,"nb-option",26),s(65,"\u65B0\u7684"),r()()()()(),o(66,"nb-card-footer")(67,"div",27),h(68,"label",28),o(69,"div",29)(70,"button",30),s(71,"\u4FDD\u5B58"),r()()()()()}if(i&2){let l=S(1);m(11),f("ngModel",t.option.default_category),m(),p("ngForOf",t.categories),m(5),f("ngModel",t.option.default_post_format),m(),p("ngForOf",t.formats),m(5),f("ngModel",t.option.posts_per_page),m(6),f("ngModel",t.option.permalink_structure),m(),p("ngForOf",t.permalinks),m(),p("ngIf",t.option.permalink_structure!="post_permalink_normal"),m(9),f("checked",t.option.default_comment_status),m(5),f("checked",t.option.comment_moderation),m(5),f("checked",t.option.page_comments),m(5),f("ngModel",t.option.comments_per_page),m(6),f("ngModel",t.option.comment_order),m(),p("value","asc"),m(2),p("value","desc"),m(6),p("disabled",t.submitted||!l.valid)}},dependencies:[H,K,O,G,de,L,N,He,je,Y,q,F,U,I,R,be,we,Ce,ee,te],encapsulation:2})}}return n})();var kt=(()=>{class n{constructor(e){this.config=e,this.tabs=[{title:"\u5E38\u89C4",icon:"settings",route:"./"},{title:"\u5185\u5BB9",icon:"file-text-outline",route:"./content"},{title:"\u5A92\u4F53",icon:"video-outline",route:"./media"},{title:"\u7F16\u8F91\u5668",icon:"edit-2-outline",route:"./editor"}]}ngOnInit(){this.config.config.settingPages.forEach(e=>{this.tabs.push({title:e.name,icon:"options-2-outline",route:"./general",queryParams:{page:e.path}})})}static{this.\u0275fac=function(i){return new(i||n)(k(Ze))}}static{this.\u0275cmp=x({type:n,selectors:[["app-setting"]],standalone:!1,decls:3,vars:1,consts:[[3,"tabs"]],template:function(i,t){i&1&&(o(0,"nb-card")(1,"nb-card-body"),h(2,"nb-route-tabset",0),r()()),i&2&&(m(2),p("tabs",t.tabs))},dependencies:[$,F,Ke],encapsulation:2})}}return n})();var Ft=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-site-page-general"]],standalone:!1,decls:1,vars:0,template:function(i,t){i&1&&h(0,"app-plugin-feature")},dependencies:[ht],styles:["[_nghost-%COMP%]     app-plugin-feature nb-card{border:none}[_nghost-%COMP%]     app-plugin-feature nb-card-header{display:none}"]})}}return n})();var Mt=(()=>{class n{constructor(e){this.http=e,this.option={editor_html_support:!1,editor_markdown_support:!1,editor_html_embed_support:!1,editor_html_rules:{disallow:[],allow:[],allowEmpty:[]},editor_style_rules:{definitions:[]}},this.submitted=!1,this.settings={actions:{columnTitle:"\u64CD\u4F5C",add:!0,edit:!0,delete:!0,position:"right"},add:{sanitizer:{bypassHtml:!0},addButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="plus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2z"/></g></g></svg>',createButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  fill="currentColor"><g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g></svg>',cancelButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g></svg>'},edit:{sanitizer:{bypassHtml:!0},editButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="edit-2"><rect width="24" height="24" opacity="0"/><path d="M19 20H5a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2z"/><path d="M5 18h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71L16.66 2.6A2 2 0 0 0 14 2.53l-9 9a2 2 0 0 0-.57 1.21L4 16.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 18zM15.27 4L18 6.73l-2 1.95L13.32 6zm-8.9 8.91L12 7.32l2.7 2.7-5.6 5.6-3 .28z"/></g></g></svg>',saveButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g></svg>',cancelButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g></svg>'},delete:{sanitizer:{bypassHtml:!0},deleteButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  fill="currentColor"><g data-name="Layer 2"><g data-name="trash-2"><rect width="24" height="24" opacity="0"/><path d="M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 4.33c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM18 19a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8h12z"/><path d="M9 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z"/><path d="M15 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z"/></g></g></svg>'},columns:{name:{title:"\u6807\u7B7E\u540D",isFilterable:!1,width:"22.5%"},classes:{title:"\u7C7B",isFilterable:!1,width:"22.5%"},styles:{title:"\u6837\u5F0F",isFilterable:!1,width:"22.5%"},attributes:{title:"\u5C5E\u6027",isFilterable:!1,width:"22.5%"}}},this.htmlSource=[],this.styleSource=[],this.styleSettings={actions:{columnTitle:"\u64CD\u4F5C",add:!0,edit:!0,delete:!0,position:"right"},add:{sanitizer:{bypassHtml:!0},addButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="plus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2z"/></g></g></svg>',createButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g></svg>',cancelButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g></svg>'},edit:{sanitizer:{bypassHtml:!0},editButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="edit-2"><rect width="24" height="24" opacity="0"/><path d="M19 20H5a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2z"/><path d="M5 18h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71L16.66 2.6A2 2 0 0 0 14 2.53l-9 9a2 2 0 0 0-.57 1.21L4 16.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 18zM15.27 4L18 6.73l-2 1.95L13.32 6zm-8.9 8.91L12 7.32l2.7 2.7-5.6 5.6-3 .28z"/></g></g></svg>',saveButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g></svg>',cancelButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g></svg>'},delete:{sanitizer:{bypassHtml:!0},deleteButtonContent:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g data-name="Layer 2"><g data-name="trash-2"><rect width="24" height="24" opacity="0"/><path d="M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 4.33c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM18 19a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8h12z"/><path d="M9 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z"/><path d="M15 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z"/></g></g></svg>'},columns:{name:{title:"\u540D\u79F0",width:"30%",isFilterable:!1},element:{title:"\u6807\u7B7E",width:"30%",isFilterable:!1},classes:{title:"\u7C7B\u540D",width:"30%",isFilterable:!1}}}}ngOnInit(){this.http.get(ct).subscribe(e=>{this.option=Object.assign(this.option,e),Array.isArray(this.option.editor_style_rules)&&(this.option.editor_style_rules={definitions:[]}),Array.isArray(this.option.editor_html_rules)&&(this.option.editor_html_rules={allow:[],disallow:[],allowEmpty:[]}),this.htmlSource=this.option.editor_html_rules.allow||[],this.styleSource=this.option.editor_style_rules.definitions||[]})}action(e){this.htmlSource.length>0&&(this.option.editor_html_rules.allow=this.htmlSource.filter(i=>typeof i.name=="string"&&i.name.trim().length>0)),this.styleSource.length>0&&(this.option.editor_style_rules.definitions=this.styleSource.filter(i=>i.name&&i.name.trim().length>0).map(i=>(typeof i.classes=="string"&&(i.classes=i.classes.split(" ")),i))),this.http.post(_t,this.option,{context:new z().set(P,this)}).subscribe()}onSpinner(e){this.submitted=e}static{this.\u0275fac=function(i){return new(i||n)(k(B))}}static{this.\u0275cmp=x({type:n,selectors:[["app-site-editor"]],standalone:!1,decls:47,vars:8,consts:[["ngForm","ngForm"],[3,"ngSubmit"],[1,"mb-3","row"],["for","markdownSupport",1,"label","col-form-label","col-12","col-md-2"],[1,"col-12","col-md-10","d-flex","flex-column"],["id","markdownSupport","name","editor_markdown_support","status","primary",3,"checkedChange","checked"],["for","htmlSupport",1,"label","col-form-label","col-12","col-md-2"],["id","htmlSupport","name","editor_html_support","status","primary",3,"checkedChange","checked"],["target","_blank","href","https://ckeditor.com/docs/ckeditor5/latest/features/html/general-html-support.html",1,"label"],["for","htmlEmbedSupport",1,"label","col-form-label","col-12","col-md-2"],["id","htmlEmbedSupport","name","editor_html_embed_support","status","primary",3,"checkedChange","checked"],["target","_blank","href","https://ckeditor.com/docs/ckeditor5/latest/features/html/html-embed.html",1,"label"],[3,"settings","source"],["target","_blank","href","https://ckeditor.com/docs/ckeditor5/latest/features/style.html",1,"label"],[1,"row"],[1,"label","col-form-label","col-2"],[1,"col-10"],["status","primary","size","small","type","submit","nbButton","",3,"disabled"]],template:function(i,t){if(i&1){let l=E();o(0,"form",1,0),w("ngSubmit",function(a){return c(l),_(t.action(a))}),o(2,"nb-card-body")(3,"div",2)(4,"label",3),s(5,"\u5F00\u542FMarkdown\u652F\u6301"),r(),o(6,"div",4)(7,"nb-toggle",5),b("checkedChange",function(a){return c(l),C(t.option.editor_markdown_support,a)||(t.option.editor_markdown_support=a),_(a)}),r()()(),o(8,"div",2)(9,"label",6),s(10,"\u5F00\u542F\u901A\u7528HTML\u652F\u6301"),r(),o(11,"div",4)(12,"nb-toggle",7),b("checkedChange",function(a){return c(l),C(t.option.editor_html_support,a)||(t.option.editor_html_support=a),_(a)}),r(),o(13,"p")(14,"a",8),s(15,"\u67E5\u770B\u6587\u6863"),r()()()(),o(16,"div",2)(17,"label",9),s(18,"\u5F00\u542FHTML\u5D4C\u5165\u652F\u6301"),r(),o(19,"div",4)(20,"nb-toggle",10),b("checkedChange",function(a){return c(l),C(t.option.editor_html_embed_support,a)||(t.option.editor_html_embed_support=a),_(a)}),r(),o(21,"p")(22,"a",11),s(23,"\u67E5\u770B\u6587\u6863"),r()()()()(),o(24,"nb-card-body")(25,"div",2)(26,"label",9),s(27,"\u901A\u7528HTML\u89C4\u5219"),r(),o(28,"div",4),h(29,"angular2-smart-table",12),o(30,"p")(31,"a",8),s(32,"\u67E5\u770B\u6587\u6863"),r()()()(),o(33,"div",2)(34,"label",9),s(35,"Style\u89C4\u5219"),r(),o(36,"div",4),h(37,"angular2-smart-table",12),o(38,"p")(39,"a",13),s(40,"\u67E5\u770B\u6587\u6863"),r()()()()(),o(41,"nb-card-footer")(42,"div",14),h(43,"label",15),o(44,"div",16)(45,"button",17),s(46,"\u4FDD\u5B58"),r()()()()()}if(i&2){let l=S(1);m(7),f("checked",t.option.editor_markdown_support),m(5),f("checked",t.option.editor_html_support),m(8),f("checked",t.option.editor_html_embed_support),m(9),p("settings",t.settings)("source",t.htmlSource),m(8),p("settings",t.styleSettings)("source",t.styleSource),m(8),p("disabled",t.submitted||!l.valid)}},dependencies:[O,N,q,F,U,I,ne,te],encapsulation:2})}}return n})();var hn=[{path:"option",title:"\u9009\u9879",component:bt},{path:"setting",component:kt,children:[{path:"",component:vt},{path:"content",component:xt},{path:"media",component:St},{path:"general",component:Ft},{path:"editor",component:Mt}]},{path:"role",title:"\u89D2\u8272",component:yt}],Mi=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ae({type:n})}static{this.\u0275inj=re({imports:[pe,Re.forChild(hn),ye,tt,Xe,Et,gt,ft]})}}return n})();export{Mi as SystemModule};
