"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[140],{916:(W,k,u)=>{u.d(k,{C:()=>A});var a=u(5732),b=u(8023),T=u(2324),_=u(4537);let A=(()=>{class v{constructor(Z){this.http=Z}upload(Z){const D={};return Z.forEach(f=>{const E=new FormData;E.append("file",f,f.name);const F=new a.aW("POST",T.UE,E,{responseType:"json",reportProgress:!0}),N=new b.x,m=new b.x;(new Date).getTime(),this.http.request(F).subscribe({next(d){if(d.type===a.dt.UploadProgress){const g=Math.round(100*d.loaded/d.total);N.next(g)}else d instanceof a.Zn&&(m.next(d.body),N.complete())},error(d){m.next(d),N.complete()}}),D[f.name]={response:m,progress:N.asObservable()}}),D}}return v.\u0275fac=function(Z){return new(Z||v)(_.LFG(a.eN))},v.\u0275prov=_.Yz7({token:v,factory:v.\u0275fac}),v})()},3140:(W,k,u)=>{u.r(k),u.d(k,{DecorationModule:()=>Vt});var a=u(8692),b=u(5732),T=u(1995),_=u(4945),A=u(2147),v=u(3151),I=u(4970),Z=u(1528),D=u(7969),f=u(92),E=u(8849);const J="/theme/upload";var S=u(9024),t=u(4537),U=u(6221),V=u(5729),l=u(9467),q=u(4350);function X(i,c){if(1&i&&(t.TgZ(0,"nb-option",44),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function tt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",40)(1,"nb-select",41),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.nav.id=o)}),t.YNc(2,X,2,2,"nb-option",42),t.qZA(),t.TgZ(3,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editor())}),t._uU(4,"\u7f16\u8f91"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.nav.id),t.xp6(1),t.Q6J("ngForOf",e.navigate),t.xp6(1),t.Q6J("disabled",e.nav.id<1)}}function et(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"nb-checkbox",53),t.NdJ("checkedChange",function(o){const r=t.CHM(e).$implicit;return t.KtG(r.checked=o)}),t._uU(1),t.qZA()}if(2&i){const e=c.$implicit,n=t.oxw().$implicit;t.Q6J("checked",e.checked),t.xp6(1),t.hij(" ","post"==n.type?e.title:e.name," ")}}function nt(i,c){if(1&i&&(t.TgZ(0,"nb-option",44),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.title||e.name," ")}}function ot(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"nb-accordion-item")(1,"nb-accordion-item-header"),t._uU(2),t.qZA(),t.TgZ(3,"nb-accordion-item-body")(4,"form")(5,"div",45)(6,"nb-tabset")(7,"nb-tab",46)(8,"div",47),t.YNc(9,et,2,2,"nb-checkbox",34),t.qZA()(),t.TgZ(10,"nb-tab",48)(11,"div")(12,"label"),t._UZ(13,"input",49),t.qZA(),t.TgZ(14,"nb-autocomplete",50,51),t.NdJ("selectedChange",function(o){const r=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.selectSearchItem(r.typeName,o))}),t.YNc(16,nt,2,2,"nb-option",42),t.ALo(17,"async"),t.qZA()()()()(),t.TgZ(18,"div",52)(19,"button",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.addToNav(s.typeName))}),t._uU(20,"\u6dfb\u52a0\u5230\u5bfc\u822a"),t.qZA()()()()()}if(2&i){const e=c.$implicit,n=t.MAs(15),o=t.oxw();t.xp6(2),t.hij(" ",e.label," "),t.xp6(7),t.Q6J("ngForOf",e.defaultOptions),t.xp6(1),t.Q6J("formGroup",o.searchGroups),t.xp6(3),t.Q6J("formControlName",e.typeName)("nbAutocomplete",n),t.xp6(1),t.Q6J("handleDisplayFn",o.displaySearch),t.xp6(2),t.Q6J("ngForOf",t.lcZ(17,8,o.searchGroupResult[e.typeName])),t.xp6(3),t.Q6J("disabled",o.disabled(e.typeName))}}function it(i,c){1&i&&(t.TgZ(0,"p",55),t._uU(1," \u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a! "),t.qZA())}function st(i,c){if(1&i&&(t.ynx(0),t.YNc(1,it,2,0,"p",54),t.BQk()),2&i){t.oxw();const e=t.MAs(48);t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.required)}}function at(i,c){1&i&&t.GkF(0)}const G=function(i){return{node:i}};function rt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",56),t.NdJ("cdkDragMoved",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.dragMoved(o))}),t.YNc(1,at,1,0,"ng-container",57),t.qZA()}if(2&i){const e=c.$implicit;t.oxw();const n=t.MAs(70);t.Q6J("cdkDragData",e.nodeId),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(3,G,e))}}function ct(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"nb-checkbox",53),t.NdJ("checkedChange",function(o){const r=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.nav.themeNavigationLocation[r.alias]=o)}),t._uU(1),t.qZA()}if(2&i){const e=c.$implicit,n=t.oxw();t.Q6J("checked",n.nav.themeNavigationLocation[e.alias]),t.xp6(1),t.Oqu(e.name)}}function dt(i,c){if(1&i&&(t.TgZ(0,"nb-option",44),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function lt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",58)(1,"label",64),t._uU(2),t.qZA(),t.TgZ(3,"div",65)(4,"nb-select",66),t.NdJ("ngModelChange",function(o){const r=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.themeNavigationLocation[r.alias]=o)}),t.YNc(5,dt,2,2,"nb-option",42),t.qZA()()()}if(2&i){const e=c.$implicit,n=c.index,o=t.oxw(2);t.xp6(1),t.MGl("for","nav_location_",n,""),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.MGl("name","nav_location_",n,""),t.Q6J("ngModel",o.themeNavigationLocation[e.alias]),t.xp6(1),t.Q6J("ngForOf",o.navigate)}}function ut(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"form",20),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveLocation())}),t.TgZ(1,"nb-card")(2,"nb-card-header"),t._uU(3,"\u83dc\u5355\u4f4d\u7f6e"),t.qZA(),t.TgZ(4,"nb-card-body")(5,"div",58)(6,"label",59),t._uU(7,"\u4e3b\u9898\u83dc\u5355\u4f4d\u7f6e"),t.qZA(),t.TgZ(8,"label",60),t._uU(9,"\u5df2\u6307\u6d3e\u7684\u83dc\u5355"),t.qZA()(),t.YNc(10,lt,6,5,"div",61),t.qZA(),t.TgZ(11,"nb-card-footer",62)(12,"button",63),t._uU(13,"\u4fdd\u5b58\u8bbe\u7f6e"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.themeNavigation),t.xp6(2),t.Q6J("disabled",e.submitted)}}function pt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",72)(1,"label",73),t._uU(2,"URL"),t.qZA(),t.TgZ(3,"input",74),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw().node;return t.KtG(s.url=o)}),t.qZA()()}if(2&i){const e=t.oxw().node;t.xp6(1),t.MGl("for","custom_link_id_",e.nodeId,""),t.xp6(2),t.MGl("id","custom_link_id_",e.nodeId,""),t.Q6J("name",e.nodeId)("ngModel",e.url)}}function gt(i,c){1&i&&t.GkF(0)}function mt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",56),t.NdJ("cdkDragMoved",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.dragMoved(o))}),t.YNc(1,gt,1,0,"ng-container",57),t.qZA()}if(2&i){const e=c.$implicit;t.oxw(3);const n=t.MAs(70);t.Q6J("cdkDragData",e.nodeId),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(3,G,e))}}function _t(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",78),t.NdJ("cdkDropListDropped",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.drop(o))}),t.YNc(1,mt,2,5,"div",30),t.qZA()}if(2&i){const e=t.oxw().node,n=t.oxw();t.Q6J("cdkDropListData",e.children)("id",e.nodeId)("cdkDropListConnectedTo",n.dropTargetIds)("cdkDropListSortingDisabled",!0),t.xp6(1),t.Q6J("ngForOf",e.children)}}function ht(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",67)(1,"nb-accordion")(2,"nb-accordion-item")(3,"nb-accordion-item-header",68)(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"div",69),t._uU(7),t.qZA()(),t.TgZ(8,"nb-accordion-item-body")(9,"form",70),t.YNc(10,pt,4,4,"div",71),t.TgZ(11,"div",72)(12,"label",73),t._uU(13,"\u5bfc\u822a\u540d\u79f0"),t.qZA(),t.TgZ(14,"input",74),t.NdJ("ngModelChange",function(o){const r=t.CHM(e).node;return t.KtG(r.title=o)}),t.qZA()(),t.TgZ(15,"div")(16,"button",75),t.NdJ("click",function(){const s=t.CHM(e).node,r=t.oxw();return t.KtG(r.remove(s.nodeId))}),t._uU(17,"\u79fb\u9664"),t.qZA(),t._uU(18," \xa0|\xa0 "),t.TgZ(19,"button",76),t._uU(20,"\u53d6\u6d88"),t.qZA()()()()()(),t.YNc(21,_t,2,5,"div",77),t.qZA()}if(2&i){const e=c.node,n=t.oxw();t.uIk("data-id",e.nodeId)("id","node-"+e.nodeId),t.xp6(5),t.Oqu(e.title),t.xp6(2),t.Oqu(n.typeMapName[e.type]),t.xp6(3),t.Q6J("ngIf","link"==e.type),t.xp6(2),t.MGl("for","custom_link_name_",e.nodeId,""),t.xp6(2),t.MGl("id","custom_link_name_",e.nodeId,""),t.Q6J("name",e.nodeId)("ngModel",e.title),t.xp6(7),t.Q6J("ngIf",e.children.length>0)}}let ft=(()=>{class i{constructor(e,n,o,s,r){this.route=e,this.http=n,this.document=o,this.config=s,this.sidebar=r,this.searchResult={},this.navigate=[],this.themeNavigation=[],this.themeNavigationLocation={},this.dropTargetIds=[],this.nodeLookup={},this.submitted=!1,this.custom={link:"",title:""},this.typeMapName={page:"\u9875\u9762",post:"\u6587\u7ae0",custom:"\u81ea\u5b9a\u4e49\u94fe\u63a5",category:"\u5206\u7c7b"},this.defaultNode={nodeId:"demo",title:"\u793a\u4f8b1",type:"custom",children:[]},this.nav={id:0,name:"",nodes:[this.defaultNode],themeNavigationLocation:{}},this.searchGroups=new f.cw({}),this.searchGroupResult={},this.accordionItems=[]}ngAfterViewInit(){(0,T.H)(0).subscribe(e=>{this.sidebar.getSidebarState("menu-sidebar").subscribe(n=>{"expanded"==n&&this.sidebar.compact("menu-sidebar")})})}onSpinner(e){this.submitted=e}ngOnInit(){let e=this.config.taxonomies(),n=this.config.postTypes(),o=[];for(let s in n)n[s].visibility.showNavigation&&(o.push({label:n[s].label,type:"post",name:s,typeName:"post_"+s,defaultOptions:[]}),this.searchGroups.addControl("post_"+s,new f.NI("")));for(let s in e)e[s].visibility.showNavigation&&(o.push({label:e[s].label,type:"taxonomy",name:s,typeName:"taxonomy_"+s,defaultOptions:[]}),this.searchGroups.addControl("taxonomy_"+s,new f.NI("")));for(let s of o)this.searchGroupResult[s.typeName]=this.searchGroups.controls[s.typeName].valueChanges.pipe((0,A.x)(),(0,v.b)(500),(0,I.h)(p=>!!p),(0,Z.w)(p=>this.getObjects(p,s.name,s.type)));this.accordionItems=o,this.http.get("/navigate/structure").subscribe(s=>{for(let r in s.dataSet)this.accordionItems.forEach(p=>{p.typeName===r&&(p.defaultOptions=s.dataSet[r])});this.themeNavigation=s.themeNavigation,this.themeNavigationLocation=s.themeNavigationLocation,this.navigate=s.navigate}),this.prepareDragDrop(this.nav.nodes)}editor(){this.http.get("/navigate/{id}",{params:{id:this.nav.id}}).subscribe(e=>{this.nav=e.navigation,this.nav.nodes.length<1&&this.nav.nodes.push(this.defaultNode),this.nav.themeNavigationLocation={},this.themeNavigation.forEach(n=>{this.nav.themeNavigationLocation[n.alias]=this.themeNavigationLocation[n.alias]==this.nav.id}),this.prepareDragDrop(this.nav.nodes)})}prepareDragDrop(e){e.forEach(n=>{this.dropTargetIds.includes(n.nodeId)||this.dropTargetIds.push(n.nodeId),this.nodeLookup[n.nodeId]=n,this.prepareDragDrop(n.children)})}dragMoved(e){(0,_.of)(e).pipe((0,v.b)(50)).subscribe(n=>{var o;let s=this.document.elementFromPoint(n.pointerPosition.x,n.pointerPosition.y);if(!s)return void this.clearDragInfo();let r=s.classList.contains("node-item")?s:s.closest(".node-item");if(!r)return void this.clearDragInfo();this.dropActionTodo={targetId:null!==(o=r.getAttribute("data-id"))&&void 0!==o?o:""};const p=r.getBoundingClientRect(),w=p.height/3;this.dropActionTodo.action=n.pointerPosition.y-p.top<w?"before":n.pointerPosition.y-p.top>2*w?"after":"inside",this.showDragInfo()})}drop(e){if(!this.dropActionTodo)return;const n=e.item.data,o=e.previousContainer.id,s=this.getParentNodeId(this.dropActionTodo.targetId,this.nav.nodes,"main");console.log("\nmoving\n["+n+"] from list ["+o+"]","\n["+this.dropActionTodo.action+"]\n["+this.dropActionTodo.targetId+"] from list ["+s+"]");const r=this.nodeLookup[n],p="main"!=o?this.nodeLookup[o].children:this.nav.nodes,w="main"!=s?this.nodeLookup[s].children:this.nav.nodes;let P=p.findIndex(M=>M.nodeId===n);switch(p.splice(P,1),this.dropActionTodo.action){case"before":case"after":const M=w.findIndex(y=>{var L;return y.nodeId===(null===(L=this.dropActionTodo)||void 0===L?void 0:L.targetId)});w.splice("before"==this.dropActionTodo.action?M:M+1,0,r);break;case"inside":this.nodeLookup[this.dropActionTodo.targetId].children.push(r),this.nodeLookup[this.dropActionTodo.targetId].isExpanded=!0}this.clearDragInfo(!0)}getParentNodeId(e,n,o){for(let s of n){if(s.nodeId==e)return o;let r=this.getParentNodeId(e,s.children,s.nodeId);if(r)return r}return""}showDragInfo(){var e;this.clearDragInfo(),this.dropActionTodo&&(null===(e=document.getElementById("node-"+this.dropActionTodo.targetId))||void 0===e||e.classList.add("drop-"+this.dropActionTodo.action))}clearDragInfo(e=!1){e&&(this.dropActionTodo=void 0),this.document.querySelectorAll(".drop-before").forEach(n=>n.classList.remove("drop-before")),this.document.querySelectorAll(".drop-after").forEach(n=>n.classList.remove("drop-after")),this.document.querySelectorAll(".drop-inside").forEach(n=>n.classList.remove("drop-inside"))}delete(){window.confirm("\u786e\u8ba4\u5220\u9664\u83dc\u5355 ["+this.nav.name+"]\u5417\uff1f")&&this.http.post("/navigate/{id}/delete",this.nav).subscribe(e=>{this.create()})}save(){this.http.post("/navigate/save",this.nav,{context:(new b.qT).set(S.a,this)}).subscribe(e=>{})}saveLocation(){this.http.post("/navigate/save/location",{location:this.themeNavigationLocation},{context:(new b.qT).set(S.a,this)}).subscribe(e=>{})}addToNav(e){if("custom"===e){let n="custom-"+this.custom.title,o={nodeId:n,title:this.custom.title,type:e,url:this.custom.link,children:[]};this.custom.title="",this.custom.link="",this.nav.nodes.push(o),this.dropTargetIds.push(n),this.nodeLookup[n]=o}else this.accordionItems.forEach(n=>{n.typeName==e&&n.defaultOptions.forEach(o=>{o.checked&&(this.selectedItem(o),o.checked=!1)})}),this.searchResult[e]&&(this.selectedItem(this.searchResult[e]),this.searchResult[e]=void 0,this.searchGroups.controls[e].setValue(""))}selectedItem(e){let n=e.type||e.taxonomy,o="node-"+n+"-"+e.id;if(null==this.nodeLookup[o]){let s={nodeId:o,title:e.title||e.name,type:n,objectId:e.id,children:[]};this.nav.nodes.push(s),this.dropTargetIds.push(o),this.nodeLookup[o]=s}}remove(e){this.removeNode(e,this.nav.nodes),delete this.dropTargetIds[this.dropTargetIds.indexOf(e)],delete this.nodeLookup[e]}removeNode(e,n){n.forEach((o,s)=>{o.nodeId==e?n.splice(s,1):o.children.length>0&&this.removeNode(e,o.children)})}create(){this.nav={id:0,name:"",nodes:[this.defaultNode],themeNavigationLocation:{}},this.dropTargetIds=[],this.nodeLookup={},this.prepareDragDrop(this.nav.nodes)}getObjects(e,n,o){switch(o){case"taxonomy":return this.http.get(E.WP,{params:{taxonomy:n,name:e,page:1,size:50}}).pipe((0,D.U)(s=>s.records));case"post":return this.http.get(E.vA,{params:{type:n,title:e,page:1,size:50}}).pipe((0,D.U)(s=>s.records));default:return(0,_.of)([])}}navigationLocation(e){console.log(e)}displaySearch(e){return"string"==typeof e?e:e.title||e.name}selectSearchItem(e,n){this.searchResult[e]=n}disabled(e){let n=!0;return this.accordionItems.forEach(o=>{o.defaultOptions.forEach(s=>{s.checked&&(n=!1)})}),this.searchResult[e]&&(n=!1),n}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(U.gz),t.Y36(b.eN),t.Y36(a.K0),t.Y36(V.eB),t.Y36(l.lzT))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-navigation"]],decls:71,vars:17,consts:[[1,"row"],[1,"col-12"],[1,"d-flex","flex-md-row","justify-content-between"],["class","d-flex",4,"ngIf"],[1,""],["nbButton","","status","primary"],["icon","plus-outline"],[1,"col-12","col-xl-5"],["multi","true",1,"interface-complementary-area"],["customForm","ngForm"],[1,"mb-3","row"],["for","custom_link",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["id","custom_link","required","","name","link","placeholder","https://","fullWidth","","status","primary","nbInput","",3,"ngModel","ngModelChange"],["for","custom_link_name",1,"label","col-sm-3","col-form-label"],["id","custom_link_name","required","","name","link_name","fullWidth","","status","primary","nbInput","",3,"ngModel","ngModelChange"],[1,"mb-3","text-right"],["nbButton","","status","primary",3,"disabled","click"],[4,"ngFor","ngForOf"],[1,"col-12","col-xl-7"],[3,"ngSubmit"],["navForm","ngForm"],[1,"form-group","row"],["for","nav_name",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["id","nav_name","required","required","name","navName","status","primary","nbInput","",3,"status","ngModel","ngModelChange"],["navName","ngModel"],[4,"ngIf"],[1,"pt-4","label"],["cdkDropList","",1,"node_container",3,"cdkDropListData","id","cdkDropListConnectedTo","cdkDropListSortingDisabled","cdkDropListDropped"],["cdkDrag","",3,"cdkDragData","cdkDragMoved",4,"ngFor","ngForOf"],[1,"py-2",2,"font-size","15px","font-weight","bold"],["for","nav_location",1,"label","col-sm-2","col-form-label"],["id","nav_location",1,"col-sm-10","d-flex","flex-column"],[3,"checked","checkedChange",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],["nbButton","","type","button","status","danger",3,"disabled","click"],["type","submit","nbButton","","status","primary",3,"disabled"],[3,"ngSubmit",4,"ngIf"],["tmplNode",""],[1,"d-flex"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["nbButton","","status","control",1,"mx-2",3,"disabled","click"],[3,"value"],[1,"form-group"],["tabTitle","\u6700\u8fd1",1,"px-0"],[1,"d-flex","flex-column"],["tabTitle","\u641c\u7d22",1,"px-0",3,"formGroup"],["nbInput","","status","primary","fullWidth","",3,"formControlName","nbAutocomplete"],[3,"handleDisplayFn","selectedChange"],["searchAuto",""],[1,"form-group","text-right"],[3,"checked","checkedChange"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"],["cdkDrag","",3,"cdkDragData","cdkDragMoved"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"row","mb-3"],[1,"label","col-2","col-form-label"],[1,"label","col-10","col-form-label"],["class","row mb-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],["nbButton","","status","primary","type","submit",3,"disabled"],[1,"label","col-2","col-form-label",3,"for"],[1,"col-10"],[3,"name","ngModel","ngModelChange"],[1,"node-item"],[1,"justify-content-between"],[1,"mr-4"],["ngForm",""],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"label","col-form-label",3,"for"],["nbInput","","fullWidth","","status","primary",3,"id","name","ngModel","ngModelChange"],["nbButton","","size","tiny","status","danger",3,"click"],["nbButton","","size","tiny","status","primary"],["class","node-children","cdkDropList","",3,"cdkDropListData","id","cdkDropListConnectedTo","cdkDropListSortingDisabled","cdkDropListDropped",4,"ngIf"],["cdkDropList","",1,"node-children",3,"cdkDropListData","id","cdkDropListConnectedTo","cdkDropListSortingDisabled","cdkDropListDropped"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nb-card")(3,"nb-card-body")(4,"div",2),t.YNc(5,tt,5,3,"div",3),t.TgZ(6,"div",4)(7,"button",5),t._UZ(8,"nb-icon",6),t._uU(9," \u521b\u5efa\u65b0\u5bfc\u822a "),t.qZA()()()()()(),t.TgZ(10,"div",7)(11,"nb-card")(12,"nb-card-header"),t._uU(13," \u6dfb\u52a0\u5bfc\u822a\u9879 "),t.qZA(),t.TgZ(14,"nb-card-body")(15,"nb-accordion",8)(16,"nb-accordion-item")(17,"nb-accordion-item-header"),t._uU(18," \u81ea\u5b9a\u4e49\u94fe\u63a5 "),t.qZA(),t.TgZ(19,"nb-accordion-item-body")(20,"form",null,9)(22,"div",10)(23,"label",11),t._uU(24,"\u94fe\u63a5"),t.qZA(),t.TgZ(25,"div",12)(26,"input",13),t.NdJ("ngModelChange",function(s){return n.custom.link=s}),t.qZA()()(),t.TgZ(27,"div",10)(28,"label",14),t._uU(29,"\u94fe\u63a5\u540d\u79f0"),t.qZA(),t.TgZ(30,"div",12)(31,"input",15),t.NdJ("ngModelChange",function(s){return n.custom.title=s}),t.qZA()()(),t.TgZ(32,"div",16)(33,"button",17),t.NdJ("click",function(){return n.addToNav("custom")}),t._uU(34,"\u6dfb\u52a0\u5230\u5bfc\u822a"),t.qZA()()()()(),t.YNc(35,ot,21,10,"nb-accordion-item",18),t.qZA()()()(),t.TgZ(36,"div",19)(37,"form",20,21),t.NdJ("ngSubmit",function(){return n.save()}),t.TgZ(39,"nb-card")(40,"nb-card-header"),t._uU(41," \u5bfc\u822a\u7ed3\u6784 "),t.qZA(),t.TgZ(42,"nb-card-body")(43,"div",22)(44,"label",23),t._uU(45,"\u83dc\u5355\u540d\u79f0"),t.qZA(),t.TgZ(46,"div",24)(47,"input",25,26),t.NdJ("ngModelChange",function(s){return n.nav.name=s}),t.qZA(),t.YNc(49,st,2,1,"ng-container",27),t.qZA()(),t.TgZ(50,"p",28),t._uU(51,"\u62d6\u653e\u5404\u4e2a\u9879\u76ee\u5230\u60a8\u559c\u6b22\u7684\u987a\u5e8f\uff0c\u70b9\u51fb\u53f3\u4fa7\u7684\u7bad\u5934\u53ef\u8fdb\u884c\u66f4\u8be6\u7ec6\u7684\u8bbe\u7f6e\u3002"),t.qZA(),t.TgZ(52,"div",29),t.NdJ("cdkDropListDropped",function(s){return n.drop(s)}),t.YNc(53,rt,2,5,"div",30),t.qZA()(),t.TgZ(54,"nb-card-footer")(55,"div",31),t._uU(56,"\u83dc\u5355\u8bbe\u7f6e"),t.qZA(),t.TgZ(57,"div",22)(58,"label",32),t._uU(59,"\u663e\u793a\u4f4d\u7f6e"),t.qZA(),t.TgZ(60,"div",33),t.YNc(61,ct,2,2,"nb-checkbox",34),t.qZA()()(),t.TgZ(62,"nb-card-footer")(63,"div",35)(64,"button",36),t.NdJ("click",function(){return n.delete()}),t._uU(65,"\u5220\u9664\u5bfc\u822a"),t.qZA(),t.TgZ(66,"button",37),t._uU(67,"\u4fdd\u5b58\u5bfc\u822a"),t.qZA()()()()(),t.YNc(68,ut,14,2,"form",38),t.qZA()(),t.YNc(69,ht,22,10,"ng-template",null,39,t.W1O)),2&e){const o=t.MAs(21),s=t.MAs(38),r=t.MAs(48);t.xp6(5),t.Q6J("ngIf",n.navigate.length>0),t.xp6(21),t.Q6J("ngModel",n.custom.link),t.xp6(5),t.Q6J("ngModel",n.custom.title),t.xp6(2),t.Q6J("disabled",!o.valid),t.xp6(2),t.Q6J("ngForOf",n.accordionItems),t.xp6(12),t.Q6J("status",r.dirty?r.invalid?"danger":"success":"primary")("ngModel",n.nav.name),t.xp6(2),t.Q6J("ngIf",r.invalid&&r.touched),t.xp6(3),t.Q6J("cdkDropListData",n.nav.nodes)("id","main")("cdkDropListConnectedTo",n.dropTargetIds)("cdkDropListSortingDisabled",!0),t.xp6(1),t.Q6J("ngForOf",n.nav.nodes),t.xp6(8),t.Q6J("ngForOf",n.themeNavigation),t.xp6(3),t.Q6J("disabled",n.nav.id<1||n.nav.name.length<1),t.xp6(2),t.Q6J("disabled",!s.valid||n.submitted),t.xp6(2),t.Q6J("ngIf",n.themeNavigation.length>0)}},dependencies:[a.sg,a.O5,a.tP,f._Y,f.Fj,f.JJ,f.JL,f.Q7,f.On,f.F,f.sg,f.u,l.Asz,l.yKW,l.XWE,l.ndF,l.kyn,l.TR4,l.NTf,l.DPz,l.h8i,l.qCO,l.SaG,l.YZd,l.AvE,l.rs,l.q51,l.fMN,l.Xh,l.wNd,q.Wj,q.Zt,a.Ov],styles:["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */.node_container{padding:var(--accordion-padding);border-width:var(--accordion-header-border-width);border-style:var(--accordion-header-border-style);border-color:var(--accordion-header-border-color)}.node_container .cdk-drag-placeholder{display:none}.node_container .cdk-drag-preview{box-sizing:border-box;box-shadow:0 3px 3px -2px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;background:#fff;opacity:.3}.node_container .drop-inside{border-width:var(--accordion-header-border-width)!important;border-style:var(--accordion-header-border-style)!important;border-color:var(--text-success-color)!important}.node_container .drop-before{border-top-width:var(--accordion-header-border-width)!important;border-top-style:var(--accordion-header-border-style)!important;border-top-color:var(--text-success-color)!important}.node_container .drop-after{border-bottom-width:var(--accordion-header-border-width)!important;border-bottom-style:var(--accordion-header-border-style)!important;border-bottom-color:var(--text-success-color)!important}.node_container .node-item{background-color:var(--accordion-item-background-color);cursor:move}.node_container .node-children{position:relative;transition:height .2s;margin-left:40px}.node_container .item-notes{margin-left:20px;color:#aaa}.node_container nb-icon{cursor:pointer!important}.node_container nb-accordion-item-header{cursor:move}.node_container nb-accordion{margin:5px;border-width:var(--accordion-header-border-width);border-style:var(--accordion-header-border-style);border-color:var(--accordion-header-border-color)}\n"],encapsulation:2}),i})();var bt=u(5696),Q=u(3037),H=u(7660),Y=u(5998);const vt=["widgetSidebarBtn"],xt=["widgetItemComponent"];function Ct(i,c){if(1&i&&(t.TgZ(0,"label",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.label)}}function Tt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.insertWidget(s.name))}),t._UZ(1,"nb-icon",46),t.TgZ(2,"span",47),t._uU(3),t.qZA()()}if(2&i){const e=c.$implicit;t.xp6(1),t.Q6J("pack",e.icon.startsWith("fa-")?"fa":"")("icon",e.icon),t.xp6(2),t.Oqu(e.label)}}function Zt(i,c){if(1&i&&(t.TgZ(0,"div",40),t.YNc(1,Ct,2,1,"label",41),t.TgZ(2,"div",42),t.YNc(3,Tt,4,3,"div",43),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.slug),t.xp6(2),t.Q6J("ngForOf",e.widgets)}}function wt(i,c){if(1&i&&(t.ynx(0),t.YNc(1,Zt,4,2,"div",39),t.BQk()),2&i){const e=c.$implicit;t.xp6(1),t.Q6J("ngIf",e.widgets&&e.widgets.length>0)}}function yt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"widget-item",52,53),t.NdJ("focus",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectorWidget(o))})("blur",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.unselectWidget(o))}),t.qZA()}2&i&&t.Q6J("product",c.$implicit)}function At(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"nb-accordion",48),t.NdJ("focus",function(o){const r=t.CHM(e).index,p=t.oxw();return t.KtG(p.selectorBlock(o,r))}),t.TgZ(1,"nb-accordion-item")(2,"nb-accordion-item-header",49),t.NdJ("focus",function(o){const r=t.CHM(e).index,p=t.oxw();return t.KtG(p.selectorBlock(o,r))}),t._uU(3),t.qZA(),t.TgZ(4,"nb-accordion-item-body"),t.YNc(5,yt,2,1,"widget-item",50),t.TgZ(6,"button",51),t.NdJ("nbPopoverShowStateChange",function(o){const r=t.CHM(e).index,p=t.oxw();return t.KtG(p.quickToggle(o,r))}),t._UZ(7,"nb-icon",6),t.qZA()()()()}if(2&i){const e=c.$implicit,n=t.oxw(),o=t.MAs(48);t.xp6(3),t.hij(" ",e.label," "),t.xp6(2),t.Q6J("ngForOf",n.getBlockWidgets(e.name)),t.xp6(1),t.Q6J("nbPopover",o)}}function kt(i,c){if(1&i&&(t.TgZ(0,"nb-list-item"),t._UZ(1,"nb-icon",46),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&i){const e=c.$implicit;t.xp6(1),t.Q6J("pack",e.widget.icon.startsWith("fa-")?"fa":"")("icon",e.widget.icon),t.xp6(2),t.Oqu(e.widget.label)}}function Nt(i,c){if(1&i&&(t.TgZ(0,"nb-tab",54)(1,"nb-list",55),t.YNc(2,kt,4,3,"nb-list-item",21),t.qZA()()),2&i){const e=t.oxw();t.Q6J("tabTitle",e.blocks[e.selectBlockIndex].label||""),t.xp6(2),t.Q6J("ngForOf",e.getBlockWidgets(e.blocks[e.selectBlockIndex].name))}}function Mt(i,c){if(1&i&&(t.TgZ(0,"nb-card-header",56),t._UZ(1,"nb-icon",46),t.TgZ(2,"div",57)(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"label",58),t._uU(6),t.qZA()()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("pack",e.selectedWidget.product.widget.icon.startsWith("fa-")?"fa":"")("icon",e.selectedWidget.product.widget.icon),t.xp6(3),t.Oqu(e.selectedWidget.product.widget.label),t.xp6(2),t.Oqu(e.selectedWidget.product.widget.description)}}function It(i,c){if(1&i&&(t.TgZ(0,"nb-accordion-item")(1,"nb-accordion-item-header"),t._uU(2),t.qZA(),t.TgZ(3,"nb-accordion-item-body"),t._UZ(4,"control-container",60),t.qZA()()),2&i){const e=c.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.label),t.xp6(2),t.Q6J("form",n.selectedWidget.product.form)("controls",e.controls)}}function Dt(i,c){if(1&i&&(t.TgZ(0,"nb-accordion",59),t.YNc(1,It,5,3,"nb-accordion-item",21),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.selectedWidget.product.widget.sections)}}function Et(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.insertWidget(s.name,!0))}),t._UZ(1,"nb-icon",65),t.TgZ(2,"span",47),t._uU(3),t.qZA()()}if(2&i){const e=c.$implicit;t.xp6(1),t.Q6J("icon",e.icon),t.xp6(2),t.Oqu(e.label)}}function Ft(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"nb-card",61)(1,"nb-card-header",62)(2,"nb-form-field")(3,"input",18),t.NdJ("keyup",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.search(o))}),t.qZA(),t._UZ(4,"nb-icon",19),t.qZA()(),t.TgZ(5,"nb-card-body",63)(6,"div",42),t.YNc(7,Et,4,2,"div",43),t.qZA()(),t.TgZ(8,"nb-card-footer",62)(9,"button",64),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.widgetSidebarBtnRef.nativeElement.click())}),t._uU(10,"\u6d4f\u89c8\u5168\u90e8 "),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.historyWidgets)}}const Ot=["container"];function Jt(i,c){if(1&i&&t._UZ(0,"nb-icon",2),2&i){const e=t.oxw();t.Q6J("pack",e.product.widget.icon.startsWith("fa-")?"fa":"")("icon",e.product.widget.icon)}}let Wt=(()=>{class i{constructor(e,n,o){this.http=e,this.sidebar=n,this.document=o,this.widgets=[],this.widgetCategories=[],this.leftSidebarCompact=!1,this.blocks=[],this.hasHiddenWidgetSidebar=!0,this.hasHiddenSettingSidebar=!0,this.filterWidgetCategories=(0,_.of)([]),this.blockWidgets={},this.historyWidgets=[],this.selectBlockIndex=-1,this.leftSidebarCollapse=!1}ngOnInit(){const e=this.http.get("/widget/registered"),n=this.http.get("/widget/blocks");(0,bt.a)([e,n]).subscribe(([o,s])=>{this.widgets=o.widgets,o.categories.forEach(r=>{r.widgets=this.widgets.filter(p=>p.category==r.slug),r.widgets.forEach(p=>{p.icon||(p.icon=r.icon)})}),this.widgetCategories=o.categories,this.filterWidgetCategories=(0,_.of)(this.widgetCategories),this.historyWidgets=this.widgets.slice(0,6),this.blocks=s,s.length>0&&(this.selectBlockIndex=0),s.forEach(r=>{this.blockWidgets[r.name]=[],r.widgets.length>0&&r.widgets.forEach(p=>{const w=this.widgets.find(y=>{if(y.name==p.name)return y});if(!w)return;let P=w.sections.map(y=>y.controls),M={id:p.id,widget:Object.assign({},w),form:new f.cw((0,Q.T)(P.flat(1)))};for(const y in p.attributes)M.form.contains(y)&&M.form.controls[y].setValue(p.attributes[y],{emitEvent:!1});this.blockWidgets[r.name].push(M)})})})}ngAfterViewInit(){(0,T.H)(0).subscribe(e=>{this.sidebar.getSidebarState("menu-sidebar").subscribe(n=>{"compacted"==n?(this.leftSidebarCollapse=!1,this.leftSidebarCompact=!0):"collapsed"==n?(this.leftSidebarCompact=!1,this.leftSidebarCollapse=!0):this.sidebar.compact("menu-sidebar")})})}toggleWidgetSidebar(e){this.hasHiddenWidgetSidebar=!this.hasHiddenWidgetSidebar,this.hasHiddenWidgetSidebar||this.rollbackFilterWidgetCategories(),this.hasHiddenWidgetSidebar||(this.hasHiddenSettingSidebar=!0)}toggleSettingSidebar(e){this.hasHiddenSettingSidebar=!this.hasHiddenSettingSidebar,this.hasHiddenSettingSidebar||(this.hasHiddenWidgetSidebar=!0)}search(e){let n=e?e.target.value:"";if(""==n)return void(this.filterWidgetCategories=(0,_.of)(this.widgetCategories));let o=this.widgets.filter(s=>s.label.includes(n)||s.keywords.flat().includes(n));this.filterWidgetCategories=(0,_.of)([{slug:"",label:"",icon:"",widgets:o}])}quickToggle(e,n){e.isShown?(this.selectBlockIndex=n,this.hasHiddenWidgetSidebar||this.toggleWidgetSidebar(null)):this.rollbackFilterWidgetCategories()}selectorBlock(e,n){this.selectBlockIndex=n}selectorWidget(e){let n=e.target.id;for(let o of this.widgetItems)n==o.Id&&(this.selectedWidget&&this.selectedWidget.Id==n||(this.selectedWidget=o))}unselectWidget(e){if(console.log(e),e.relatedTarget){if("settingSidebarBtn"==e.relatedTarget.id)return;let o=e.relatedTarget.className;if(console.log(o),o.includes("sidebar-setting")||o.includes("tab-link")||o.includes("accordion")||o.includes("control-container"))return}this.selectedWidget=void 0}insertWidget(e,n=!1){let o=this.widgets.filter(s=>s.name===e).pop();if(this.selectBlockIndex>-1&&o){let s=o.sections.map(r=>r.controls);this.blockWidgets[this.blocks[this.selectBlockIndex].name].push({id:this.generateUUID(),widget:Object.assign({},o),form:new f.cw((0,Q.T)(s.flat(1)))}),n||(this.historyWidgets.unshift(o),this.historyWidgets.length>6&&this.historyWidgets.pop())}}getBlockWidgets(e){var n;return null!==(n=this.blockWidgets[e])&&void 0!==n?n:[]}save(e){const n={blocks:{},widgets:{}};let o=1;for(let s in this.blockWidgets)n.blocks[s]=[],this.blockWidgets[s].forEach(r=>{const p="widget-"+r.widget.name+"-"+o;n.blocks[s].push(p),n.widgets[p]={id:r.id,name:r.widget.name,attributes:r.form.getRawValue()},o++});this.http.post("/widget/saved",n).subscribe({})}rollbackFilterWidgetCategories(){this.filterWidgetCategories.subscribe(e=>{e.length!=this.widgetCategories.length&&(this.filterWidgetCategories=(0,_.of)(this.widgetCategories))})}generateUUID(){let e=(new Date).getTime();return typeof performance<"u"&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const s=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===o?s:3&s|8).toString(16)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.eN),t.Y36(l.lzT),t.Y36(a.K0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-widget"]],viewQuery:function(e,n){if(1&e&&(t.Gf(vt,5,t.SBq),t.Gf(xt,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.widgetSidebarBtnRef=o.first),t.iGM(o=t.CRH())&&(n.widgetItems=o)}},decls:49,vars:16,consts:[[1,"component-skeleton"],[1,"component-skeleton-body"],[1,"mb-0","position-relative"],[1,"d-flex","border-0","justify-content-between","align-items-center"],["nbButton","","id","widgetSidebarBtn",3,"status","click"],["widgetSidebarBtn",""],["icon","plus-outline"],[1,"d-flex","justify-content-end"],["nbButton","","status","danger",3,"click"],[1,"mx-2"],["nbButton","","status","primary","type","button","id","settingSidebarBtn",3,"click"],["icon","settings-2"],[1,"d-flex","flex-grow-1","overflow-auto",2,"overscroll-behavior-y","none"],[1,"col-12","col-xl-4","p-0","position-relative",3,"hidden"],[1,"d-flex","flex-column","h-100"],[1,"h-100"],[1,"position-relative","overflow-hidden","h-100"],[1,"h-100","mb-0","border-0","rounded-0","position-relative"],["nbInput","","fullWidth","",3,"keyup"],["nbSuffix","","icon","search-outline"],[1,"d-flex","flex-column","flex-grow-1"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","flex-grow-1","overflow-hidden","mx-auto"],[1,"block-list","h-100","position-relative"],[1,"p-0","rounded-0","border-0","bg-transparent","h-100"],[1,"row"],[1,"col-8","mx-auto"],["tabindex","0","class","mt-5",3,"focus",4,"ngFor","ngForOf"],["tabindex","0",1,"col-12","col-xl-3","p-0","position-relative","sidebar-setting",3,"hidden","blur"],[1,"position-relative","h-100"],[1,"h-100","mb-0","border-0","rounded-0"],[1,"p-0","h-100","overflow-hidden"],["class","p-0 h-100",3,"tabTitle",4,"ngIf"],["tabTitle","\u6302\u4ef6",1,"p-0","h-100","overflow-hidden"],[1,"p-0","h-100","d-flex","border-0","flex-column"],["class","d-flex",4,"ngIf"],[1,"d-flex","p-0","flex-column","h-100","flex-grow-1"],["multi","",4,"ngIf"],["quickInsertWidgetDialog",""],["class","sidebar-category",4,"ngIf"],[1,"sidebar-category"],["class","label col-form-label py-4",4,"ngIf"],[1,"d-flex","flex-row","flex-wrap"],["class","sidebar-widget-item",3,"click",4,"ngFor","ngForOf"],[1,"label","col-form-label","py-4"],[1,"sidebar-widget-item",3,"click"],[3,"pack","icon"],[1,"py-4"],["tabindex","0",1,"mt-5",3,"focus"],["tabindex","0",3,"focus"],["tabindex","0",3,"product","focus","blur",4,"ngFor","ngForOf"],["tabindex","0","nbButton","","fullWidth","","status","control","nbPopoverTrigger","click",3,"nbPopover","nbPopoverShowStateChange"],["tabindex","0",3,"product","focus","blur"],["widgetItemComponent",""],[1,"p-0","h-100",3,"tabTitle"],[1,"p-0","sidebar-setting-widgets-list"],[1,"d-flex"],[1,"d-flex","flex-column","ps-3"],[1,"label"],["multi",""],["tabindex","0",1,"control-container",3,"form","controls"],[1,"border-0","mb-0",2,"width","22rem"],[1,"border-0"],[1,"p-0"],["status","primary","outline","","fullWidth","","nbButton","",1,"rounded-0",3,"click"],[3,"icon"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nb-card",2)(3,"nb-card-header",3)(4,"button",4,5),t.NdJ("click",function(s){return n.toggleWidgetSidebar(s)}),t._UZ(6,"nb-icon",6),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(s){return n.save(s)}),t._uU(9,"\u66f4\u65b0"),t.qZA(),t._UZ(10,"div",9),t.TgZ(11,"button",10),t.NdJ("click",function(s){return n.toggleSettingSidebar(s)}),t._UZ(12,"nb-icon",11),t.qZA()()()(),t.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",16)(18,"nb-card",17)(19,"nb-card-header")(20,"nb-form-field")(21,"input",18),t.NdJ("keyup",function(s){return n.search(s)}),t.qZA(),t._UZ(22,"nb-icon",19),t.qZA()(),t.TgZ(23,"nb-card-body",20),t.YNc(24,wt,2,1,"ng-container",21),t.ALo(25,"async"),t.qZA()()()()()(),t.TgZ(26,"div",22)(27,"div",14)(28,"div",23)(29,"nb-card",24)(30,"nb-card-body")(31,"div",25)(32,"div",26),t.YNc(33,At,8,3,"nb-accordion",27),t.qZA()()()()()()(),t.TgZ(34,"div",28),t.NdJ("blur",function(s){return n.unselectWidget(s)}),t.TgZ(35,"div",14)(36,"div",15)(37,"div",29)(38,"nb-card",30)(39,"nb-card-body",31)(40,"nb-tabset",15),t.YNc(41,Nt,3,2,"nb-tab",32),t.TgZ(42,"nb-tab",33)(43,"nb-card",34),t.YNc(44,Mt,7,4,"nb-card-header",35),t.TgZ(45,"nb-card-body",36),t.YNc(46,Dt,2,1,"nb-accordion",37),t.qZA()()()()()()()()()()()()(),t.YNc(47,Ft,11,1,"ng-template",null,38,t.W1O)),2&e&&(t.ekj("sidebar-compact",n.leftSidebarCompact)("sidebar-collapse",n.leftSidebarCollapse),t.xp6(4),t.Q6J("status",n.hasHiddenWidgetSidebar?"primary":"control"),t.xp6(2),t.ekj("sidebar-widget-toggle-animation",!n.hasHiddenWidgetSidebar),t.xp6(8),t.Q6J("hidden",n.hasHiddenWidgetSidebar),t.xp6(10),t.Q6J("ngForOf",t.lcZ(25,14,n.filterWidgetCategories)),t.xp6(9),t.Q6J("ngForOf",n.blocks),t.xp6(1),t.Q6J("hidden",n.hasHiddenSettingSidebar),t.xp6(7),t.Q6J("ngIf",n.blocks.length>0),t.xp6(3),t.Q6J("ngIf",n.selectedWidget),t.xp6(2),t.Q6J("ngIf",n.selectedWidget))},dependencies:function(){return[a.sg,a.O5,l.Asz,l.yKW,l.XWE,l.ndF,l.kyn,l.TR4,l.ydg,l.DPz,l.h8i,l.qCO,l.SaG,l.YZd,l.AvE,l.fMN,l.jBG,l.yyc,l.zP_,l.qBV,H._,Bt,a.Ov]},styles:['.sidebar-widget-item[_ngcontent-%COMP%]{width:33.3%;color:var(--text-basic-color);display:flex;flex-direction:column;align-items:center;cursor:pointer}.sidebar-widget-item[_ngcontent-%COMP%]:focus   span[_ngcontent-%COMP%], .sidebar-widget-item[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:var(--text-hint-color);font-weight:700}[_nghost-%COMP%]{min-height:calc(100vh - var(--header-height) - 60px);overflow:hidden;position:absolute;inset:0}[_nghost-%COMP%]     nb-layout nb-layout-column{padding:0!important}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;flex:1}[_nghost-%COMP%]   .sidebar-expanded[_ngcontent-%COMP%]{left:var(--sidebar-width)!important}[_nghost-%COMP%]   .sidebar-compact[_ngcontent-%COMP%]{left:var(--sidebar-width-compact)!important}[_nghost-%COMP%]   .sidebar-collapse[_ngcontent-%COMP%]{left:0!important}[_nghost-%COMP%]   .component-skeleton[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:auto;max-height:100%;position:fixed;top:var(--header-height);right:0;bottom:0;left:var(--sidebar-width-compact)}[_nghost-%COMP%]   .component-skeleton-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex:0 1 100%;padding-bottom:60px}[_nghost-%COMP%]   .sidebar-widget-toggle-animation[_ngcontent-%COMP%]{transition:transform .3s;transform:rotate(45deg)}[_nghost-%COMP%]   nb-tabset[_ngcontent-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding-bottom:2.875rem!important}[_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%], [_nghost-%COMP%]   widget-item[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]:focus:after, [_nghost-%COMP%]   widget-item[_ngcontent-%COMP%]:focus:after, [_nghost-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]:focus:after{content:"";position:absolute;z-index:1;pointer-events:none;inset:1px;box-shadow:0 0 0 1.5px var(--color-danger-focus);border-radius:var(--accordion-border-radius);outline:2px solid transparent}']}),i})(),Bt=(()=>{class i{get Id(){return this.product.id}constructor(e,n){this.http=e,this.ds=n}ngOnInit(){this.render(this.product.form.getRawValue()),this.subscribeChange=this.product.form.valueChanges.subscribe(e=>{this.render(e)})}render(e){e.name=this.product.widget.name,this.http.post("/widget/{name}/rendered",e).subscribe(n=>{n.output&&(this.container.nativeElement.innerHTML=n.output)})}ngAfterViewInit(){}isMedia(){return["image","file","video","audio","cover","gallery"].includes(this.product.widget.name)}ngOnDestroy(){this.subscribeChange&&this.subscribeChange.unsubscribe(),this.subscribeChange=void 0}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.eN),t.Y36(Y.H7))},i.\u0275cmp=t.Xpm({type:i,selectors:[["widget-item"]],viewQuery:function(e,n){if(1&e&&t.Gf(Ot,5,t.SBq),2&e){let o;t.iGM(o=t.CRH())&&(n.container=o.first)}},hostVars:1,hostBindings:function(e,n){2&e&&t.uIk("id",n.Id)},inputs:{product:"product"},decls:3,vars:4,consts:[["container",""],["style","width: 100px; height: 100px",3,"pack","icon",4,"ngIf"],[2,"width","100px","height","100px",3,"pack","icon"]],template:function(e,n){1&e&&(t.TgZ(0,"div",null,0),t.YNc(2,Jt,1,2,"nb-icon",1),t.qZA()),2&e&&(t.Gre("widget-container widget-",n.product.widget.name,""),t.xp6(2),t.Q6J("ngIf",n.isMedia()))},dependencies:[a.O5,l.fMN],styles:["[_nghost-%COMP%]{display:block;position:relative;width:100%;margin:1.25rem 0}"]}),i})();var St=u(1784);function Ut(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.upgrade(o.alias))}),t._uU(1,"\u5347\u7ea7"),t.qZA()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("disabled",!e.isUpgrade||n.spinner)}}function qt(i,c){if(1&i&&t._UZ(0,"img",16),2&i){const e=t.oxw().$implicit,n=t.oxw();t.s9C("alt",e.name),t.Q6J("src",n.sanitizer.bypassSecurityTrustResourceUrl(e.image),t.LSH)}}function Qt(i,c){if(1&i&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function Pt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"nb-card")(2,"nb-card-header",9)(3,"div"),t._uU(4),t.qZA(),t.YNc(5,Ut,2,1,"button",10),t.qZA(),t.TgZ(6,"nb-card-body"),t.YNc(7,qt,1,2,"img",11),t.YNc(8,Qt,2,1,"div",12),t.qZA(),t.TgZ(9,"nb-card-footer",9)(10,"button",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.delete(s.alias))}),t._uU(11,"\u5220\u9664"),t.qZA(),t.TgZ(12,"button",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.activate(s.alias))}),t._uU(13),t.qZA()()()()}if(2&i){const e=c.$implicit,n=t.oxw();t.xp6(4),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.isUpgrade),t.xp6(2),t.Q6J("ngIf",e.image),t.xp6(1),t.Q6J("ngIf",!e.image),t.xp6(2),t.Q6J("disabled",e.enabled||n.spinner)("nbSpinner",n.spinner),t.xp6(2),t.Q6J("status",e.enabled?"warning":"primary")("nbSpinner",n.spinner)("disabled",n.spinner),t.xp6(1),t.hij(" ",e.enabled?"\u91cd\u88c5":"\u542f\u7528"," ")}}function Lt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"nb-card")(1,"nb-card-header"),t._uU(2,"\u5728\u7ebf\u4e0b\u8f7d"),t.qZA(),t.TgZ(3,"nb-card-body"),t._UZ(4,"input",18,19),t.qZA(),t.TgZ(6,"nb-card-footer",9)(7,"button",20),t.NdJ("click",function(){const s=t.CHM(e).dialogRef;return t.KtG(s.close())}),t._uU(8,"\u53d6\u6d88"),t.qZA(),t.TgZ(9,"button",21),t.NdJ("click",function(){const s=t.CHM(e).dialogRef,r=t.MAs(5),p=t.oxw();return t.KtG(p.openDownload(r.value,s))}),t._uU(10,"\u4e0b\u8f7d"),t.qZA()()()}}const Gt=function(){return["zip"]};let Ht=(()=>{class i{constructor(e,n,o,s,r,p){this.http=e,this.toast=n,this.route=o,this.sanitizer=s,this.dialog=r,this.sidebar=p,this.themes=[],this.title="",this.spinner=!1}onSpinner(e){this.spinner=e}ngOnInit(){this.getThemes(),this.route.data.subscribe(e=>{this.title=e.title})}getThemes(){this.http.get("/theme").subscribe(e=>{e.records.length>0&&(this.themes=e.records)})}activate(e){this.http.post("/theme/{name}/activate",{name:e}).subscribe(n=>{this.getThemes()})}upgrade(e){this.http.post("/theme/{name}/upgrade",{name:e}).subscribe(n=>{this.getThemes()})}upload(e){e.length<1?this.toast.danger("\u4e0a\u4f20\u7684\u4e3b\u9898\u6587\u4ef6\u4e3a\u7a7a","\u4e0a\u4f20\u4e3b\u9898"):this.http.post(J,{uri:e.pop()}).subscribe(n=>{this.getThemes()})}openDownload(e,n){/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e)?this.http.post(J,{uri:e}).subscribe(s=>{n.close()}):this.toast.danger("\u4e0d\u5408\u6cd5\u7684url\u94fe\u63a5","\u4e0a\u4f20\u4e3b\u9898")}delete(e){this.http.post("/theme/{name}/delete",{name:e}).subscribe(n=>{this.getThemes()})}ngAfterViewInit(){(0,T.H)(0).subscribe(e=>{this.sidebar.getSidebarState("menu-sidebar").subscribe(n=>{"compacted"!==n&&this.sidebar.compact("menu-sidebar")})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.eN),t.Y36(l.quB),t.Y36(U.gz),t.Y36(Y.H7),t.Y36(l.Gln),t.Y36(l.lzT))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-theme"]],decls:13,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex"],["nbButton","","status","danger",1,"me-2",3,"click"],[3,"suffix","status","finish"],["class","col-12 col-md-6 col-lg-4 col-xxl-3",4,"ngFor","ngForOf"],["dialogTpl",""],[1,"col-12","col-md-6","col-lg-4","col-xxl-3"],[1,"d-flex","justify-content-between"],["nbButton","","status","warning",3,"disabled","click",4,"ngIf"],["width","100%",3,"alt","src",4,"ngIf"],["class","description",4,"ngIf"],["nbButton","","status","danger",3,"disabled","nbSpinner","click"],["nbButton","",3,"status","nbSpinner","disabled","click"],["nbButton","","status","warning",3,"disabled","click"],["width","100%",3,"alt","src"],[1,"description"],["nbInput","","name","url","type","url","placeholder","\u4e0b\u8f7d\u5730\u5740"],["url",""],["nbButton","","status","basic",3,"click"],["nbButton","","status","primary",3,"click"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"nb-card")(3,"nb-card-header",2)(4,"span"),t._uU(5,"\u4e3b\u9898\u5217\u8868"),t.qZA(),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(12);return t.KtG(n.dialog.open(r))}),t._uU(8,"\u5728\u7ebf\u4e0b\u8f7d"),t.qZA(),t.TgZ(9,"app-upload",5),t.NdJ("finish",function(r){return n.upload(r)}),t.qZA()()()()(),t.YNc(10,Pt,14,10,"div",6),t.qZA(),t.YNc(11,Lt,11,0,"ng-template",null,7,t.W1O)}2&e&&(t.xp6(9),t.Q6J("suffix",t.DdM(3,Gt))("status","primary"),t.xp6(1),t.Q6J("ngForOf",n.themes))},dependencies:[a.sg,a.O5,l.Asz,l.yKW,l.XWE,l.ndF,l.DPz,l.h8i,l.Q7R,St.o],encapsulation:2}),i})();var Yt=u(7595),Kt=u(2521);function Rt(i,c){if(1&i&&(t.TgZ(0,"nb-tab",3)(1,"div",4),t._UZ(2,"control-container",5),t.qZA()()),2&i){const e=c.$implicit,n=c.index,o=t.oxw();t.Q6J("tabId",e.id)("lazyLoad",!1)("active",0==n)("tabTitle",e.label)("tabIndex",n),t.xp6(2),t.Q6J("controls",e.controls)("form",o.formGroup)}}let zt=(()=>{class i{constructor(e,n){this.http=e,this.sidebar=n,this.sections=[],this.spinner=!1,this.theme={},this.data={},this.values={},this.isChanged=!1}ngAfterViewInit(){(0,T.H)(0).subscribe(e=>{this.sidebar.getSidebarState("menu-sidebar").subscribe(n=>{"expanded"===n&&this.sidebar.compact("menu-sidebar")})})}ngOnInit(){this.http.get("/theme/customize").subscribe(e=>{const n=[];e.sections.forEach(o=>{n.push(...o.controls)}),this.formGroup=new f.cw((0,Q.T)(n));for(let o in this.formGroup.controls)this.values[o]=this.formGroup.controls[o].value;this.formGroup.valueChanges.subscribe(o=>{let s=!1;for(let r in o)o[r]!=this.values[r]?(this.data[r]=o[r]||null,s=!0):this.data.hasOwnProperty(r)&&delete this.data[r];this.isChanged=s}),this.sections=e.sections,this.theme=e.theme})}save(e){this.isChanged&&this.http.post("/theme/customized",{customized:this.data},{context:(new b.qT).set(S.a,this)}).subscribe(()=>{this.isChanged=!1;for(const n in this.data)this.values[n]=this.data[n]})}onSpinner(e){this.spinner=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.eN),t.Y36(l.lzT))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-theme-custom"]],decls:10,vars:3,consts:[[1,"d-flex","justify-content-between"],["size","small","status","success","nbButton","",3,"disabled","click"],["class","px-0",3,"tabId","lazyLoad","active","tabTitle","tabIndex",4,"ngFor","ngForOf"],[1,"px-0",3,"tabId","lazyLoad","active","tabTitle","tabIndex"],[1,"col-12","col-xl-6","mx-auto"],[3,"controls","form"]],template:function(e,n){1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-header")(2,"div",0)(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"button",1),t.NdJ("click",function(s){return n.save(s)}),t._uU(6,"\u4fdd\u5b58\u53d1\u5e03"),t.qZA()()(),t.TgZ(7,"nb-card-body")(8,"nb-tabset"),t.YNc(9,Rt,3,7,"nb-tab",2),t.qZA()()()),2&e&&(t.xp6(4),t.hij(" \u4f60\u6b63\u5728\u81ea\u4e49 ",n.theme.stylesheet," "),t.xp6(1),t.Q6J("disabled",n.spinner||!n.isChanged),t.xp6(4),t.Q6J("ngForOf",n.sections))},dependencies:[a.sg,l.Asz,l.yKW,l.ndF,l.kyn,l.TR4,l.DPz,H._],encapsulation:2}),i})();var $t=u(2047);const jt=[{path:"navigation",title:"\u5bfc\u822a",component:ft},{path:"widget",title:"\u6302\u4ef6",component:Wt},{path:"theme",title:"\u4e3b\u9898",component:Ht},{path:"custom",title:"\u81ea\u5b9a\u4e49",component:zt}];let Vt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[a.ez,Yt.O,U.Bz.forChild(jt),q._t,Kt.c,$t.s]}),i})()},1784:(W,k,u)=>{u.d(k,{o:()=>N});var a=u(4537),b=u(4967),T=u(916),_=u(9467),A=u(8692);const v=["file"];function I(m,x){if(1&m&&(a.TgZ(0,"nb-progress-bar",18),a.ALo(1,"async"),a._uU(2),a.qZA()),2&m){const d=a.oxw().$implicit,g=a.oxw();a.Q6J("status",g.messages[d.name]?"danger":"success")("displayValue",!g.messages[d.name])("value",a.lcZ(1,4,g.progress[d.name].progress)),a.xp6(2),a.hij(" ",g.messages[d.name]," ")}}function Z(m,x){if(1&m){const d=a.EpF();a.TgZ(0,"div",13)(1,"nb-icon",19),a.NdJ("click",function(){a.CHM(d);const h=a.oxw().$implicit,C=a.oxw();return a.KtG(C.remove(h))}),a.qZA()()}}function D(m,x){if(1&m&&(a.TgZ(0,"nb-list-item")(1,"div",12)(2,"div",13),a._UZ(3,"nb-icon",14),a.qZA(),a.TgZ(4,"div",15),a._uU(5),a.qZA(),a.TgZ(6,"div",15),a.YNc(7,I,3,6,"nb-progress-bar",16),a.qZA(),a.YNc(8,Z,2,0,"div",17),a.qZA()()),2&m){const d=x.$implicit,g=a.oxw();a.xp6(5),a.hij(" ",d.name," "),a.xp6(2),a.Q6J("ngIf",g.progress),a.xp6(1),a.Q6J("ngIf",!g.uploading&&!g.uploadSuccessful)}}function f(m,x){if(1&m&&(a.TgZ(0,"div",20),a._uU(1),a.qZA()),2&m){const d=a.oxw();a.xp6(1),a.hij(" ",d.errorMessage," ")}}function E(m,x){if(1&m){const d=a.EpF();a.TgZ(0,"button",21),a.NdJ("click",function(){a.CHM(d);const h=a.oxw();return a.KtG(h.dialogRef.close())}),a._uU(1,"\u53d6\u6d88"),a.qZA()}}let F=(()=>{class m{constructor(d,g){this.dialogRef=d,this.uploadService=g,this.files=new Set,this.multiple=!1,this.suffix=[],this.canBeClosed=!0,this.primaryButtonText="\u4e0a\u4f20",this.showCancelButton=!0,this.uploading=!1,this.uploadSuccessful=!1,this.messages={},this.errorMessage="",this.results=[]}ngOnInit(){}onFilesAdded(){var d;const g=null===(d=this.file)||void 0===d?void 0:d.nativeElement.files;let h="";for(const C in g){if(isNaN(parseInt(C,10)))continue;let O=g[C];console.log(O);let J=O.name.split(".");this.suffix.length>0&&!this.suffix.includes(J[J.length-1].toLowerCase())?h="\u6b64\u6587\u4ef6\u7c7b\u578b\u4e0d\u652f\u6301\uff0c\u53ea\u652f\u6301: "+this.suffix.join(",")+"\u6587\u4ef6\u683c\u5f0f":this.files.add(O)}this.errorMessage=h}addFiles(){var d;null===(d=this.file)||void 0===d||d.nativeElement.click()}closeDialog(){var d;if(this.uploadSuccessful)return null===(d=this.finish)||void 0===d||d.emit(this.results),this.dialogRef.close();if(this.files.size<1)return void(this.errorMessage="\u9009\u62e9\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6!");this.uploading=!0,this.progress=this.uploadService.upload(this.files);for(const h in this.progress)this.progress[h].progress.subscribe(C=>console.log(C)),this.progress[h].response.subscribe(C=>{C.hasOwnProperty("statusText")?this.messages[h]=C.statusText:C.hasOwnProperty("status")&&"ok"!=C.status?this.messages[h]=C.message:this.results.push(C.filename)});const g=[];for(const h in this.progress)g.push(this.progress[h].progress);this.primaryButtonText="\u5b8c\u6210",this.canBeClosed=!1,this.showCancelButton=!1,(0,b.D)(g).subscribe(h=>{this.canBeClosed=!0,this.uploadSuccessful=!0,this.uploading=!1})}remove(d){this.files.delete(d)}}return m.\u0275fac=function(d){return new(d||m)(a.Y36(_.X4l),a.Y36(T.C))},m.\u0275cmp=a.Xpm({type:m,selectors:[["app-dialog"]],viewQuery:function(d,g){if(1&d&&a.Gf(v,5),2&d){let h;a.iGM(h=a.CRH())&&(g.file=h.first)}},inputs:{multiple:"multiple",suffix:"suffix"},outputs:{finish:"finish"},features:[a._Bn([T.C])],decls:20,vars:7,consts:[[1,"row"],[1,"col-12"],["type","file",2,"display","none",3,"multiple","change"],["file",""],[1,"list-card"],[1,"d-flex","justify-content-between","align-items-center"],["nbButton","","status","primary",3,"disabled","click"],[4,"ngFor","ngForOf"],[1,"actions"],["class","col-12 text-danger py-2",4,"ngIf"],[1,"col-12","d-flex","justify-content-between"],["nbButton","","status","control","class","mr-2",3,"click",4,"ngIf"],[1,"row","flex-grow-1","flex-nowrap"],[1,"col-1"],["status","primary","icon","file"],[1,"col-5"],[3,"status","displayValue","value",4,"ngIf"],["class","col-1",4,"ngIf"],[3,"status","displayValue","value"],["icon","close","status","danger",2,"cursor","pointer",3,"click"],[1,"col-12","text-danger","py-2"],["nbButton","","status","control",1,"mr-2",3,"click"]],template:function(d,g){1&d&&(a.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),a.NdJ("change",function(){return g.onFilesAdded()}),a.qZA(),a.TgZ(4,"nb-card",4)(5,"nb-card-header",5)(6,"span"),a._uU(7,"\u4e0a\u4f20\u6587\u4ef6"),a.qZA(),a.TgZ(8,"button",6),a.NdJ("click",function(){return g.addFiles()}),a._uU(9,"\u6dfb\u52a0\u6587\u4ef6"),a.qZA()(),a.TgZ(10,"nb-card-body")(11,"nb-list"),a.YNc(12,D,9,3,"nb-list-item",7),a.qZA()(),a.TgZ(13,"nb-card-footer",8)(14,"div",0),a.YNc(15,f,2,1,"div",9),a.TgZ(16,"div",10),a.YNc(17,E,2,0,"button",11),a.TgZ(18,"button",6),a.NdJ("click",function(){return g.closeDialog()}),a._uU(19),a.qZA()()()()()()()),2&d&&(a.xp6(2),a.Q6J("multiple",g.multiple),a.xp6(6),a.Q6J("disabled",g.uploading||g.uploadSuccessful),a.xp6(4),a.Q6J("ngForOf",g.files),a.xp6(3),a.Q6J("ngIf",g.errorMessage.length>0),a.xp6(2),a.Q6J("ngIf",g.showCancelButton),a.xp6(1),a.Q6J("disabled",!g.canBeClosed||g.files.size<1),a.xp6(1),a.Oqu(g.primaryButtonText))},dependencies:[A.sg,A.O5,_.DPz,_.bSZ,_.zP_,_.qBV,_.Asz,_.yKW,_.XWE,_.ndF,_.fMN,A.Ov],styles:["nb-card[_ngcontent-%COMP%]{min-width:290px}.list-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-bottom:none}.list-card[_ngcontent-%COMP%]   nb-card-footer[_ngcontent-%COMP%]{border-top:none}.list-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}"]}),m})(),N=(()=>{class m{constructor(d){this.dialog=d,this.multiple=!1,this.text="\u4e0a\u4f20",this.status="primary",this.suffix=[],this.finish=new a.vpe}openUploadDialog(){const d=this.dialog.open(F,{closeOnBackdropClick:!1,closeOnEsc:!1});d.componentRef.instance.multiple=this.multiple,d.componentRef.instance.finish=this.finish,d.componentRef.instance.suffix=this.suffix}}return m.\u0275fac=function(d){return new(d||m)(a.Y36(_.Gln))},m.\u0275cmp=a.Xpm({type:m,selectors:[["app-upload"]],inputs:{multiple:"multiple",text:"text",status:"status",suffix:"suffix"},outputs:{finish:"finish"},decls:2,vars:2,consts:[["type","button","nbButton","",3,"status","click"]],template:function(d,g){1&d&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return g.openUploadDialog()}),a._uU(1),a.qZA()),2&d&&(a.Q6J("status",g.status),a.xp6(1),a.Oqu(g.text))},dependencies:[_.DPz],styles:["[_nghost-%COMP%]{display:block}"]}),m})()},2521:(W,k,u)=>{u.d(k,{c:()=>A});var a=u(8692),b=u(9467),T=u(916),_=u(4537);let A=(()=>{class v{}return v.\u0275fac=function(Z){return new(Z||v)},v.\u0275mod=_.oAB({type:v}),v.\u0275inj=_.cJS({providers:[T.C],imports:[a.ez,b.T2N,b.DfH,b.COg,b.zyh,b.KdK]}),v})()}}]);