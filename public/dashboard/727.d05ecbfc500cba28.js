"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[727],{7747:(Zt,dt,y)=>{y.d(dt,{_:()=>ft});var e=y(3714),P=y(9223),tt=y(2787),U=y(8024),A=y(1297),t=y(550),F=y(3223),I=y(3692);const et=["controlComponent"];function _t(j,$){if(1&j&&e._UZ(0,"control",1,2),2&j){const at=$.$implicit,R=e.oxw();e.Q6J("hidden",at.hidden)("control",at)("direction",R.direction)("form",R.form)}}let ft=(()=>{var j;class ${constructor(R){this.resourceLoader=R,this.direction="column",this.controls=[],this.controlComponents=new e.n_E,this.$resourceSubject=new U.t(1),this.$controlSubject=new U.t(1)}ngAfterViewInit(){this.$resourceSubject.subscribe(R=>{const Z=[],H={};Object.keys(R).forEach(Q=>{R[Q].forEach(N=>{const z=N.substring(N.lastIndexOf("/")+1),Y=z.lastIndexOf("."),ct=z.substring(0,Y);Z.push({name:ct,src:N}),H[ct]=Q})}),console.log(R,H),this.resourceLoader.push(Z),this.resourceLoader.load(...Z.map(Q=>Q.name)).then(Q=>{console.log(Q),Q.forEach(N=>{if(!N.loaded||null==N.type||"js"!=N.type)return;const z=window[N.resource];if(void 0!==z){let Y,ct={};if(console.log(H,N.resource),H[N.resource]){Y=this.controlComponents.find(it=>it.id==H[N.resource]);const W=this.controls.find(it=>it.id==H[N.resource]);W&&W.depends&&W.depends.length>0&&W.depends.forEach(it=>{ct[it]=this.controlComponents.find(Ct=>Ct.id==it)})}(0,A.H)(500).subscribe(()=>{try{const W=new z(Y);W.init(ct),Y&&Y.id&&(console.log(Y.id),window[Y.id+"Component"]=W)}catch(W){console.log(W)}})}})})})}ngOnInit(){this.$controlSubject.subscribe(R=>{null==this.form&&(this.form=new P.cw((0,tt.T)(R)));const Z={};R.forEach(H=>{Array.isArray(H.resources)&&H.resources.length>0&&(Z[H.id]=H.resources),H.depends&&H.depends.length>0&&this.onDepend(H)}),Object.keys(Z).length>0&&this.$resourceSubject.next(Z)})}ngOnChanges(R){R.controls.currentValue!=R.controls.previousValue&&this.$controlSubject.next(R.controls.currentValue)}onDepend(R){const Z=R.depends;if(!(null==Z||Z.length<1))for(let H of Z){const Q=H.split(":");if(Q.length<2)continue;const N=Q[0];"d"===Q[1]?(R.hidden=void 0!==Q[2]?this.form.controls[N].value!==Q[2]:!this.form.controls[N].value,this.form.controls[N].valueChanges.subscribe(z=>{R.hidden=void 0!==Q[2]?z!==Q[2]:!z})):"e"===Q[1]&&this.form.controls[R.id].valueChanges.subscribe(z=>{const Y={onlySelf:!1,emitEvent:!1,emitModelToViewChange:!0,emitViewToModelChange:!0};switch(typeof z){case"boolean":this.form.controls[N].setValue(!1,Y);break;case"number":case"bigint":this.form.controls[N].setValue(0,Y);break;case"string":this.form.controls[N].setValue("",Y);break;default:this.form.controls[N].setValue(null,Y)}})}}}return(j=$).\u0275fac=function(R){return new(R||j)(e.Y36(t.o))},j.\u0275cmp=e.Xpm({type:j,selectors:[["control-container"]],viewQuery:function(R,Z){if(1&R&&e.Gf(et,5),2&R){let H;e.iGM(H=e.CRH())&&(Z.controlComponents=H)}},inputs:{direction:"direction",controls:"controls",form:"form"},features:[e.TTD],decls:1,vars:1,consts:[[3,"hidden","control","direction","form",4,"ngFor","ngForOf"],[3,"hidden","control","direction","form"],["controlComponent",""]],template:function(R,Z){1&R&&e.YNc(0,_t,2,4,"control",0),2&R&&e.Q6J("ngForOf",Z.controls)},dependencies:[F.sg,I.F],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column}"]}),$})()},3692:(Zt,dt,y)=>{y.d(dt,{F:()=>Dt});var e=y(3714),P=y(2787),tt=y(9223),U=y(287),A=y(5990),t=y(1050),F=y(8777),I=y(4203),et=y(3250),_t=y(5813);function ft(C,k){if(1&C&&(e.TgZ(0,"label",19),e._uU(1),e.qZA()),2&C){const f=e.oxw();e.Tol("column"!==f.direction?"col-12 col-md-2":""),e.ekj("fs-4","group"==f.control.type),e.Q6J("for",f.control.id),e.xp6(1),e.hij(" ",f.control.label," ")}}function j(C,k){if(1&C&&e._UZ(0,"input",20),2&C){const f=e.oxw();e.Q6J("id",f.control.id)("placeholder",f.control.placeholder)("status",f.status)("type",f.control.inputType)("formControlName",f.control.id)}}function $(C,k){if(1&C&&e._UZ(0,"textarea",21),2&C){const f=e.oxw();let w;e.Q6J("rows",f.control.settings&&null!==(w=f.control.settings.rows)&&void 0!==w?w:2)("id",f.control.id)("placeholder",f.control.placeholder)("status",f.status)("formControlName",f.control.id)}}function at(C,k){if(1&C&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&C){const f=k.$implicit;e.xp6(1),e.hij("",f,'"')}}function R(C,k){if(1&C&&(e.ynx(0),e.YNc(1,at,2,1,"span",26),e.BQk()),2&C){const f=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",f.attachments)}}function Z(C,k){if(1&C&&e._UZ(0,"img",29),2&C){const f=k.$implicit,w=k.index,E=e.oxw(3);e.Udp("width",null!=E.control.settings&&E.control.settings.cropped?(null==E.control.settings?null:E.control.settings.cropped.width)+"px":"100%")("height",null!=E.control.settings&&E.control.settings.cropped?(null==E.control.settings?null:E.control.settings.cropped.height)+"px":null,"px"),e.s9C("alt",E.control.label+w),e.Q6J("src",f,e.LSH)}}function H(C,k){if(1&C&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,Z,1,6,"img",28),e.qZA(),e.BQk()),2&C){const f=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",f.attachments)}}function Q(C,k){if(1&C){const f=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(f);const E=e.oxw(2);return e.KtG(E.removeMedia())}),e._uU(2),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){e.CHM(f);const E=e.oxw(2);return e.KtG(E.openMedia())}),e._uU(4),e.qZA(),e.BQk()}if(2&C){const f=e.oxw(2);e.xp6(2),e.Oqu(null==f.control.settings?null:f.control.settings.button_labels.remove),e.xp6(2),e.Oqu(null==f.control.settings?null:f.control.settings.button_labels.change)}}function N(C,k){if(1&C){const f=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(f);const E=e.oxw(2);return e.KtG(E.openMedia())}),e._uU(1),e.qZA()}if(2&C){const f=e.oxw(2);e.xp6(1),e.hij(" ",null==f.control.settings?null:f.control.settings.button_labels.select," ")}}function z(C,k){if(1&C&&(e.TgZ(0,"div",2)(1,"div",22),e.YNc(2,R,2,1,"ng-container",23),e.YNc(3,H,3,1,"ng-container",23),e.qZA(),e.TgZ(4,"div",24),e.YNc(5,Q,5,2,"ng-container",23),e.YNc(6,N,2,1,"button",25),e.qZA()()),2&C){const f=e.oxw();e.xp6(2),e.Q6J("ngIf","image"!=f.control.type),e.xp6(1),e.Q6J("ngIf","image"==f.control.type),e.xp6(2),e.Q6J("ngIf",f.attachments.length>0&&(null==f.control.settings?null:f.control.settings.is_upload)),e.xp6(1),e.Q6J("ngIf",f.attachments.length<1&&(null==f.control.settings?null:f.control.settings.is_upload))}}function Y(C,k){if(1&C&&(e.TgZ(0,"nb-option",35),e._uU(1),e.qZA()),2&C){const f=k.$implicit;e.Q6J("value",f.value),e.xp6(1),e.Oqu(f.label)}}function ct(C,k){if(1&C&&(e.TgZ(0,"nb-select",33),e.YNc(1,Y,2,2,"nb-option",34),e.qZA()),2&C){const f=e.oxw();e.Q6J("id",f.control.id)("placeholder",f.control.placeholder)("multiple",f.control.multiple)("selected",f.control.value)("formControlName",f.control.id),e.xp6(1),e.Q6J("ngForOf",f.control.options)}}function W(C,k){if(1&C&&(e.TgZ(0,"nb-option",35),e._uU(1),e.qZA()),2&C){const f=k.$implicit;e.Q6J("value",f.value),e.xp6(1),e.Oqu(f.label)}}function it(C,k){if(1&C){const f=e.EpF();e.TgZ(0,"nb-select-with-autocomplete",36),e.NdJ("optionsAutocompleteInputChange",function(E){e.CHM(f);const G=e.oxw();return e.KtG(G.filterOptions(E))}),e.YNc(1,W,2,2,"nb-option",34),e.ALo(2,"async"),e.qZA()}if(2&C){const f=e.oxw();e.Q6J("withOptionsAutocomplete",!0)("placeholder",f.control.placeholder)("multiple",f.control.multiple)("selected",f.control.value)("formControlName",f.control.id),e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,6,f.filteredControlOptions$))}}function Ct(C,k){if(1&C&&(e.TgZ(0,"nb-radio",35),e._uU(1),e.qZA()),2&C){const f=k.$implicit;e.Q6J("value",f.value),e.xp6(1),e.Oqu(f.label)}}function bt(C,k){if(1&C&&(e.TgZ(0,"nb-radio-group",37),e.YNc(1,Ct,2,2,"nb-radio",34),e.qZA()),2&C){const f=e.oxw();e.Q6J("formControlName",f.control.id)("id",f.control.id),e.xp6(1),e.Q6J("ngForOf",f.control.options)}}function xt(C,k){if(1&C&&e._UZ(0,"nb-checkbox",38),2&C){const f=e.oxw();e.Q6J("id",f.control.id)("checked",!!f.control.value)("formControlName",f.control.id)}}function q(C,k){if(1&C&&(e.TgZ(0,"div"),e._UZ(1,"input",39)(2,"nb-datepicker",40,41),e.qZA()),2&C){const f=e.MAs(3),w=e.oxw();e.xp6(1),e.s9C("id",w.control.id),e.Q6J("id",w.control.id)("placeholder",w.control.placeholder)("formControlName",w.control.id)("nbDatepicker",f),e.xp6(1),e.Q6J("format",w.control.format)}}function lt(C,k){if(1&C&&(e.TgZ(0,"div"),e._UZ(1,"input",39)(2,"nb-date-timepicker",42,43),e.qZA()),2&C){const f=e.MAs(3),w=e.oxw();e.xp6(1),e.s9C("id",w.control.id),e.Q6J("id",w.control.id)("placeholder",w.control.placeholder)("formControlName",w.control.id)("nbDatepicker",f),e.xp6(1),e.Q6J("format",w.control.format)}}function pt(C,k){if(1&C&&(e.TgZ(0,"div"),e._UZ(1,"input",39)(2,"nb-rangepicker",40,44),e.qZA()),2&C){const f=e.MAs(3),w=e.oxw();e.xp6(1),e.Q6J("id",w.control.id)("placeholder",w.control.placeholder)("formControlName",w.control.id)("nbDatepicker",f),e.xp6(1),e.Q6J("format",w.control.format)}}function rt(C,k){if(1&C&&(e.TgZ(0,"nb-option",35),e._uU(1),e.qZA()),2&C){const f=k.$implicit;e.Q6J("value",f.value),e.xp6(1),e.hij(" ",f.label," ")}}function st(C,k){if(1&C){const f=e.EpF();e.TgZ(0,"div")(1,"input",45,46),e.NdJ("input",function(){e.CHM(f);const E=e.MAs(2),G=e.oxw();return e.KtG(G.filterOptions(E.value))}),e.qZA(),e.TgZ(3,"nb-autocomplete",null,47),e.YNc(5,rt,2,2,"nb-option",34),e.ALo(6,"async"),e.qZA()()}if(2&C){const f=e.MAs(4),w=e.oxw();e.xp6(1),e.Q6J("id",w.control.id)("placeholder",w.control.placeholder)("formControlName",w.control.id)("nbAutocomplete",f),e.xp6(4),e.Q6J("ngForOf",e.lcZ(6,5,w.filteredControlOptions$))}}function ht(C,k){if(1&C&&(e.TgZ(0,"div",48),e._UZ(1,"input",49)(2,"ngx-colors",50),e.qZA()),2&C){const f=e.oxw();e.xp6(1),e.Q6J("value",f.getControl().value),e.xp6(1),e.Q6J("formControlName",f.control.id)}}function gt(C,k){if(1&C&&e._UZ(0,"div",51),2&C){const f=e.oxw();e.Q6J("innerHTML",f.dom.bypassSecurityTrustHtml(f.control.template),e.oJD)}}function Pt(C,k){if(1&C&&e._UZ(0,"nb-toggle",52),2&C){const f=e.oxw();e.Q6J("formControlName",f.control.id)("id",f.control.id)}}function mt(C,k){if(1&C&&e._UZ(0,"group-control",53),2&C){const f=e.oxw();e.Q6J("direction",f.direction)("element",f.control)("form",f.formGroup)}}function wt(C,k){if(1&C&&(e.TgZ(0,"p",54),e._uU(1),e.qZA()),2&C){const f=e.oxw();e.xp6(1),e.Oqu(f.error)}}function vt(C,k){if(1&C&&e._UZ(0,"p",55),2&C){const f=e.oxw();e.Q6J("innerHTML",f.dom.bypassSecurityTrustHtml(f.control.description),e.oJD)}}function Ot(C,k){1&C&&e._UZ(0,"hr",56)}let Dt=(()=>{var C;class k{constructor(w,E,G,nt){this.ckfinder=w,this.http=E,this.dom=G,this.locale=nt,this.direction="column",this.invalid=!1,this.onChange=()=>{},this.onTouched=()=>{},this.id="",this.attachments=[],this.filteredControlOptions$=(0,U.of)([]),this.HTMLInputElement=HTMLInputElement}ngOnInit(){this.id=this.control.id,this.control.inputType||(this.control.inputType="text"),this.control.placeholder||(this.control.placeholder=""),this.control.format||(this.control.format="");const w=this.getControl();this.control.disabled&&w?.disable(),w?.statusChanges.subscribe(E=>{this.invalid="INVALID"==E&&w.dirty}),["file","image","video","audio"].includes(this.control.type)&&(this.ckfinder.onChoose().subscribe(E=>{const G=[];if(E.forEach(ut=>{this.control.id==ut.source&&G.push({url:ut.url,id:ut.id})}),G.length<1)return;let nt=null;this.control.multiple?(nt=[],G.forEach(ut=>{nt.push(ut.id)})):nt=G.pop().id,w.setValue(nt)}),w.valueChanges.subscribe(E=>{E&&this.buildAttachment(E)}),w.value&&this.buildAttachment(w.value)),("autocomplete"===this.control.type||"select_search"===this.control.type)&&this.control.options&&(this.filteredControlOptions$=(0,U.of)(this.control.options))}filterOptions(w){let E=this.control.settings&&this.control.settings.endpoint||"";(0,U.of)(w).pipe((0,t.b)(400),(0,F.x)()).subscribe(G=>{this.filteredControlOptions$=E?this.http.get(E+"?text="+G).pipe((0,A.U)(nt=>nt.records)):(0,U.of)((this.control.options||[]).filter(nt=>nt.label.includes(G)))})}buildAttachment(w){if(Array.isArray(w))w.forEach(E=>{E<1||this.ckfinder.getAttachmentUrl(E).subscribe(G=>{this.attachments.push(G)})});else{let E=parseInt(w,10);E>0&&this.ckfinder.getAttachmentUrl(E).subscribe(G=>{this.attachments[0]=G})}}removeMedia(){this.attachments=[];let w=[];this.control.multiple||(w=void 0),this.getControl().setValue(w)}openMedia(){const w=this.control.type.charAt(0).toUpperCase()+this.control.type.slice(1)+"s";this.ckfinder.popup({resourceType:w,multi:this.control.multiple,source:this.control.id,cropped:this.control.settings&&this.control.settings.cropped?this.control.settings.cropped:void 0})}get status(){const w=this.getControl();return w?.dirty?w.invalid?"danger":"success":"primary"}get error(){const w=this.getControl()?.errors;return null==w||w.nbDatepickerParse?"":w.required?this.control.label+"\u4e0d\u80fd\u4e3a\u7a7a":w.min?this.control.label+"\u6700\u5c0f\u4e3a"+this.control.validators?.find(E=>"min"==E.key)?.value:w.max?this.control.label+"\u6700\u5927\u4e3a"+this.control.validators?.find(E=>"max"==E.key)?.value:w.pattern?this.control.label+"\u683c\u5f0f\u4e0d\u6b63\u786e":"\u672a\u77e5\u9519\u8bef"}getControl(){return this.control.required&&(this.control.placeholder||(this.control.placeholder="\u5fc5\u586b\u9879")),null==this.form&&(this.form=new tt.cw((0,P.T)([this.control]))),this.form.controls[this.control.id]}get formGroup(){return this.getControl()}}return(C=k).\u0275fac=function(w){return new(w||C)(e.Y36(I.Q),e.Y36(et.eN),e.Y36(_t.H7),e.Y36(e.soG))},C.\u0275cmp=e.Xpm({type:C,selectors:[["control"]],inputs:{direction:"direction",control:"control",form:"form"},decls:22,vars:25,consts:[[1,"mb-3",3,"formGroup"],["class","label col-form-label",3,"fs-4","class","for",4,"ngIf"],[1,"d-flex","flex-column"],[3,"ngSwitch"],["status","primary","nbInput","","fullWidth","",3,"id","placeholder","status","type","formControlName",4,"ngSwitchCase"],["nbInput","","fullWidth","","status","primary",3,"rows","id","placeholder","status","formControlName",4,"ngSwitchCase"],["class","d-flex flex-column",4,"ngSwitchCase"],["status","primary","fullWidth","",3,"id","placeholder","multiple","selected","formControlName",4,"ngSwitchCase"],["status","primary","fullWidth","",3,"withOptionsAutocomplete","placeholder","multiple","selected","formControlName","optionsAutocompleteInputChange",4,"ngSwitchCase"],["class","d-flex","status","primary",3,"formControlName","id",4,"ngSwitchCase"],["status","primary",3,"id","checked","formControlName",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","d-flex justify-content-between align-items-center",4,"ngSwitchCase"],[3,"innerHTML",4,"ngSwitchCase"],["status","primary",3,"formControlName","id",4,"ngSwitchCase"],[3,"direction","element","form",4,"ngSwitchCase"],["class","caption col-form-label status-danger",4,"ngIf"],["class","label col-form-label",3,"innerHTML",4,"ngIf"],["style","color:var(--divider-color);opacity:1;",4,"ngIf"],[1,"label","col-form-label",3,"for"],["status","primary","nbInput","","fullWidth","",3,"id","placeholder","status","type","formControlName"],["nbInput","","fullWidth","","status","primary",3,"rows","id","placeholder","status","formControlName"],[1,"flex-column","d-flex","align-items-center"],[4,"ngIf"],[1,"d-flex","justify-content-between","mt-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"click",4,"ngIf"],["class","d-inline my-1 text-break",4,"ngFor","ngForOf"],[1,"d-inline","my-1","text-break"],[3,"alt","width","height","src",4,"ngFor","ngForOf"],[3,"alt","src"],["nbButton","","type","button","status","danger",3,"click"],["nbButton","","type","button","status","warning",3,"click"],["nbButton","","fullWidth","","type","button","status","primary",3,"click"],["status","primary","fullWidth","",3,"id","placeholder","multiple","selected","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["status","primary","fullWidth","",3,"withOptionsAutocomplete","placeholder","multiple","selected","formControlName","optionsAutocompleteInputChange"],["status","primary",1,"d-flex",3,"formControlName","id"],["status","primary",3,"id","checked","formControlName"],["nbInput","","fullWidth","","status","primary",3,"id","placeholder","formControlName","nbDatepicker"],[3,"format"],["datePicker",""],["withSeconds","",3,"format"],["dateTimePicker",""],["rangeDatePicker",""],["nbInput","","fullWidth","","status","primary",3,"id","placeholder","formControlName","nbAutocomplete","input"],["autoInput",""],["autocomplete",""],[1,"d-flex","justify-content-between","align-items-center"],["disabled","","nbInput","",3,"value"],["ngx-colors-trigger","",3,"formControlName"],[3,"innerHTML"],["status","primary",3,"formControlName","id"],[3,"direction","element","form"],[1,"caption","col-form-label","status-danger"],[1,"label","col-form-label",3,"innerHTML"],[2,"color","var(--divider-color)","opacity","1"]],template:function(w,E){1&w&&(e.TgZ(0,"div",0),e.YNc(1,ft,2,6,"label",1),e.TgZ(2,"div",2),e.ynx(3,3),e.YNc(4,j,1,5,"input",4),e.YNc(5,$,1,5,"textarea",5),e.YNc(6,z,7,4,"div",6),e.YNc(7,ct,2,6,"nb-select",7),e.YNc(8,it,3,8,"nb-select-with-autocomplete",8),e.YNc(9,bt,2,3,"nb-radio-group",9),e.YNc(10,xt,1,3,"nb-checkbox",10),e.YNc(11,q,4,6,"div",11),e.YNc(12,lt,4,6,"div",11),e.YNc(13,pt,4,5,"div",11),e.YNc(14,st,7,7,"div",11),e.YNc(15,ht,3,2,"div",12),e.YNc(16,gt,1,1,"div",13),e.YNc(17,Pt,1,2,"nb-toggle",14),e.YNc(18,mt,1,3,"group-control",15),e.BQk(),e.YNc(19,wt,2,1,"p",16),e.YNc(20,vt,1,1,"p",17),e.qZA(),e.YNc(21,Ot,1,0,"hr",18),e.qZA()),2&w&&(e.Tol("column"!==E.direction?"row":""),e.Q6J("formGroup",E.form),e.xp6(1),e.Q6J("ngIf",E.control.label),e.xp6(1),e.Tol("column"!==E.direction?"col-12 col-md-10":""),e.xp6(1),e.Q6J("ngSwitch",E.control.type),e.xp6(1),e.Q6J("ngSwitchCase","input"),e.xp6(1),e.Q6J("ngSwitchCase","textarea"),e.xp6(1),e.Q6J("ngSwitchCase","file"==E.control.type||"video"==E.control.type||"audio"==E.control.type||"image"==E.control.type?E.control.type:""),e.xp6(1),e.Q6J("ngSwitchCase","select"),e.xp6(1),e.Q6J("ngSwitchCase","select_search"),e.xp6(1),e.Q6J("ngSwitchCase","radio"),e.xp6(1),e.Q6J("ngSwitchCase","checkbox"),e.xp6(1),e.Q6J("ngSwitchCase","date"),e.xp6(1),e.Q6J("ngSwitchCase","datetime"),e.xp6(1),e.Q6J("ngSwitchCase","range_date"),e.xp6(1),e.Q6J("ngSwitchCase","autocomplete"),e.xp6(1),e.Q6J("ngSwitchCase","color"),e.xp6(1),e.Q6J("ngSwitchCase","custom"),e.xp6(1),e.Q6J("ngSwitchCase","switch"),e.xp6(1),e.Q6J("ngSwitchCase","group"),e.xp6(1),e.Q6J("ngIf",E.invalid),e.xp6(1),e.Q6J("ngIf",E.control.description&&E.control.description.length>0),e.xp6(1),e.Q6J("ngIf","group"==E.control.type))},styles:["[_nghost-%COMP%]{width:100%}"]}),k})()},2727:(Zt,dt,y)=>{y.d(dt,{s:()=>Lt});var e=y(3223),P=y(24),tt=y(3523),U=y(5805),A=y(3692),t=y(3714),F=y(9223),I=y(6206);const et=["hueSlider"],_t=["alphaSlider"];function ft(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",8),t.NdJ("newValue",function(c){t.CHM(n);const s=t.oxw();return t.KtG(s.onSliderChange("saturation-lightness",c))}),t.TgZ(1,"div",9),t._UZ(2,"div"),t.qZA()()}if(2&g){const n=t.oxw();t.Udp("background-color",n.hueSliderColor),t.Q6J("rgX",1)("rgY",1),t.xp6(1),t.Udp("top",null==n.slider?null:n.slider.v,"px")("left",null==n.slider?null:n.slider.s,"px")}}function j(g,v){if(1&g&&(t.TgZ(0,"div",10),t._UZ(1,"div",11)(2,"div",12),t.qZA()),2&g){const n=t.oxw();t.xp6(2),t.Udp("background-color",n.selectedColor)}}function $(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",13,14),t.NdJ("newValue",function(c){t.CHM(n);const s=t.oxw();return t.KtG(s.onSliderChange("hue",c))}),t.TgZ(2,"div",15)(3,"div"),t._UZ(4,"div"),t.qZA()()()}if(2&g){const n=t.oxw();t.Q6J("rgX",1),t.xp6(2),t.Udp("left",null==n.slider?null:n.slider.h,"px")}}function at(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",16,17),t.NdJ("newValue",function(c){t.CHM(n);const s=t.oxw();return t.KtG(s.onSliderChange("alpha",c))}),t._UZ(2,"div",18),t.TgZ(3,"div",15)(4,"div"),t._UZ(5,"div"),t.qZA()()()}if(2&g){const n=t.oxw();t.Q6J("rgX",1),t.xp6(2),t.Q6J("ngStyle",n.getBackgroundColor(n.alphaSliderColor)),t.xp6(1),t.Udp("left",null==n.slider?null:n.slider.a,"px")}}const R=["dialog"];function Z(g,v){1&g&&t._UZ(0,"div",11)}function H(g,v){if(1&g){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"div",9),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onColorClick(s))}),t.YNc(3,Z,1,0,"div",10),t.qZA()(),t.BQk()}if(2&g){const n=v.$implicit,h=v.index,c=t.oxw(2);t.xp6(2),t.ekj("colornull",!n),t.Q6J("ngStyle",c.getBackgroundColor(n)),t.xp6(1),t.Q6J("ngIf",h==c.indexSeleccionado)}}function Q(g,v){if(1&g&&t._UZ(0,"div",17),2&g){const n=t.oxw(3);t.Q6J("ngStyle",n.getBackgroundColor(n.color))}}function N(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",12),t.NdJ("click",function(){t.CHM(n);const c=t.oxw(2);return t.KtG(c.addColor())}),t.YNc(1,Q,1,1,"div",13),t.O4$(),t.TgZ(2,"svg",14),t._UZ(3,"path",15)(4,"path",16),t.qZA()()}if(2&g){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.indexSeleccionado)}}function z(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"color-picker",18),t.NdJ("colorChange",function(c){t.CHM(n);const s=t.oxw(2);return t.KtG(s.onChangeColorPicker(c))})("onAlphaChange",function(c){t.CHM(n);const s=t.oxw(2);return t.KtG(s.onAlphaChange(c))}),t.qZA()}if(2&g){const n=t.oxw(2);t.Q6J("controls",n.colorPickerControls)("color",n.hsva)}}function Y(g,v){if(1&g&&(t.ynx(0),t.TgZ(1,"div",4),t.YNc(2,H,4,4,"ng-container",5),t.YNc(3,N,5,1,"div",6),t.YNc(4,z,1,2,"color-picker",7),t.qZA(),t.BQk()),2&g){const n=t.oxw();t.xp6(1),t.Q6J("@colorsAnimation",n.colorsAnimationEffect),t.xp6(1),t.Q6J("ngForOf",n.palette),t.xp6(1),t.Q6J("ngIf",!n.hideColorPicker&&"only-alpha"!=n.colorPickerControls),t.xp6(1),t.Q6J("ngIf",!n.hideColorPicker&&"only-alpha"==n.colorPickerControls)}}function ct(g,v){1&g&&t._UZ(0,"div",11)}const W=function(g){return{background:g}};function it(g,v){if(1&g){const n=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"div",8)(2,"div",24),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.changeColor(s))}),t.YNc(3,ct,1,0,"div",10),t.qZA()(),t.BQk()}if(2&g){const n=v.$implicit,h=t.oxw(2);t.xp6(2),t.ekj("colornull",!n),t.Q6J("ngStyle",t.VKq(4,W,n)),t.xp6(1),t.Q6J("ngIf",h.isSelected(n))}}function Ct(g,v){if(1&g){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",4)(2,"div",19)(3,"div",20),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.onClickBack())}),t.O4$(),t.TgZ(4,"svg",21),t._UZ(5,"path",22)(6,"path",23),t.qZA()()(),t.YNc(7,it,4,6,"ng-container",5),t.qZA(),t.BQk()}if(2&g){const n=t.oxw();t.xp6(1),t.Q6J("@colorsAnimation",n.colorsAnimationEffect),t.xp6(6),t.Q6J("ngForOf",n.variants)}}function bt(g,v){if(1&g){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",25)(2,"div",26),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.onClickBack())}),t.O4$(),t.TgZ(3,"svg",21),t._UZ(4,"path",22)(5,"path",23),t.qZA()(),t.kcU(),t.TgZ(6,"button",27),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.emitClose("cancel"))}),t._uU(7),t.qZA(),t.TgZ(8,"button",27),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.emitClose("accept"))}),t._uU(9),t.qZA()(),t.TgZ(10,"div",28)(11,"color-picker",29),t.NdJ("sliderChange",function(c){t.CHM(n);const s=t.oxw();return t.KtG(s.onChangeColorPicker(c))}),t.qZA()(),t.BQk()}if(2&g){const n=t.oxw();t.xp6(7),t.hij(" ",n.cancelLabel," "),t.xp6(2),t.hij(" ",n.acceptLabel," "),t.xp6(2),t.Q6J("controls",n.colorPickerControls)("color",n.hsva)}}function xt(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"div",30)(1,"p",31),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.nextFormat())}),t._uU(2),t.qZA(),t.TgZ(3,"div",32)(4,"input",33,34),t.NdJ("keyup",function(){t.CHM(n);const c=t.MAs(5),s=t.oxw();return t.KtG(s.changeColorManual(c.value))})("keydown.enter",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.emitClose("accept"))}),t.qZA()()()}if(2&g){const n=t.oxw();t.xp6(2),t.Oqu(n.colorFormats[n.format]),t.xp6(2),t.Udp("font-size",n.color&&n.color.length>23?9:10,"px")("letter-spacing",n.color&&n.color.length>16?0:1.5,"px"),t.Q6J("value",n.color)}}var q=function(g){return g[g.HEX=0]="HEX",g[g.RGBA=1]="RGBA",g[g.HSLA=2]="HSLA",g[g.CMYK=3]="CMYK",g}(q||{});const lt=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}],pt=["hex","rgba","hsla"];class rt{constructor(v,n,h,c){this.r=v,this.g=n,this.b=h,this.a=c}denormalize(){return this.r=Math.round(255*this.r),this.g=Math.round(255*this.g),this.b=Math.round(255*this.b),this}toString(){return this.denormalize(),"rgb"+(1!=this.a?"a(":"(")+this.r+", "+this.g+", "+this.b+(1!=this.a?", "+this.a.toPrecision(2)+")":")")}}class st{constructor(v,n,h,c){this.h=v,this.s=n,this.v=h,this.a=c,this.onChange=new t.vpe(!0)}onColorChange(v){this.s=v.s/v.rgX,this.v=v.v/v.rgY}onHueChange(v){this.h=v.v/v.rgX}onValueChange(v){this.v=v.v/v.rgX}onAlphaChange(v){this.a=v.v/v.rgX}}class ht{constructor(v,n,h,c){this.h=v,this.s=n,this.l=h,this.a=c}denormalize(){return this.h=Math.round(360*this.h),this.s=Math.round(100*this.s),this.l=Math.round(100*this.l),this}toString(){return"hsl"+(1!=this.a?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(1!=this.a?", "+this.a.toPrecision(2)+")":")")}}class gt{constructor(v,n,h,c,s=1){this.c=v,this.m=n,this.y=h,this.k=c,this.a=s}}class Pt{constructor(v){v&&(this.preview=v.preview,this.variants=v.variants)}}let mt=(()=>{class g{constructor(){}toFormat(n,h){var c="";if(n)switch(h){case q.HEX:(l=this.hsvaToRgba(n)).denormalize(),c=this.rgbaToHex(l,!0);break;case q.HSLA:var s=this.hsva2hsla(n);s.denormalize(),c=s.toString();break;case q.RGBA:c=(l=this.hsvaToRgba(n)).toString();break;case q.CMYK:var l=this.hsvaToRgba(n);this.rgbaToCmyk(l)}return c}stringToFormat(n,h){var c=this.stringToHsva(n,!0);return this.toFormat(c,h)}hsva2hsla(n){const h=n.h,c=n.s,s=n.v,l=n.a;if(0===s)return new ht(h,0,0,l);if(0===c&&1===s)return new ht(h,1,1,l);{const u=s*(2-c)/2;return new ht(h,s*c/(1-Math.abs(2*u-1)),u,l)}}hsla2hsva(n){const h=Math.min(n.h,1),c=Math.min(n.s,1),s=Math.min(n.l,1),l=Math.min(n.a,1);if(0===s)return new st(h,0,0,l);{const u=s+c*(1-Math.abs(2*s-1))/2;return new st(h,2*(u-s)/u,u,l)}}hsvaToRgba(n){let h,c,s;const l=n.h,u=n.s,b=n.v,D=n.a,T=Math.floor(6*l),S=6*l-T,O=b*(1-u),d=b*(1-S*u),i=b*(1-(1-S)*u);switch(T%6){case 0:h=b,c=i,s=O;break;case 1:h=d,c=b,s=O;break;case 2:h=O,c=b,s=i;break;case 3:h=O,c=d,s=b;break;case 4:h=i,c=O,s=b;break;case 5:h=b,c=O,s=d;break;default:h=0,c=0,s=0}return new rt(h,c,s,D)}cmykToRgb(n){return new rt((1-n.c)*(1-n.k),(1-n.m)*(1-n.k),(1-n.y)*(1-n.k),n.a)}rgbaToCmyk(n){const h=1-Math.max(n.r,n.g,n.b);return 1===h?new gt(0,0,0,1,n.a):new gt((1-n.r-h)/(1-h),(1-n.g-h)/(1-h),(1-n.b-h)/(1-h),h,n.a)}rgbaToHsva(n){let h,c;const s=Math.min(n.r,1),l=Math.min(n.g,1),u=Math.min(n.b,1),b=Math.min(n.a,1),D=Math.max(s,l,u),T=Math.min(s,l,u),S=D,O=D-T;if(c=0===D?0:O/D,D===T)h=0;else{switch(D){case s:h=(l-u)/O+(l<u?6:0);break;case l:h=(u-s)/O+2;break;case u:h=(s-l)/O+4;break;default:h=0}h/=6}return new st(h,c,S,b)}rgbaToHex(n,h){let c="#"+(16777216|n.r<<16|n.g<<8|n.b).toString(16).substr(1);return 1!=n.a&&(c+=(256|Math.round(255*n.a)).toString(16).substr(1)),c}normalizeCMYK(n){return new gt(n.c/100,n.m/100,n.y/100,n.k/100,n.a)}denormalizeCMYK(n){return new gt(Math.floor(100*n.c),Math.floor(100*n.m),Math.floor(100*n.y),Math.floor(100*n.k),n.a)}denormalizeRGBA(n){return new rt(Math.round(255*n.r),Math.round(255*n.g),Math.round(255*n.b),n.a)}stringToHsva(n="",h=!0){let c=null;n=(n||"").toLowerCase();const s=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(l){return new rt(parseInt(l[2],10)/255,parseInt(l[3],10)/255,parseInt(l[4],10)/255,isNaN(parseFloat(l[5]))?1:parseFloat(l[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(l){return new ht(parseInt(l[2],10)/360,parseInt(l[3],10)/100,parseInt(l[4],10)/100,isNaN(parseFloat(l[5]))?1:parseFloat(l[5]))}}];s.push(h?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(l){return new rt(parseInt(l[1],16)/255,parseInt(l[2],16)/255,parseInt(l[3],16)/255,parseInt(l[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(l){return new rt(parseInt(l[1],16)/255,parseInt(l[2],16)/255,parseInt(l[3],16)/255,1)}}),s.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(l){return new rt(parseInt(l[1]+l[1],16)/255,parseInt(l[2]+l[2],16)/255,parseInt(l[3]+l[3],16)/255,1)}});for(const l in s)if(s.hasOwnProperty(l)){const u=s[l],b=u.re.exec(n),D=b&&u.parse(b);if(D)return D instanceof rt?c=this.rgbaToHsva(D):D instanceof ht&&(c=this.hsla2hsva(D)),c}return c}outputFormat(n){return this.hsvaToRgba(n).toString()}getFormatByString(n){if(n){n=n.toLowerCase();let c=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,s=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/;if(/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/.test(n))return"hex";if(c.test(n))return"rgba";if(s.test(n))return"hsla"}return"hex"}}return g.\u0275fac=function(n){return new(n||g)},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac}),g})();class wt{constructor(v,n,h,c){this.h=v,this.s=n,this.v=h,this.a=c}}class vt{constructor(v,n,h,c){this.h=v,this.s=n,this.v=h,this.a=c}}let Ot=(()=>{class g{mouseDown(n){this.start(n)}touchStart(n){this.start(n)}constructor(n){this.elRef=n,this.dragEnd=new t.vpe,this.dragStart=new t.vpe,this.newValue=new t.vpe,this.listenerMove=h=>this.move(h),this.listenerStop=()=>this.stop()}move(n){n.preventDefault(),this.setCursor(n)}start(n){this.setCursor(n),n.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(n){const h=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==n.pageX?n.pageX:n.touches[0].pageX)-h.left-window.pageXOffset}getY(n){const h=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==n.pageY?n.pageY:n.touches[0].pageY)-h.top-window.pageYOffset}setCursor(n){const h=this.elRef.nativeElement.offsetWidth,c=this.elRef.nativeElement.offsetHeight,s=Math.max(0,Math.min(this.getX(n),h)),l=Math.max(0,Math.min(this.getY(n),c));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:s/h,v:1-l/c,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:l/c,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:s/h,rgX:this.rgX})}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(t.SBq))},g.\u0275dir=t.lG2({type:g,selectors:[["","slider",""]],hostBindings:function(n,h){1&n&&t.NdJ("mousedown",function(s){return h.mouseDown(s)})("touchstart",function(s){return h.touchStart(s)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),g})(),Dt=(()=>{class g{constructor(n,h){this.service=n,this.cdr=h,this.color=new st(0,1,1,1),this.controls="default",this.sliderChange=new t.vpe(!1),this.onAlphaChange=new t.vpe(!1),this.hsva=new st(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new st(0,1,1,1)),this.slider=new wt(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(n){n.color&&this.color&&this.update()}ngAfterViewInit(){this.sliderDimMax=new vt(this.hueSlider?.nativeElement.offsetWidth||140,220,130,this.alphaSlider?.nativeElement.offsetWidth||140),this.update()}onSliderChange(n,h){switch(n){case"saturation-lightness":this.hsva.onColorChange(h);break;case"hue":this.hsva.onHueChange(h);break;case"alpha":this.hsva.onAlphaChange(h),this.onAlphaChange.emit(h);break;case"value":this.hsva.onValueChange(h)}this.update(),this.setColor(this.outputColor)}setColor(n){this.color=n,this.sliderChange.emit(this.color)}getBackgroundColor(n){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+n+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let n=this.service.hsvaToRgba(this.hsva).denormalize(),h=this.service.hsvaToRgba(new st(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+h.r+","+h.g+","+h.b+")",this.alphaSliderColor="rgb("+n.r+","+n.g+","+n.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new wt(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(mt),t.Y36(t.sBO))},g.\u0275cmp=t.Xpm({type:g,selectors:[["color-picker"]],viewQuery:function(n,h){if(1&n&&(t.Gf(et,5),t.Gf(_t,5)),2&n){let c;t.iGM(c=t.CRH())&&(h.hueSlider=c.first),t.iGM(c=t.CRH())&&(h.alphaSlider=c.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},features:[t.TTD],decls:8,vars:4,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"slider","rgX","newValue"],["hueSlider",""],[1,"sliderCursor"],[1,"alpha",3,"slider","rgX","newValue"],["alphaSlider",""],[1,"alpha-gradient",3,"ngStyle"]],template:function(n,h){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("click",function(s){return s.stopPropagation()}),t.YNc(2,ft,3,8,"div",2),t.TgZ(3,"div",3),t.YNc(4,j,3,2,"div",4),t.TgZ(5,"div",5),t.YNc(6,$,5,3,"div",6),t.YNc(7,at,6,4,"div",7),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("ngIf","only-alpha"!=h.controls),t.xp6(2),t.Q6J("ngIf","only-alpha"!=h.controls),t.xp6(2),t.Q6J("ngIf","only-alpha"!=h.controls),t.xp6(1),t.Q6J("ngIf","no-alpha"!=h.controls))},dependencies:[e.O5,e.PC,Ot],styles:[".color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}\n"],encapsulation:2}),g})(),C=(()=>{class g{click(n){this.isOutside(n)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(n,h){this.service=n,this.cdr=h,this.color="#000000",this.previewColor="#000000",this.hsva=new st(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=lt,this.variants=[],this.colorFormats=pt,this.format=q.HEX,this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(n){let h;if(this.color)for(let c=0;c<n.length;c++){const s=n[c];"string"==typeof s?this.service.stringToFormat(this.color,q.HEX)==this.service.stringToFormat(s,q.HEX)&&(h=c):void 0===s?this.color=void 0:null!=this.findIndexSelectedColor(s.variants)&&(h=c)}return h}iniciate(n,h,c,s,l,u,b,D,T,S,O,d){if(this.colorPickerControls=O,this.triggerInstance=n,this.TriggerBBox=h,this.color=c,this.hideColorPicker=D,this.hideTextInput=b,this.acceptLabel=T,this.cancelLabel=S,u?pt.includes(u)?(this.format=pt.indexOf(u.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=u.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=q.HEX):this.format=pt.indexOf(this.service.getFormatByString(this.color)),this.previewColor=this.color,this.palette=s??lt,this.colorsAnimationEffect=l,"top"==d){let i=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+i.height+"px ))"}}setPosition(){if(this.TriggerBBox){const h=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=h.top+h.height,this.left=h.left+250>window.innerWidth?h.right<250?window.innerWidth/2-125:h.right-250:h.left}}setPositionY(){const n=this.TriggerBBox.nativeElement.getBoundingClientRect(),h=this.panelRef.nativeElement.getBoundingClientRect();this.positionString=n.bottom+h.height>window.innerHeight?n.top<h.height?"transform: translateY(-"+n.bottom+"px );":"transform: translateY(calc( -100% - "+n.height+"px ));":"",this.cdr.detectChanges()}hasVariant(n){return!!this.previewColor&&"string"!=typeof n&&n.variants.some(h=>h.toUpperCase()==this.previewColor.toUpperCase())}isSelected(n){return!!this.previewColor&&"string"==typeof n&&n.toUpperCase()==this.previewColor.toUpperCase()}getBackgroundColor(n){return"string"==typeof n?{background:n}:{background:n?.preview}}onAlphaChange(n){this.palette=this.ChangeAlphaOnPalette(n,this.palette)}ChangeAlphaOnPalette(n,h){var c=[];for(let s=0;s<h.length;s++){const l=h[s];if("string"==typeof l){let u=this.service.stringToHsva(l);u.onAlphaChange(n),c.push(this.service.toFormat(u,this.format))}else{let u=new Pt,b=this.service.stringToHsva(l.preview);b.onAlphaChange(n),u.preview=this.service.toFormat(b,this.format),u.variants=this.ChangeAlphaOnPalette(n,l.variants),c.push(u)}}return c}changeColor(n){this.setColor(this.service.stringToHsva(n)),this.emitClose("accept")}onChangeColorPicker(n){this.temporalColor=n,this.color=this.service.toFormat(n,this.format),this.triggerInstance.sliderChange(this.service.toFormat(n,this.format))}changeColorManual(n){this.previewColor=n,this.color=n,this.hsva=this.service.stringToHsva(n),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color)}setColor(n){this.hsva=n,this.color=this.service.toFormat(n,this.format),this.setPreviewColor(n),this.triggerInstance.setColor(this.color)}setPreviewColor(n){this.previewColor=n?this.service.hsvaToRgba(n).toString():void 0}onChange(){}onColorClick(n){"string"==typeof n||void 0===n?this.changeColor(n):(this.variants=n.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){this.canChangeFormat&&(this.format=(this.format+1)%this.colorFormats.length,this.setColor(this.hsva))}emitClose(n){3==this.menu&&("cancel"==n||"accept"==n&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){3==this.menu&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(n){return n.target.classList.contains("ngx-colors-overlay")}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(mt),t.Y36(t.sBO))},g.\u0275cmp=t.Xpm({type:g,selectors:[["ngx-colors-panel"]],viewQuery:function(n,h){if(1&n&&t.Gf(R,5),2&n){let c;t.iGM(c=t.CRH())&&(h.panelRef=c.first)}},hostVars:4,hostBindings:function(n,h){1&n&&t.NdJ("mousedown",function(s){return h.click(s)},!1,t.evT)("scroll",function(){return h.onScroll()},!1,t.evT)("resize",function(){return h.onResize()},!1,t.Jf7),2&n&&t.Udp("top",h.top,"px")("left",h.left,"px")},decls:6,vars:6,consts:[[1,"opened"],["dialog",""],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"ngStyle","click"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style","\n            position: absolute;\n            height: 7px;\n            width: 7px;\n            border: 1px solid rgba(0, 0, 0, 0.03);\n            border-radius: 100%;\n            top: 0;\n            right: 0;\n          ",3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"controls","color","colorChange","onAlphaChange"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"ngStyle","click"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"controls","color","sliderChange"],[1,"manual-input-wrapper"],[3,"click"],[1,"g-input"],["placeholder","#FFFFFF","type","text",3,"value","keyup","keydown.enter"],["paintInput",""]],template:function(n,h){1&n&&(t.TgZ(0,"div",0,1),t.YNc(2,Y,5,4,"ng-container",2),t.YNc(3,Ct,8,2,"ng-container",2),t.YNc(4,bt,12,4,"ng-container",2),t.YNc(5,xt,6,6,"div",3),t.qZA()),2&n&&(t.Akn(h.positionString),t.xp6(2),t.Q6J("ngIf",1==h.menu),t.xp6(1),t.Q6J("ngIf",2==h.menu),t.xp6(1),t.Q6J("ngIf",3==h.menu),t.xp6(1),t.Q6J("ngIf",!h.hideTextInput))},dependencies:[e.sg,e.O5,e.PC,Dt],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[(0,I.X$)("colorsAnimation",[(0,I.eR)("void => slide-in",[(0,I.IO)(":enter",(0,I.oB)({opacity:0}),{optional:!0}),(0,I.IO)(":enter",(0,I.EY)("10ms",[(0,I.jt)(".3s ease-in",(0,I.F4)([(0,I.oB)({opacity:0,transform:"translatex(-50%)",offset:0}),(0,I.oB)({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),(0,I.oB)({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),(0,I.eR)("void => popup",[(0,I.IO)(":enter",(0,I.oB)({opacity:0,transform:"scale(0)"}),{optional:!0}),(0,I.IO)(":enter",(0,I.EY)("10ms",[(0,I.jt)("500ms ease-out",(0,I.F4)([(0,I.oB)({opacity:.5,transform:"scale(.5)",offset:.3}),(0,I.oB)({opacity:1,transform:"scale(1.1)",offset:.8}),(0,I.oB)({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),g})();const k={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0};let f=(()=>{class g{constructor(n,h,c){this.resolver=n,this.applicationRef=h,this.injector=c}createPanel(n,h){null!=this.componentRef&&this.removePanel();const c=this.resolver.resolveComponentFactory(C);this.componentRef=c.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);const s=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(h),Object.keys(k).forEach(l=>{this.overlay.style[l]=k[l]}),n?document.getElementById(n).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(s),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return g.\u0275fac=function(n){return new(n||g)(t.LFG(t._Vd),t.LFG(t.z2F),t.LFG(t.zs3))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac}),g})(),w=(()=>{class g{onClick(){this.openPanel()}constructor(n,h){this.triggerRef=n,this.panelFactory=h,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new t.vpe,this.input=new t.vpe,this.slider=new t.vpe,this.close=new t.vpe,this.open=new t.vpe,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}onChange(){this.onChangeCallback(this.color)}setDisabledState(n){this.isDisabled=n,this.triggerRef.nativeElement.style.opacity=n?.5:1}setColor(n){this.writeValue(n),this.input.emit(n)}sliderChange(n){this.slider.emit(n)}get value(){return this.color}set value(n){this.setColor(n),this.onChangeCallback(n)}writeValue(n){n!==this.color&&(this.color=n,this.onChange(),this.change.emit(n))}registerOnChange(n){this.onChangeCallback=n}registerOnTouched(n){this.onTouchedCallback=n}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(t.SBq),t.Y36(f))},g.\u0275dir=t.lG2({type:g,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(n,h){1&n&&t.NdJ("click",function(){return h.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},features:[t._Bn([{provide:F.JU,useExisting:(0,t.Gpc)(()=>g),multi:!0}])]}),g})(),E=(()=>{class g{constructor(n,h){this.cdRef=n,this.triggerDirective=h,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(n=>{this.color=n,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return g.\u0275fac=function(n){return new(n||g)(t.Y36(t.sBO),t.Y36(w,1))},g.\u0275cmp=t.Xpm({type:g,selectors:[["ngx-colors"]],decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(n,h){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.qZA()()()),2&n&&(t.xp6(3),t.ekj("colornull",!h.color),t.Q6J("ngStyle",t.VKq(3,W,h.color)))},dependencies:[e.PC],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),g})(),G=(()=>{class g{}return g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({providers:[mt,f],imports:[e.ez]}),g})();var ut=y(2787),kt=y(5052),yt=y(4203),Rt=y(7747);function At(g,v){1&g&&t._UZ(0,"div")}function Mt(g,v){if(1&g&&(t.ynx(0),t.YNc(1,At,1,0,"div",3),t.BQk()),2&g){const n=t.oxw(),h=t.MAs(4),c=t.MAs(2);t.xp6(1),t.Q6J("ngIf",n.element.multiple)("ngIfThen",h)("ngIfElse",c)}}function Ht(g,v){if(1&g&&t._UZ(0,"control-container",4),2&g){const n=t.oxw();t.Q6J("direction",n.direction)("form",n.groupForm)("controls",n.element.children)}}function Bt(g,v){if(1&g&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&g){const n=v.$implicit,h=t.oxw(2);t.Q6J("width",h.width),t.xp6(1),t.Oqu(n.name)}}function Nt(g,v){if(1&g&&(t.TgZ(0,"div"),t._UZ(1,"img",25),t.ALo(2,"async"),t.qZA()),2&g){const n=t.oxw().$implicit,h=t.oxw().$implicit,c=t.oxw(2);t.xp6(1),t.s9C("alt",n.key),t.Q6J("src",t.lcZ(2,2,c.getMedia(h[n.key])),t.LSH)}}function Jt(g,v){1&g&&(t.TgZ(0,"div")(1,"button",26),t._uU(2,"\u5b50\u96c6"),t.qZA()())}function Tt(g,v){if(1&g&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&g){const n=t.oxw().$implicit,h=t.oxw().$implicit;t.xp6(1),t.Oqu(h[n.key])}}function Yt(g,v){if(1&g&&(t.TgZ(0,"td"),t.ynx(1,22),t.YNc(2,Nt,3,4,"div",23),t.YNc(3,Jt,3,0,"div",23),t.YNc(4,Tt,2,1,"div",24),t.BQk(),t.qZA()),2&g){const n=v.$implicit;t.xp6(1),t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","image"),t.xp6(1),t.Q6J("ngSwitchCase","group")}}function Ut(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"tr",14)(1,"th",15),t._uU(2),t.qZA(),t.YNc(3,Yt,5,3,"td",16),t.TgZ(4,"td")(5,"div",17)(6,"a",18),t.NdJ("click",function(){const s=t.CHM(n).index,l=t.oxw(2);return t.KtG(l.open(s))}),t._UZ(7,"nb-icon",19),t.qZA(),t.TgZ(8,"a",20),t.NdJ("click",function(){const s=t.CHM(n).index,l=t.oxw(2);return t.KtG(l.delete(s))}),t._UZ(9,"nb-icon",21),t.qZA()()()()}if(2&g){const n=v.index,h=t.oxw(2);t.ekj("cursor-move",null==h.element.settings?null:h.element.settings.is_sort),t.Q6J("cdkDragDisabled",!(null!=h.element.settings&&h.element.settings.is_sort))("cdkDragData",n),t.xp6(2),t.Oqu(n+1),t.xp6(1),t.Q6J("ngForOf",h.head)}}function It(g,v){if(1&g){const n=t.EpF();t.TgZ(0,"table",5)(1,"thead")(2,"tr")(3,"th",6),t._uU(4,"#"),t.qZA(),t.YNc(5,Bt,2,2,"th",7),t.TgZ(6,"th",8),t._uU(7,"\u64cd\u4f5c"),t.qZA()()(),t.TgZ(8,"tbody",9),t.NdJ("cdkDropListDropped",function(c){t.CHM(n);const s=t.oxw();return t.KtG(s.drop(c))}),t.YNc(9,Ut,10,6,"tr",10),t.qZA(),t.TgZ(10,"tfoot")(11,"tr")(12,"td",11)(13,"button",12),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.open(c.arrayForm.length))}),t._uU(14,"\u6dfb\u52a0"),t.qZA()()()()()}if(2&g){const n=t.oxw();t.xp6(5),t.Q6J("ngForOf",n.head),t.xp6(1),t.Q6J("width",n.width),t.xp6(2),t.Q6J("cdkDropListDisabled",!(null!=n.element.settings&&n.element.settings.is_sort)),t.xp6(1),t.Q6J("ngForOf",n.values)}}const St=["containerComponent"];function Qt(g,v){if(1&g&&(t.TgZ(0,"nb-card-body"),t._UZ(1,"control-container",7,8),t.qZA()),2&g){const n=t.oxw();t.xp6(1),t.Q6J("form",n.group)("controls",n.controls)}}let Ft=(()=>{var g;class v{constructor(h,c){this.dialog=h,this.ckfinder=c,this.direction="column",this.elements=[],this.onChange=()=>{},this.onTouched=()=>{},this.values=[],this.head=[],this.width="100%"}ngOnInit(){if(this.element.children&&this.element.children.length>0){const h=[];this.element.children.forEach(c=>{h.push({name:c.label,key:c.id,type:c.type})}),this.head=h,this.width=100/(h.length+(this.element.multiple?1:0))+"%"}this.element.multiple&&(this.values=this.arrayForm.getRawValue())}get groupForm(){return this.form}get arrayForm(){return this.form}open(h){let c=!1;null==this.arrayForm.at(h)&&(this.arrayForm.push(new F.cw((0,ut.T)(this.element.children))),c=!0),this.dialogRef=this.dialog.open(V,{dialogClass:"container",closeOnEsc:!1,closeOnBackdropClick:!1,context:{controls:this.element.children,title:this.element.label,group:this.arrayForm.at(h)}}),this.dialogRef.onClose.subscribe(s=>{"cancel"===s?c&&this.arrayForm.removeAt(this.arrayForm.length-1):this.values=this.arrayForm.getRawValue()})}delete(h){this.arrayForm.removeAt(h),this.values=this.arrayForm.getRawValue()}drop(h){this.values.length>1&&((0,kt.bA)(this.values,h.previousIndex,h.currentIndex),this.arrayForm.setValue(this.values))}getMedia(h){return this.ckfinder.getAttachmentUrl(h)}}return(g=v).\u0275fac=function(h){return new(h||g)(t.Y36(P.Gln),t.Y36(yt.Q))},g.\u0275cmp=t.Xpm({type:g,selectors:[["group-control"]],inputs:{direction:"direction",element:"element",form:"form"},decls:5,vars:1,consts:[[4,"ngIf"],["objectBlock",""],["arrayBlock",""],[4,"ngIf","ngIfThen","ngIfElse"],[3,"direction","form","controls"],[1,"table","overflow-auto","text-nowrap","m-0","scrollable"],["scope","col"],["scope","col",3,"width",4,"ngFor","ngForOf"],["scope","col",1,"text-end",3,"width"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListDropped"],["class","align-middle","cdkDrag","",3,"cursor-move","cdkDragDisabled","cdkDragData",4,"ngFor","ngForOf"],["colspan","16",1,"text-end"],["status","primary","type","button","size","small","nbButton","",3,"click"],["scope","col",3,"width"],["cdkDrag","",1,"align-middle",3,"cdkDragDisabled","cdkDragData"],["scope","row"],[4,"ngFor","ngForOf"],[1,"ng2-smart-actions","d-flex","justify-content-end","h-100"],["href","javascript:",1,"ng2-smart-action","ng2-smart-action-edit-edit",3,"click"],["icon","edit-outline"],["href","javascript:",1,"ng2-smart-action","ng2-smart-action-delete-delete",3,"click"],["icon","trash-2-outline"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["width","100",3,"alt","src"],["nbButton","","status","primary","type","button","size","small"]],template:function(h,c){1&h&&(t.YNc(0,Mt,2,3,"ng-container",0),t.YNc(1,Ht,1,3,"ng-template",null,1,t.W1O),t.YNc(3,It,15,4,"ng-template",null,2,t.W1O)),2&h&&t.Q6J("ngIf",c.element.children)},dependencies:[e.sg,e.O5,e.RF,e.n9,e.ED,P.DPz,P.fMN,kt.Wj,kt.Zt,Rt._,e.Ov],styles:["\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .ng2-smart-action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;font-size:2rem!important;color:var(--text-basic-color)}[_nghost-%COMP%]   .ng2-smart-actions[_ngcontent-%COMP%]   a.ng2-smart-action[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid var(--smart-table-separator)}[_nghost-%COMP%]   .ng2-smart-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{margin-right:.25rem}[_nghost-%COMP%]   .cursor-move[_ngcontent-%COMP%]{cursor:move}  nb-dialog-container{width:100%}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{display:block;border:none;color:var(--text-hint-color)!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]{scrollbar-face-color:var(--sidebar-scrollbar-color);scrollbar-track-color:var(--sidebar-scrollbar-background-color)}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]::-webkit-scrollbar{width:var(--sidebar-scrollbar-width);height:var(--sidebar-scrollbar-width)}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--sidebar-scrollbar-color);cursor:pointer;border-radius:calc(var(--sidebar-scrollbar-width) * .5)}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--sidebar-scrollbar-background-color)}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-corner{background:var(--sidebar-scrollbar-background-color)}"]}),v})(),V=(()=>{var g;class v{constructor(h){this.dialogRef=h,this.controls=[],this.title=""}ngOnInit(){}cancel(){this.dialogRef.close("cancel")}save(){this.dialogRef.close("save")}}return(g=v).\u0275fac=function(h){return new(h||g)(t.Y36(P.X4l))},g.\u0275cmp=t.Xpm({type:g,selectors:[["group-control-dialog"]],viewQuery:function(h,c){if(1&h&&t.Gf(St,5),2&h){let s;t.iGM(s=t.CRH())&&(c.containerComponent=s.first)}},decls:11,vars:3,consts:[[1,"row","justify-content-center","scrollable"],[1,"col","col-md-6","col-xl-4"],[1,"scrollable"],[4,"ngIf"],[1,"d-flex","justify-content-between"],["nbButton","","status","basic",3,"click"],["nbButton","","status","primary",3,"disabled","click"],[3,"form","controls"],["containerComponent",""]],template:function(h,c){1&h&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nb-card",2)(3,"nb-card-header"),t._uU(4),t.qZA(),t.YNc(5,Qt,3,2,"nb-card-body",3),t.TgZ(6,"nb-card-footer",4)(7,"button",5),t.NdJ("click",function(){return c.cancel()}),t._uU(8,"\u53d6\u6d88"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return c.save()}),t._uU(10,"\u4fdd\u5b58"),t.qZA()()()()()),2&h&&(t.xp6(4),t.Oqu(c.title),t.xp6(1),t.Q6J("ngIf",c.controls.length>0),t.xp6(4),t.Q6J("disabled",c.group.invalid))},dependencies:[e.O5,P.Asz,P.yKW,P.XWE,P.ndF,P.DPz,Rt._],styles:["nb-card[_ngcontent-%COMP%]{max-height:100vh}"]}),v})(),Lt=(()=>{var g;class v{}return(g=v).\u0275fac=function(h){return new(h||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[e.ez,U.O,tt.d,P.COg,G,P.wB1,kt._t]}),v})();t.B6R(A.F,[e.sg,e.O5,e.RF,e.n9,F.Fj,F.JJ,F.JL,F.sg,F.u,P.NTf,P.DPz,P.h8i,P.$kf,P.B4C,P.MGu,P.VW_,P.r3g,P.MFI,P.rs,P.q51,P.lyj,P.Xh,P.wNd,E,w,P.BLq,Ft],[e.Ov])},2787:(Zt,dt,y)=>{y.d(dt,{T:()=>P});var e=y(9223);const P=function(tt,U){const A={};return tt.forEach(t=>{let F=U&&U.hasOwnProperty(t.id)?U[t.id]:t.multiple?t.value||[]:t.value;const I=[];if(t.required&&I.push(e.kI.required),t.validators&&t.validators.length>0&&t.validators.forEach(et=>{switch(et.key){case"min":I.push(e.kI.min(+et.value));break;case"max":I.push(e.kI.max(+et.value));break;case"pattern":I.push(e.kI.pattern(et.value.toString()));break;case"email":I.push(e.kI.email)}}),"group"==t.type)if(t.multiple){let et=[];(t.value??[]).forEach(_t=>{et.push(new e.cw(P(t.children,_t)))}),A[t.id]=new e.Oe(et)}else A[t.id]=new e.cw(P(t.children,t.value||{}));else A[t.id]=new e.NI(F,I)}),A}},5052:(Zt,dt,y)=>{y.d(dt,{Wj:()=>T,Zt:()=>l,_t:()=>O,bA:()=>nt});var e=y(3714),P=y(3223),tt=y(2357),U=y(3916),A=y(8790),t=y(7943),F=y(5992),I=y(5350),et=y(7137),_t=y(3733),ft=y(1145),j=y(3506),$=y(7701),at=y(5990),R=y(4359),Z=y(1553),H=y(8527),Q=y(3318),N=y(3192);function z(d,i,a){for(let o in i)if(i.hasOwnProperty(o)){const r=i[o];r?d.setProperty(o,r,a?.has(o)?"important":""):d.removeProperty(o)}return d}function Y(d,i){const a=i?"":"none";z(d.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":a,"-ms-user-select":a,"-webkit-user-select":a,"-moz-user-select":a})}function ct(d,i,a){z(d.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},a)}function W(d,i){return i&&"none"!=i?d+" "+i:d}function it(d){const i=d.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(d)*i}function bt(d,i){return d.getPropertyValue(i).split(",").map(o=>o.trim())}function xt(d){const i=d.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function q(d,i,a){const{top:o,bottom:r,left:p,right:_}=d;return a>=o&&a<=r&&i>=p&&i<=_}function lt(d,i,a){d.top+=i,d.bottom=d.top+d.height,d.left+=a,d.right=d.left+d.width}function pt(d,i,a,o){const{top:r,right:p,bottom:_,left:m,width:x,height:M}=d,B=x*i,L=M*i;return o>r-L&&o<_+L&&a>m-B&&a<p+B}class rt{constructor(i){this._document=i,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(a=>{this.positions.set(a,{scrollPosition:{top:a.scrollTop,left:a.scrollLeft},clientRect:xt(a)})})}handleScroll(i){const a=(0,U.sA)(i),o=this.positions.get(a);if(!o)return null;const r=o.scrollPosition;let p,_;if(a===this._document){const M=this.getViewportScrollPosition();p=M.top,_=M.left}else p=a.scrollTop,_=a.scrollLeft;const m=r.top-p,x=r.left-_;return this.positions.forEach((M,B)=>{M.clientRect&&a!==B&&a.contains(B)&&lt(M.clientRect,m,x)}),r.top=p,r.left=_,{top:m,left:x}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function st(d){const i=d.cloneNode(!0),a=i.querySelectorAll("[id]"),o=d.nodeName.toLowerCase();i.removeAttribute("id");for(let r=0;r<a.length;r++)a[r].removeAttribute("id");return"canvas"===o?mt(d,i):("input"===o||"select"===o||"textarea"===o)&&Pt(d,i),ht("canvas",d,i,mt),ht("input, textarea, select",d,i,Pt),i}function ht(d,i,a,o){const r=i.querySelectorAll(d);if(r.length){const p=a.querySelectorAll(d);for(let _=0;_<r.length;_++)o(r[_],p[_])}}let gt=0;function Pt(d,i){"file"!==i.type&&(i.value=d.value),"radio"===i.type&&i.name&&(i.name=`mat-clone-${i.name}-${gt++}`)}function mt(d,i){const a=i.getContext("2d");if(a)try{a.drawImage(d,0,0)}catch{}}const wt=(0,U.i$)({passive:!0}),vt=(0,U.i$)({passive:!1}),Dt=new Set(["position"]);class C{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(i){const a=(0,A.Ig)(i);a!==this._disabled&&(this._disabled=a,this._toggleNativeDragInteractions(),this._handles.forEach(o=>Y(o,a)))}constructor(i,a,o,r,p,_){this._config=a,this._document=o,this._ngZone=r,this._viewportRuler=p,this._dragDropRegistry=_,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new F.x,this._pointerMoveSubscription=I.w0.EMPTY,this._pointerUpSubscription=I.w0.EMPTY,this._scrollSubscription=I.w0.EMPTY,this._resizeSubscription=I.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new F.x,this.started=new F.x,this.released=new F.x,this.ended=new F.x,this.entered=new F.x,this.exited=new F.x,this.dropped=new F.x,this.moved=this._moveEvents,this._pointerDown=m=>{if(this.beforeStarted.next(),this._handles.length){const x=this._getTargetHandle(m);x&&!this._disabledHandles.has(x)&&!this.disabled&&this._initializeDragSequence(x,m)}else this.disabled||this._initializeDragSequence(this._rootElement,m)},this._pointerMove=m=>{const x=this._getPointerPositionOnPage(m);if(!this._hasStartedDragging){if(Math.abs(x.x-this._pickupPositionOnPage.x)+Math.abs(x.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const J=Date.now()>=this._dragStartTime+this._getDragStartDelay(m),ot=this._dropContainer;if(!J)return void this._endDragSequence(m);(!ot||!ot.isDragging()&&!ot.isReceiving())&&(m.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(m)))}return}m.preventDefault();const M=this._getConstrainedPointerPosition(x);if(this._hasMoved=!0,this._lastKnownPointerPosition=x,this._updatePointerDirectionDelta(M),this._dropContainer)this._updateActiveDropContainer(M,x);else{const B=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,L=this._activeTransform;L.x=M.x-B.x+this._passiveTransform.x,L.y=M.y-B.y+this._passiveTransform.y,this._applyRootElementTransform(L.x,L.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:M,event:m,distance:this._getDragDistance(M),delta:this._pointerDirectionDelta})})},this._pointerUp=m=>{this._endDragSequence(m)},this._nativeDragStart=m=>{if(this._handles.length){const x=this._getTargetHandle(m);x&&!this._disabledHandles.has(x)&&!this.disabled&&m.preventDefault()}else this.disabled||m.preventDefault()},this.withRootElement(i).withParent(a.parentDragRef||null),this._parentPositions=new rt(o),_.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(o=>(0,A.fI)(o)),this._handles.forEach(o=>Y(o,this.disabled)),this._toggleNativeDragInteractions();const a=new Set;return this._disabledHandles.forEach(o=>{this._handles.indexOf(o)>-1&&a.add(o)}),this._disabledHandles=a,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){const a=(0,A.fI)(i);return a!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{a.addEventListener("mousedown",this._pointerDown,vt),a.addEventListener("touchstart",this._pointerDown,wt),a.addEventListener("dragstart",this._nativeDragStart,vt)}),this._initialTransform=void 0,this._rootElement=a),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?(0,A.fI)(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),Y(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),Y(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){const i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){const i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const a=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(a),dropPoint:a,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){w(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const a=this._dropContainer;if(a){const o=this._rootElement,r=o.parentNode,p=this._placeholder=this._createPlaceholderElement(),_=this._anchor=this._anchor||this._document.createComment(""),m=this._getShadowRoot();r.insertBefore(_,o),this._initialTransform=o.style.transform||"",this._preview=this._createPreviewElement(),ct(o,!1,Dt),this._document.body.appendChild(r.replaceChild(p,o)),this._getPreviewInsertionPoint(r,m).appendChild(this._preview),this.started.next({source:this,event:i}),a.start(),this._initialContainer=a,this._initialIndex=a.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(a?a.getScrollableParents():[])}_initializeDragSequence(i,a){this._parentDragRef&&a.stopPropagation();const o=this.isDragging(),r=w(a),p=!r&&0!==a.button,_=this._rootElement,m=(0,U.sA)(a),x=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),M=r?(0,t.yG)(a):(0,t.X6)(a);if(m&&m.draggable&&"mousedown"===a.type&&a.preventDefault(),o||p||x||M)return;if(this._handles.length){const X=_.style;this._rootElementTapHighlight=X.webkitTapHighlightColor||"",X.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(X=>this._updateOnScroll(X)),this._boundaryElement&&(this._boundaryRect=xt(this._boundaryElement));const B=this._previewTemplate;this._pickupPositionInElement=B&&B.template&&!B.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,i,a);const L=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(a);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:L.x,y:L.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,a)}_cleanupDragArtifacts(i){ct(this._rootElement,!0,Dt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const a=this._dropContainer,o=a.getItemIndex(this),r=this._getPointerPositionOnPage(i),p=this._getDragDistance(r),_=a._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:p,dropPoint:r,event:i}),this.dropped.next({item:this,currentIndex:o,previousIndex:this._initialIndex,container:a,previousContainer:this._initialContainer,isPointerOverContainer:_,distance:p,dropPoint:r,event:i}),a.drop(this,o,this._initialIndex,this._initialContainer,_,p,r,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:a},{x:o,y:r}){let p=this._initialContainer._getSiblingContainerFromPosition(this,i,a);!p&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,a)&&(p=this._initialContainer),p&&p!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=p,this._dropContainer.enter(this,i,a,p===this._initialContainer&&p.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:p,currentIndex:p.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(o,r),this._dropContainer._sortItem(this,i,a,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,a):this._applyPreviewTransform(i-this._pickupPositionInElement.x,a-this._pickupPositionInElement.y))}_createPreviewElement(){const i=this._previewTemplate,a=this.previewClass,o=i?i.template:null;let r;if(o&&i){const p=i.matchSize?this._initialClientRect:null,_=i.viewContainer.createEmbeddedView(o,i.context);_.detectChanges(),r=E(_,this._document),this._previewRef=_,i.matchSize?G(r,p):r.style.transform=k(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=st(this._rootElement),G(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return z(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Dt),Y(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),a&&(Array.isArray(a)?a.forEach(p=>r.classList.add(p)):r.classList.add(a)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const i=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);const a=function Ct(d){const i=getComputedStyle(d),a=bt(i,"transition-property"),o=a.find(m=>"transform"===m||"all"===m);if(!o)return 0;const r=a.indexOf(o),p=bt(i,"transition-duration"),_=bt(i,"transition-delay");return it(p[r])+it(_[r])}(this._preview);return 0===a?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(o=>{const r=_=>{(!_||(0,U.sA)(_)===this._preview&&"transform"===_.propertyName)&&(this._preview?.removeEventListener("transitionend",r),o(),clearTimeout(p))},p=setTimeout(r,1.5*a);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const i=this._placeholderTemplate,a=i?i.template:null;let o;return a?(this._placeholderRef=i.viewContainer.createEmbeddedView(a,i.context),this._placeholderRef.detectChanges(),o=E(this._placeholderRef,this._document)):o=st(this._rootElement),o.style.pointerEvents="none",o.classList.add("cdk-drag-placeholder"),o}_getPointerPositionInElement(i,a,o){const r=a===this._rootElement?null:a,p=r?r.getBoundingClientRect():i,_=w(o)?o.targetTouches[0]:o,m=this._getViewportScrollPosition();return{x:p.left-i.left+(_.pageX-p.left-m.left),y:p.top-i.top+(_.pageY-p.top-m.top)}}_getPointerPositionOnPage(i){const a=this._getViewportScrollPosition(),o=w(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,r=o.pageX-a.left,p=o.pageY-a.top;if(this._ownerSVGElement){const _=this._ownerSVGElement.getScreenCTM();if(_){const m=this._ownerSVGElement.createSVGPoint();return m.x=r,m.y=p,m.matrixTransform(_.inverse())}}return{x:r,y:p}}_getConstrainedPointerPosition(i){const a=this._dropContainer?this._dropContainer.lockAxis:null;let{x:o,y:r}=this.constrainPosition?this.constrainPosition(i,this,this._initialClientRect,this._pickupPositionInElement):i;if("x"===this.lockAxis||"x"===a?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===a)&&(o=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:p,y:_}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,m=this._boundaryRect,{width:x,height:M}=this._getPreviewRect(),B=m.top+_,L=m.bottom-(M-_);o=f(o,m.left+p,m.right-(x-p)),r=f(r,B,L)}return{x:o,y:r}}_updatePointerDirectionDelta(i){const{x:a,y:o}=i,r=this._pointerDirectionDelta,p=this._pointerPositionAtLastDirectionChange,_=Math.abs(a-p.x),m=Math.abs(o-p.y);return _>this._config.pointerDirectionChangeThreshold&&(r.x=a>p.x?1:-1,p.x=a),m>this._config.pointerDirectionChangeThreshold&&(r.y=o>p.y?1:-1,p.y=o),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,Y(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,vt),i.removeEventListener("touchstart",this._pointerDown,wt),i.removeEventListener("dragstart",this._nativeDragStart,vt)}_applyRootElementTransform(i,a){const o=k(i,a),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=W(o,this._initialTransform)}_applyPreviewTransform(i,a){const o=this._previewTemplate?.template?void 0:this._initialTransform,r=k(i,a);this._preview.style.transform=W(r,o)}_getDragDistance(i){const a=this._pickupPositionOnPage;return a?{x:i.x-a.x,y:i.y-a.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:a}=this._passiveTransform;if(0===i&&0===a||this.isDragging()||!this._boundaryElement)return;const o=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===o.width&&0===o.height)return;const p=r.left-o.left,_=o.right-r.right,m=r.top-o.top,x=o.bottom-r.bottom;r.width>o.width?(p>0&&(i+=p),_>0&&(i-=_)):i=0,r.height>o.height?(m>0&&(a+=m),x>0&&(a-=x)):a=0,(i!==this._passiveTransform.x||a!==this._passiveTransform.y)&&this.setFreeDragPosition({y:a,x:i})}_getDragStartDelay(i){const a=this.dragStartDelay;return"number"==typeof a?a:w(i)?a.touch:a?a.mouse:0}_updateOnScroll(i){const a=this._parentPositions.handleScroll(i);if(a){const o=(0,U.sA)(i);this._boundaryRect&&o!==this._boundaryElement&&o.contains(this._boundaryElement)&&lt(this._boundaryRect,a.top,a.left),this._pickupPositionOnPage.x+=a.left,this._pickupPositionOnPage.y+=a.top,this._dropContainer||(this._activeTransform.x-=a.left,this._activeTransform.y-=a.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,U.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,a){const o=this._previewContainer||"global";if("parent"===o)return i;if("global"===o){const r=this._document;return a||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return(0,A.fI)(o)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(i){return this._handles.find(a=>i.target&&(i.target===a||a.contains(i.target)))}}function k(d,i){return`translate3d(${Math.round(d)}px, ${Math.round(i)}px, 0)`}function f(d,i,a){return Math.max(i,Math.min(a,d))}function w(d){return"t"===d.type[0]}function E(d,i){const a=d.rootNodes;if(1===a.length&&a[0].nodeType===i.ELEMENT_NODE)return a[0];const o=i.createElement("div");return a.forEach(r=>o.appendChild(r)),o}function G(d,i){d.style.width=`${i.width}px`,d.style.height=`${i.height}px`,d.style.transform=k(i.left,i.top)}function nt(d,i,a){const o=yt(i,d.length-1),r=yt(a,d.length-1);if(o===r)return;const p=d[o],_=r<o?-1:1;for(let m=o;m!==r;m+=_)d[m]=d[m+_];d[r]=p}function yt(d,i){return Math.max(0,Math.min(i,d))}class Rt{constructor(i,a){this._element=i,this._dragDropRegistry=a,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(i){this.withItems(i)}sort(i,a,o,r){const p=this._itemPositions,_=this._getItemIndexFromPointerPosition(i,a,o,r);if(-1===_&&p.length>0)return null;const m="horizontal"===this.orientation,x=p.findIndex(K=>K.drag===i),M=p[_],L=M.clientRect,X=x>_?1:-1,J=this._getItemOffsetPx(p[x].clientRect,L,X),ot=this._getSiblingOffsetPx(x,p,X),Et=p.slice();return nt(p,x,_),p.forEach((K,Vt)=>{if(Et[Vt]===K)return;const Wt=K.drag===i,Gt=Wt?J:ot,zt=Wt?i.getPlaceholderElement():K.drag.getRootElement();K.offset+=Gt,m?(zt.style.transform=W(`translate3d(${Math.round(K.offset)}px, 0, 0)`,K.initialTransform),lt(K.clientRect,0,Gt)):(zt.style.transform=W(`translate3d(0, ${Math.round(K.offset)}px, 0)`,K.initialTransform),lt(K.clientRect,Gt,0))}),this._previousSwap.overlaps=q(L,a,o),this._previousSwap.drag=M.drag,this._previousSwap.delta=m?r.x:r.y,{previousIndex:x,currentIndex:_}}enter(i,a,o,r){const p=null==r||r<0?this._getItemIndexFromPointerPosition(i,a,o):r,_=this._activeDraggables,m=_.indexOf(i),x=i.getPlaceholderElement();let M=_[p];if(M===i&&(M=_[p+1]),!M&&(null==p||-1===p||p<_.length-1)&&this._shouldEnterAsFirstChild(a,o)&&(M=_[0]),m>-1&&_.splice(m,1),M&&!this._dragDropRegistry.isDragging(M)){const B=M.getRootElement();B.parentElement.insertBefore(x,B),_.splice(p,0,i)}else(0,A.fI)(this._element).appendChild(x),_.push(i);x.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables.forEach(i=>{const a=i.getRootElement();if(a){const o=this._itemPositions.find(r=>r.drag===i)?.initialTransform;a.style.transform=o||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(o=>o.drag===i)}updateOnScroll(i,a){this._itemPositions.forEach(({clientRect:o})=>{lt(o,i,a)}),this._itemPositions.forEach(({drag:o})=>{this._dragDropRegistry.isDragging(o)&&o._sortFromLastPointerPosition()})}_cacheItemPositions(){const i="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(a=>{const o=a.getVisibleElement();return{drag:a,offset:0,initialTransform:o.style.transform||"",clientRect:xt(o)}}).sort((a,o)=>i?a.clientRect.left-o.clientRect.left:a.clientRect.top-o.clientRect.top)}_getItemOffsetPx(i,a,o){const r="horizontal"===this.orientation;let p=r?a.left-i.left:a.top-i.top;return-1===o&&(p+=r?a.width-i.width:a.height-i.height),p}_getSiblingOffsetPx(i,a,o){const r="horizontal"===this.orientation,p=a[i].clientRect,_=a[i+-1*o];let m=p[r?"width":"height"]*o;if(_){const x=r?"left":"top",M=r?"right":"bottom";-1===o?m-=_.clientRect[x]-p[M]:m+=p[x]-_.clientRect[M]}return m}_shouldEnterAsFirstChild(i,a){if(!this._activeDraggables.length)return!1;const o=this._itemPositions,r="horizontal"===this.orientation;if(o[0].drag!==this._activeDraggables[0]){const _=o[o.length-1].clientRect;return r?i>=_.right:a>=_.bottom}{const _=o[0].clientRect;return r?i<=_.left:a<=_.top}}_getItemIndexFromPointerPosition(i,a,o,r){const p="horizontal"===this.orientation,_=this._itemPositions.findIndex(({drag:m,clientRect:x})=>m!==i&&((!r||m!==this._previousSwap.drag||!this._previousSwap.overlaps||(p?r.x:r.y)!==this._previousSwap.delta)&&(p?a>=Math.floor(x.left)&&a<Math.floor(x.right):o>=Math.floor(x.top)&&o<Math.floor(x.bottom))));return-1!==_&&this._sortPredicate(_,i)?_:-1}}class Ht{constructor(i,a,o,r,p){this._dragDropRegistry=a,this._ngZone=r,this._viewportRuler=p,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new F.x,this.entered=new F.x,this.exited=new F.x,this.dropped=new F.x,this.sorted=new F.x,this.receivingStarted=new F.x,this.receivingStopped=new F.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=I.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new F.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,et.F)(0,_t.Z).pipe((0,$.R)(this._stopScrollTimers)).subscribe(()=>{const _=this._scrollNode,m=this.autoScrollStep;1===this._verticalScrollDirection?_.scrollBy(0,-m):2===this._verticalScrollDirection&&_.scrollBy(0,m),1===this._horizontalScrollDirection?_.scrollBy(-m,0):2===this._horizontalScrollDirection&&_.scrollBy(m,0)})},this.element=(0,A.fI)(i),this._document=o,this.withScrollableParents([this.element]),a.registerDropContainer(this),this._parentPositions=new rt(o),this._sortStrategy=new Rt(this.element,a),this._sortStrategy.withSortPredicate((_,m)=>this.sortPredicate(_,m,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,a,o,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(i)),this._sortStrategy.enter(i,a,o,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,a,o,r,p,_,m,x={}){this._reset(),this.dropped.next({item:i,currentIndex:a,previousIndex:o,container:this,previousContainer:r,isPointerOverContainer:p,distance:_,dropPoint:m,event:x})}withItems(i){const a=this._draggables;return this._draggables=i,i.forEach(o=>o._withDropContainer(this)),this.isDragging()&&(a.filter(r=>r.isDragging()).every(r=>-1===i.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._sortStrategy.direction=i,this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){return this._sortStrategy.orientation=i,this}withScrollableParents(i){const a=(0,A.fI)(this.element);return this._scrollableElements=-1===i.indexOf(a)?[a,...i]:i.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,a,o,r){if(this.sortingDisabled||!this._clientRect||!pt(this._clientRect,.05,a,o))return;const p=this._sortStrategy.sort(i,a,o,r);p&&this.sorted.next({previousIndex:p.previousIndex,currentIndex:p.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,a){if(this.autoScrollDisabled)return;let o,r=0,p=0;if(this._parentPositions.positions.forEach((_,m)=>{m===this._document||!_.clientRect||o||pt(_.clientRect,.05,i,a)&&([r,p]=function Jt(d,i,a,o){const r=Bt(i,o),p=Nt(i,a);let _=0,m=0;if(r){const x=d.scrollTop;1===r?x>0&&(_=1):d.scrollHeight-x>d.clientHeight&&(_=2)}if(p){const x=d.scrollLeft;1===p?x>0&&(m=1):d.scrollWidth-x>d.clientWidth&&(m=2)}return[_,m]}(m,_.clientRect,i,a),(r||p)&&(o=m))}),!r&&!p){const{width:_,height:m}=this._viewportRuler.getViewportSize(),x={width:_,height:m,top:0,right:_,bottom:m,left:0};r=Bt(x,a),p=Nt(x,i),o=window}o&&(r!==this._verticalScrollDirection||p!==this._horizontalScrollDirection||o!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=p,this._scrollNode=o,(r||p)&&o?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const i=(0,A.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const i=(0,A.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(i).clientRect}_reset(){this._isDragging=!1;const i=(0,A.fI)(this.element).style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(a=>a._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(i,a){return null!=this._clientRect&&q(this._clientRect,i,a)}_getSiblingContainerFromPosition(i,a,o){return this._siblings.find(r=>r._canReceive(i,a,o))}_canReceive(i,a,o){if(!this._clientRect||!q(this._clientRect,a,o)||!this.enterPredicate(i,this))return!1;const r=this._getShadowRoot().elementFromPoint(a,o);if(!r)return!1;const p=(0,A.fI)(this.element);return r===p||p.contains(r)}_startReceiving(i,a){const o=this._activeSiblings;!o.has(i)&&a.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(o.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:a}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){const a=this._parentPositions.handleScroll(i);a&&this._sortStrategy.updateOnScroll(a.top,a.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const i=(0,U.kV)((0,A.fI)(this.element));this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const i=this._sortStrategy.getActiveItemsSnapshot().filter(a=>a.isDragging());this._siblings.forEach(a=>a._startReceiving(this,i))}}function Bt(d,i){const{top:a,bottom:o,height:r}=d,p=.05*r;return i>=a-p&&i<=a+p?1:i>=o-p&&i<=o+p?2:0}function Nt(d,i){const{left:a,right:o,width:r}=d,p=.05*r;return i>=a-p&&i<=a+p?1:i>=o-p&&i<=o+p?2:0}const Tt=(0,U.i$)({passive:!1,capture:!0});let Yt=(()=>{var d;class i{constructor(o,r){this._ngZone=o,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=p=>p.isDragging(),this.pointerMove=new F.x,this.pointerUp=new F.x,this.scroll=new F.x,this._preventDefaultWhileDragging=p=>{this._activeDragInstances.length>0&&p.preventDefault()},this._persistentTouchmoveListener=p=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&p.preventDefault(),this.pointerMove.next(p))},this._document=r}registerDropContainer(o){this._dropInstances.has(o)||this._dropInstances.add(o)}registerDragItem(o){this._dragInstances.add(o),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Tt)})}removeDropContainer(o){this._dropInstances.delete(o)}removeDragItem(o){this._dragInstances.delete(o),this.stopDragging(o),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Tt)}startDragging(o,r){if(!(this._activeDragInstances.indexOf(o)>-1)&&(this._activeDragInstances.push(o),1===this._activeDragInstances.length)){const p=r.type.startsWith("touch");this._globalListeners.set(p?"touchend":"mouseup",{handler:_=>this.pointerUp.next(_),options:!0}).set("scroll",{handler:_=>this.scroll.next(_),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Tt}),p||this._globalListeners.set("mousemove",{handler:_=>this.pointerMove.next(_),options:Tt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((_,m)=>{this._document.addEventListener(m,_.handler,_.options)})})}}stopDragging(o){const r=this._activeDragInstances.indexOf(o);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(o){return this._activeDragInstances.indexOf(o)>-1}scrolled(o){const r=[this.scroll];return o&&o!==this._document&&r.push(new ft.y(p=>this._ngZone.runOutsideAngular(()=>{const m=x=>{this._activeDragInstances.length&&p.next(x)};return o.addEventListener("scroll",m,!0),()=>{o.removeEventListener("scroll",m,!0)}}))),(0,j.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(o=>this.removeDragItem(o)),this._dropInstances.forEach(o=>this.removeDropContainer(o)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((o,r)=>{this._document.removeEventListener(r,o.handler,o.options)}),this._globalListeners.clear()}}return(d=i).\u0275fac=function(o){return new(o||d)(e.LFG(e.R0b),e.LFG(P.K0))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),i})();const Ut={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let It=(()=>{var d;class i{constructor(o,r,p,_){this._document=o,this._ngZone=r,this._viewportRuler=p,this._dragDropRegistry=_}createDrag(o,r=Ut){return new C(o,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(o){return new Ht(o,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return(d=i).\u0275fac=function(o){return new(o||d)(e.LFG(P.K0),e.LFG(e.R0b),e.LFG(tt.rL),e.LFG(Yt))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),i})();const St=new e.OlP("CDK_DRAG_PARENT"),Ft=new e.OlP("CdkDragHandle"),Lt=new e.OlP("CdkDragPlaceholder"),v=new e.OlP("CdkDragPreview"),h=new e.OlP("CDK_DRAG_CONFIG"),s=new e.OlP("CdkDropList");let l=(()=>{var d;class i{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(o){this._disabled=(0,A.Ig)(o),this._dragRef.disabled=this._disabled}constructor(o,r,p,_,m,x,M,B,L,X,J){this.element=o,this.dropContainer=r,this._ngZone=_,this._viewContainerRef=m,this._dir=M,this._changeDetectorRef=L,this._selfHandle=X,this._parentDrag=J,this._destroyed=new F.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new ft.y(ot=>{const Et=this._dragRef.moved.pipe((0,at.U)(K=>({source:this,pointerPosition:K.pointerPosition,event:K.event,delta:K.delta,distance:K.distance}))).subscribe(ot);return()=>{Et.unsubscribe()}}),this._dragRef=B.createDrag(o,{dragStartThreshold:x&&null!=x.dragStartThreshold?x.dragStartThreshold:5,pointerDirectionChangeThreshold:x&&null!=x.pointerDirectionChangeThreshold?x.pointerDirectionChangeThreshold:5,zIndex:x?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),x&&this._assignDefaults(x),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(o){this._dragRef.setFreeDragPosition(o)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,R.q)(1),(0,$.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(o){const r=o.rootElementSelector,p=o.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),p&&!p.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const o=i._dragInstances.indexOf(this);o>-1&&i._dragInstances.splice(o,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const o=this.element.nativeElement;let r=o;this.rootElementSelector&&(r=void 0!==o.closest?o.closest(this.rootElementSelector):o.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||o)}_getBoundaryElement(){const o=this.boundaryElement;return o?"string"==typeof o?this.element.nativeElement.closest(o):(0,A.fI)(o):null}_syncInputs(o){o.beforeStarted.subscribe(()=>{if(!o.isDragging()){const r=this._dir,p=this.dragStartDelay,_=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,m=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;o.disabled=this.disabled,o.lockAxis=this.lockAxis,o.dragStartDelay="object"==typeof p&&p?p:(0,A.su)(p),o.constrainPosition=this.constrainPosition,o.previewClass=this.previewClass,o.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(_).withPreviewTemplate(m).withPreviewContainer(this.previewContainer||"global"),r&&o.withDirection(r.value)}}),o.beforeStarted.pipe((0,R.q)(1)).subscribe(()=>{if(this._parentDrag)return void o.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){o.withParent(i._dragInstances.find(p=>p.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(o){o.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),o.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),o.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),o.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),o.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),o.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(o){const{lockAxis:r,dragStartDelay:p,constrainPosition:_,previewClass:m,boundaryElement:x,draggingDisabled:M,rootElementSelector:B,previewContainer:L}=o;this.disabled=M??!1,this.dragStartDelay=p||0,r&&(this.lockAxis=r),_&&(this.constrainPosition=_),m&&(this.previewClass=m),x&&(this.boundaryElement=x),B&&(this.rootElementSelector=B),L&&(this.previewContainer=L)}_setupHandlesListener(){this._handles.changes.pipe((0,Z.O)(this._handles),(0,H.b)(o=>{const r=o.filter(p=>p._parentDrag===this).map(p=>p.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),(0,Q.w)(o=>(0,j.T)(...o.map(r=>r._stateChanges.pipe((0,Z.O)(r))))),(0,$.R)(this._destroyed)).subscribe(o=>{const r=this._dragRef,p=o.element.nativeElement;o.disabled?r.disableHandle(p):r.enableHandle(p)})}}return(d=i)._dragInstances=[],d.\u0275fac=function(o){return new(o||d)(e.Y36(e.SBq),e.Y36(s,12),e.Y36(P.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(h,8),e.Y36(N.Is,8),e.Y36(It),e.Y36(e.sBO),e.Y36(Ft,10),e.Y36(St,12))},d.\u0275dir=e.lG2({type:d,selectors:[["","cdkDrag",""]],contentQueries:function(o,r,p){if(1&o&&(e.Suo(p,v,5),e.Suo(p,Lt,5),e.Suo(p,Ft,5)),2&o){let _;e.iGM(_=e.CRH())&&(r._previewTemplate=_.first),e.iGM(_=e.CRH())&&(r._placeholderTemplate=_.first),e.iGM(_=e.CRH())&&(r._handles=_)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(o,r){2&o&&e.ekj("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[e._Bn([{provide:St,useExisting:d}]),e.TTD]}),i})();const u=new e.OlP("CdkDropListGroup");let D=0,T=(()=>{var d;class i{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(o){this._dropListRef.disabled=this._disabled=(0,A.Ig)(o)}constructor(o,r,p,_,m,x,M){this.element=o,this._changeDetectorRef=p,this._scrollDispatcher=_,this._dir=m,this._group=x,this._destroyed=new F.x,this.connectedTo=[],this.id="cdk-drop-list-"+D++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=r.createDropList(o),this._dropListRef.data=this,M&&this._assignDefaults(M),this._dropListRef.enterPredicate=(B,L)=>this.enterPredicate(B.data,L.data),this._dropListRef.sortPredicate=(B,L,X)=>this.sortPredicate(B,L.data,X.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),i._dropLists.push(this),x&&x._items.add(this)}addItem(o){this._unsortedItems.add(o),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(o){this._unsortedItems.delete(o),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((o,r)=>o._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const o=i._dropLists.indexOf(this);o>-1&&i._dropLists.splice(o,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(o){this._dir&&this._dir.change.pipe((0,Z.O)(this._dir.value),(0,$.R)(this._destroyed)).subscribe(r=>o.withDirection(r)),o.beforeStarted.subscribe(()=>{const r=(0,A.Eq)(this.connectedTo).map(p=>"string"==typeof p?i._dropLists.find(m=>m.id===p):p);if(this._group&&this._group._items.forEach(p=>{-1===r.indexOf(p)&&r.push(p)}),!this._scrollableParentsResolved){const p=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(_=>_.getElementRef().nativeElement);this._dropListRef.withScrollableParents(p),this._scrollableParentsResolved=!0}o.disabled=this.disabled,o.lockAxis=this.lockAxis,o.sortingDisabled=(0,A.Ig)(this.sortingDisabled),o.autoScrollDisabled=(0,A.Ig)(this.autoScrollDisabled),o.autoScrollStep=(0,A.su)(this.autoScrollStep,2),o.connectedTo(r.filter(p=>p&&p!==this).map(p=>p._dropListRef)).withOrientation(this.orientation)})}_handleEvents(o){o.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),o.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),o.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),o.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),o.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),(0,j.T)(o.receivingStarted,o.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(o){const{lockAxis:r,draggingDisabled:p,sortingDisabled:_,listAutoScrollDisabled:m,listOrientation:x}=o;this.disabled=p??!1,this.sortingDisabled=_??!1,this.autoScrollDisabled=m??!1,this.orientation=x||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(o=>o._dragRef))}}return(d=i)._dropLists=[],d.\u0275fac=function(o){return new(o||d)(e.Y36(e.SBq),e.Y36(It),e.Y36(e.sBO),e.Y36(tt.mF),e.Y36(N.Is,8),e.Y36(u,12),e.Y36(h,8))},d.\u0275dir=e.lG2({type:d,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(o,r){2&o&&(e.uIk("id",r.id),e.ekj("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[e._Bn([{provide:u,useValue:void 0},{provide:s,useExisting:d}])]}),i})(),O=(()=>{var d;class i{}return(d=i).\u0275fac=function(o){return new(o||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({providers:[It],imports:[tt.ZD]}),i})()},3523:(Zt,dt,y)=>{y.d(dt,{u:()=>v,d:()=>h});var e=y(1921),P=y(3714);function F(c,s=new Set){const l=[c],u=new Set;let b=0;for(;l.length>b;){const D=l[b++];if(!u.has(D)&&I(D)&&!s.has(D))if(u.add(D),Symbol.iterator in D)try{for(const T of D)l.push(T)}catch{}else for(const T in D)"defaultValue"!==T&&l.push(D[T])}return u}function I(c){const s=Object.prototype.toString.call(c),l=typeof c;return!("number"===l||"boolean"===l||"string"===l||"symbol"===l||"function"===l||"[object Date]"===s||"[object RegExp]"===s||"[object Module]"===s||null==c||c._watchdogExcluded||c instanceof EventTarget||c instanceof Event)}Symbol("MainQueueId");class j{constructor(s){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof s.crashNumberLimit?s.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof s.minimumNonErrorTimePeriod?s.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=l=>{const u="error"in l?l.error:l.reason;u instanceof Error&&this._handleError(u,l)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(s,l){this._listeners[s]||(this._listeners[s]=[]),this._listeners[s].push(l)}off(s,l){this._listeners[s]=this._listeners[s].filter(u=>u!==l)}_fire(s,...l){const u=this._listeners[s]||[];for(const b of u)b.apply(this,[null,...l])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(s,l){if(this._shouldReactToError(s)){this.crashes.push({message:s.message,stack:s.stack,filename:l instanceof ErrorEvent?l.filename:void 0,lineno:l instanceof ErrorEvent?l.lineno:void 0,colno:l instanceof ErrorEvent?l.colno:void 0,date:this._now()});const u=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:s,causesRestart:u}),u?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(s){return s.is&&s.is("CKEditorError")&&null!=s.context&&"ready"===this.state&&this._isErrorComingFromThisItem(s)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}var $=y(1453),at=y(202);const Z=function(){return at.Z.Date.now()};var H=/\s/;var z=/^\s+/;const ct=function Y(c){return c&&c.slice(0,function Q(c){for(var s=c.length;s--&&H.test(c.charAt(s)););return s}(c)+1).replace(z,"")};var W=y(7495),it=y(8129);var lt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,rt=/^0o[0-7]+$/i,st=parseInt;const gt=function ht(c){if("number"==typeof c)return c;if(function bt(c){return"symbol"==typeof c||(0,it.Z)(c)&&"[object Symbol]"==(0,W.Z)(c)}(c))return NaN;if((0,$.Z)(c)){var s="function"==typeof c.valueOf?c.valueOf():c;c=(0,$.Z)(s)?s+"":s}if("string"!=typeof c)return 0===c?c:+c;c=ct(c);var l=pt.test(c);return l||rt.test(c)?st(c.slice(2),l?2:8):lt.test(c)?NaN:+c};var mt=Math.max,wt=Math.min;const k=function C(c,s,l){var u=!0,b=!0;if("function"!=typeof c)throw new TypeError("Expected a function");return(0,$.Z)(l)&&(u="leading"in l?!!l.leading:u,b="trailing"in l?!!l.trailing:b),function vt(c,s,l){var u,b,D,T,S,O,d=0,i=!1,a=!1,o=!0;if("function"!=typeof c)throw new TypeError("Expected a function");function r(J){var ot=u,Et=b;return u=b=void 0,d=J,T=c.apply(Et,ot)}function m(J){var ot=J-O;return void 0===O||ot>=s||ot<0||a&&J-d>=D}function x(){var J=Z();if(m(J))return M(J);S=setTimeout(x,function _(J){var K=s-(J-O);return a?wt(K,D-(J-d)):K}(J))}function M(J){return S=void 0,o&&u?r(J):(u=b=void 0,T)}function X(){var J=Z(),ot=m(J);if(u=arguments,b=this,O=J,ot){if(void 0===S)return function p(J){return d=J,S=setTimeout(x,s),i?r(J):T}(O);if(a)return clearTimeout(S),S=setTimeout(x,s),r(O)}return void 0===S&&(S=setTimeout(x,s)),T}return s=gt(s)||0,(0,$.Z)(l)&&(i=!!l.leading,D=(a="maxWait"in l)?mt(gt(l.maxWait)||0,s):D,o="trailing"in l?!!l.trailing:o),X.cancel=function B(){void 0!==S&&clearTimeout(S),d=0,u=O=b=S=void 0},X.flush=function L(){return void 0===S?T:M(Z())},X}(c,s,{leading:u,maxWait:s,trailing:b})};var f=y(3057),nt=Function.prototype.toString,ut=Object.prototype.hasOwnProperty,kt=nt.call(Object);const Mt=function At(c){return(0,it.Z)(c)&&1===c.nodeType&&!function yt(c){if(!(0,it.Z)(c)||"[object Object]"!=(0,W.Z)(c))return!1;var s=(0,f.Z)(c);if(null===s)return!0;var l=ut.call(s,"constructor")&&s.constructor;return"function"==typeof l&&l instanceof l&&nt.call(l)==kt}(c)};var Ht=y(2311);class Yt extends j{constructor(s,l={}){super(l),this._editor=null,this._initUsingData=!0,this._editables={},this._throttledSave=k(this._save.bind(this),"number"==typeof l.saveInterval?l.saveInterval:5e3),s&&(this._creator=(u,b)=>s.create(u,b)),this._destructor=u=>u.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(s){this._creator=s}setDestructor(s){this._destructor=s}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(s=>{console.error("An error happened during the editor destroying.",s)}).then(()=>{const s={},l=[],u=this._config.rootsAttributes||{},b={};for(const[T,S]of Object.entries(this._data.roots))S.isLoaded?(s[T]="",b[T]=u[T]||{}):l.push(T);const D={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:l,rootsAttributes:b,_watchdogInitialData:this._data};return delete D.initialData,D.extraPlugins.push(Ut),this._initUsingData?this.create(s,D,D.context):Mt(this._elementOrData)?this.create(this._elementOrData,D,D.context):this.create(this._editables,D,D.context)}).then(()=>{this._fire("restart")})}create(s=this._elementOrData,l=this._config,u){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=s,this._initUsingData="string"==typeof s||Object.keys(s).length>0&&"string"==typeof Object.values(s)[0],this._config=this._cloneEditorConfiguration(l)||{},this._config.context=u,this._creator(s,this._config))).then(b=>{this._editor=b,b.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=b.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const s=this._editor;return this._editor=null,s.model.document.off("change:data",this._throttledSave),this._destructor(s)})}_save(){const s=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=s}catch(l){console.error(l,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(s){this._excludedProps=s}_getData(){const s=this._editor,l=s.model.document.roots.filter(S=>S.isAttached()&&"$graveyard"!=S.rootName),{plugins:u}=s,b=u.has("CommentsRepository")&&u.get("CommentsRepository"),D=u.has("TrackChanges")&&u.get("TrackChanges"),T={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};l.forEach(S=>{T.roots[S.rootName]={content:JSON.stringify(Array.from(S.getChildren())),attributes:JSON.stringify(Array.from(S.getAttributes())),isLoaded:S._isLoaded}});for(const S of s.model.markers)S._affectsData&&(T.markers[S.name]={rangeJSON:S.getRange().toJSON(),usingOperation:S._managedUsingOperations,affectsData:S._affectsData});return b&&(T.commentThreads=JSON.stringify(b.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),D&&(T.suggestions=JSON.stringify(D.getSuggestions({toJSON:!0,skipNotAttached:!0}))),T}_getEditables(){const s={};for(const l of this.editor.model.document.getRootNames()){const u=this.editor.ui.getEditableElement(l);u&&(s[l]=u)}return s}_isErrorComingFromThisItem(s){return function et(c,s,l=new Set){if(c===s&&function ft(c){return"object"==typeof c&&null!==c}(c))return!0;const u=F(c,l),b=F(s,l);for(const D of u)if(b.has(D))return!0;return!1}(this._editor,s.context,this._excludedProps)}_cloneEditorConfiguration(s){return function Jt(c,s){return(0,Ht.Z)(c,5,s="function"==typeof s?s:void 0)}(s,(l,u)=>{if(Mt(l)||"context"===u)return l})}}class Ut{constructor(s){this.editor=s,this._data=s.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",s=>{s.stop(),this.editor.model.enqueueChange({isUndoable:!1},l=>{this._restoreCollaborationData(),this._restoreEditorData(l)}),this.editor.data.fire("ready")},{priority:999})}_createNode(s,l){if("name"in l){const u=s.createElement(l.name,l.attributes);if(l.children)for(const b of l.children)u._appendChild(this._createNode(s,b));return u}return s.createText(l.data,l.attributes)}_restoreEditorData(s){const l=this.editor;Object.entries(this._data.roots).forEach(([u,{content:b,attributes:D}])=>{const T=JSON.parse(b),S=JSON.parse(D),O=l.model.document.getRoot(u);for(const[d,i]of S)s.setAttribute(d,i,O);for(const d of T){const i=this._createNode(s,d);s.insert(i,O,"end")}}),Object.entries(this._data.markers).forEach(([u,b])=>{const{document:D}=l.model,{rangeJSON:{start:T,end:S},...O}=b,d=D.getRoot(T.root),i=s.createPositionFromPath(d,T.path,T.stickiness),a=s.createPositionFromPath(d,S.path,S.stickiness),o=s.createRange(i,a);s.addMarker(u,{range:o,...O})})}_restoreCollaborationData(){const s=JSON.parse(this._data.commentThreads),l=JSON.parse(this._data.suggestions);s.forEach(u=>{const b=this.editor.config.get("collaboration.channelId"),D=this.editor.plugins.get("CommentsRepository");D.hasCommentThread(u.threadId)&&D.getCommentThread(u.threadId).remove(),D.addCommentThread({channelId:b,...u})}),l.forEach(u=>{const b=this.editor.plugins.get("TrackChangesEditing");b.hasSuggestion(u.id)?b.getSuggestion(u.id).attributes=u.attributes:b.addSuggestionData(u)})}}var It=y(2972),St=y(9223),Qt=y(3223);function Ft(c,s){}const V=new Array(256).fill(0).map((c,s)=>("0"+s.toString(16)).slice(-2)),g="Lock from Angular integration (@ckeditor/ckeditor5-angular)";let v=(()=>{class c{constructor(l,u){this.config={},this.data="",this.tagName="div",this.disableTwoWayDataBinding=!1,this.ready=new P.vpe,this.change=new P.vpe,this.blur=new P.vpe,this.focus=new P.vpe,this.error=new P.vpe,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function Lt(){const c=4294967296*Math.random()>>>0,s=4294967296*Math.random()>>>0,l=4294967296*Math.random()>>>0,u=4294967296*Math.random()>>>0;return"e"+V[c>>0&255]+V[c>>8&255]+V[c>>16&255]+V[c>>24&255]+V[s>>0&255]+V[s>>8&255]+V[s>>16&255]+V[s>>24&255]+V[l>>0&255]+V[l>>8&255]+V[l>>16&255]+V[l>>24&255]+V[u>>0&255]+V[u>>8&255]+V[u>>16&255]+V[u>>24&255]}(),this.ngZone=u,this.elementRef=l;const{CKEDITOR_VERSION:b}=window;if(b){const[D]=b.split(".").map(Number);D<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}set disabled(l){this.setDisabledState(l)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let l=this.editorWatchdog;return this.watchdog&&(l=this.watchdog._watchdogs.get(this.id)),l?l.editor:null}getId(){return this.id}ngOnChanges(l){Object.prototype.hasOwnProperty.call(l,"data")&&l.data&&!l.data.isFirstChange()&&this.writeValue(l.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){var l=this;return(0,e.Z)(function*(){l.watchdog?yield l.watchdog.remove(l.id):l.editorWatchdog&&l.editorWatchdog.editor&&(yield l.editorWatchdog.destroy(),l.editorWatchdog=void 0)})()}writeValue(l){null===l&&(l=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(l),this.isEditorSettingData=!1):(this.data=l,this.ready.pipe((0,It.P)()).subscribe(u=>{u.data.set(this.data)}))}registerOnChange(l){this.cvaOnChange=l}registerOnTouched(l){this.cvaOnTouched=l}setDisabledState(l){this.editorInstance&&(l?this.editorInstance.enableReadOnlyMode(g):this.editorInstance.disableReadOnlyMode(g)),this.initiallyDisabled=l}attachToWatchdog(){var l=this;const u=(O,d)=>this.ngZone.runOutsideAngular((0,e.Z)(function*(){l.elementRef.nativeElement.appendChild(O);const i=yield l.editor.create(O,d);return l.initiallyDisabled&&i.enableReadOnlyMode(g),l.ngZone.run(()=>{l.ready.emit(i)}),l.setUpEditorEvents(i),i})),b=function(){var O=(0,e.Z)(function*(d){yield d.destroy(),l.elementRef.nativeElement.removeChild(l.editorElement)});return function(i){return O.apply(this,arguments)}}(),D=O=>{(function n(c){return c.observed||c.observers.length>0})(this.error)&&this.ngZone.run(()=>this.error.emit(O))},T=document.createElement(this.tagName),S=this.getConfig();if(this.editorElement=T,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:u,destructor:b,sourceElementOrData:T,config:S}).catch(O=>{D(O)}),this.watchdog.on("itemError",(O,{itemId:d})=>{d===this.id&&D()});else{const O=new Yt(this.editor,this.editorWatchdogConfig);O.setCreator(u),O.setDestructor(b),O.on("error",D),this.editorWatchdog=O,this.ngZone.runOutsideAngular(()=>{O.create(T,S).catch(d=>{D(d)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const l={...this.config},u=this.config.initialData||this.data;return u&&(l.initialData=u),l}setUpEditorEvents(l){const b=l.editing.view.document;l.model.document.on("change:data",D=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){const T=l.data.get();this.cvaOnChange(T)}this.change.emit({event:D,editor:l})}})}),b.on("focus",D=>{this.ngZone.run(()=>{this.focus.emit({event:D,editor:l})})}),b.on("blur",D=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:D,editor:l})})})}}return c.\u0275fac=function(l){return new(l||c)(P.Y36(P.SBq),P.Y36(P.R0b))},c.\u0275cmp=P.Xpm({type:c,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[P._Bn([{provide:St.JU,useExisting:(0,P.Gpc)(()=>c),multi:!0}]),P.TTD],decls:1,vars:0,template:function(l,u){1&l&&P.YNc(0,Ft,0,0,"ng-template")},encapsulation:2}),c})(),h=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=P.oAB({type:c}),c.\u0275inj=P.cJS({imports:[[St.u5,Qt.ez]]}),c})()}}]);